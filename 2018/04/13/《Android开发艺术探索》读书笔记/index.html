<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®° | æ™¯å½¬</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Android,Books," />
  

  <meta name="description" content="ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ - ä¸€æœ¬Androidè¿›é˜¶ç±»ä¹¦ç±ï¼Œé‡‡ç”¨ç†è®ºã€æºç å’Œå®è·µç›¸ç»“åˆçš„æ–¹å¼æ¥é˜è¿°é«˜æ°´å‡†çš„Androidåº”ç”¨å¼€å‘è¦ç‚¹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®°">
<meta property="og:url" content="http://jinbeen.com/2018/04/13/ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®°/index.html">
<meta property="og:site_name" content="æ™¯å½¬">
<meta property="og:description" content="ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ - ä¸€æœ¬Androidè¿›é˜¶ç±»ä¹¦ç±ï¼Œé‡‡ç”¨ç†è®ºã€æºç å’Œå®è·µç›¸ç»“åˆçš„æ–¹å¼æ¥é˜è¿°é«˜æ°´å‡†çš„Androidåº”ç”¨å¼€å‘è¦ç‚¹ã€‚">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/1354448-cfaabc5b421c5945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540">
<meta property="og:updated_time" content="2018-09-18T14:04:14.054Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®°">
<meta name="twitter:description" content="ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ - ä¸€æœ¬Androidè¿›é˜¶ç±»ä¹¦ç±ï¼Œé‡‡ç”¨ç†è®ºã€æºç å’Œå®è·µç›¸ç»“åˆçš„æ–¹å¼æ¥é˜è¿°é«˜æ°´å‡†çš„Androidåº”ç”¨å¼€å‘è¦ç‚¹ã€‚">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/1354448-cfaabc5b421c5945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'G-91L2DT6NQB', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?643275289e816ea38d7a840456d91ebd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">ç›’å­</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">ç›’å­</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/categories/Android"
            rel="noopener noreferrer"
            target="_self"
            >
            åˆ†ç±»
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/Android"
            rel="noopener noreferrer"
            target="_self"
            >
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/project"
            rel="noopener noreferrer"
            target="_self"
            >
            é¡¹ç›®
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            å‹é“¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            å…³äº
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/music.html"
            rel="noopener noreferrer"
            target="_self"
            >
            ğŸµ
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼"><span class="toc-text">Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ"><span class="toc-text">Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"><span class="toc-text">å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"><span class="toc-text">å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º"><span class="toc-text">ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶"><span class="toc-text">èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Activityçš„å¯åŠ¨æ¨¡å¼"><span class="toc-text">Activityçš„å¯åŠ¨æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Activityçš„LaunchMode"><span class="toc-text">Activityçš„LaunchMode</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#standard"><span class="toc-text">standard</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#singleTop"><span class="toc-text">singleTop</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#singleTask"><span class="toc-text">singleTask</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#singleIntance"><span class="toc-text">singleIntance</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#TaskAffinityå±æ€§"><span class="toc-text">TaskAffinityå±æ€§</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activityçš„Flags"><span class="toc-text">Activityçš„Flags</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IntentFilterçš„åŒ¹é…è§„åˆ™"><span class="toc-text">IntentFilterçš„åŒ¹é…è§„åˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#action"><span class="toc-text">action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#category"><span class="toc-text">category</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#data"><span class="toc-text">data</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Viewçš„äº‹ä»¶ä½“ç³»"><span class="toc-text">Viewçš„äº‹ä»¶ä½“ç³»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#viewçš„åŸºç¡€çŸ¥è¯†"><span class="toc-text">viewçš„åŸºç¡€çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä»€ä¹ˆæ˜¯view"><span class="toc-text">ä»€ä¹ˆæ˜¯view</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Viewçš„ä½ç½®å‚æ•°"><span class="toc-text">Viewçš„ä½ç½®å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MotionEventå’ŒTouchSlop"><span class="toc-text">MotionEventå’ŒTouchSlop</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#MotionEvent"><span class="toc-text">MotionEvent</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#TouchSloup"><span class="toc-text">TouchSloup</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VelocityTrackerã€GestureDetectorå’ŒScroller"><span class="toc-text">VelocityTrackerã€GestureDetectorå’ŒScroller</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#VelocityTracker"><span class="toc-text">VelocityTracker</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GestureDetector"><span class="toc-text">GestureDetector</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Scroller"><span class="toc-text">Scroller</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Viewçš„æ»‘åŠ¨"><span class="toc-text">Viewçš„æ»‘åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨scrollTo-scrollBy"><span class="toc-text">ä½¿ç”¨scrollTo/scrollBy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨åŠ¨ç”»"><span class="toc-text">ä½¿ç”¨åŠ¨ç”»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ”¹å˜å¸ƒå±€å±æ€§"><span class="toc-text">æ”¹å˜å¸ƒå±€å±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”"><span class="toc-text">å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¼¹æ€§æ»‘åŠ¨"><span class="toc-text">å¼¹æ€§æ»‘åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨Scroller"><span class="toc-text">ä½¿ç”¨Scroller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é€šè¿‡åŠ¨ç”»"><span class="toc-text">é€šè¿‡åŠ¨ç”»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨å»¶æ—¶ç­–ç•¥"><span class="toc-text">ä½¿ç”¨å»¶æ—¶ç­–ç•¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"><span class="toc-text">Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™"><span class="toc-text">ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Viewçš„æ»‘åŠ¨å†²çª"><span class="toc-text">Viewçš„æ»‘åŠ¨å†²çª</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯"><span class="toc-text">å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™"><span class="toc-text">æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼"><span class="toc-text">æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç†è§£RemoteViews"><span class="toc-text">ç†è§£RemoteViews</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RemoteViewsçš„åº”ç”¨"><span class="toc-text">RemoteViewsçš„åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨"><span class="toc-text">RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨"><span class="toc-text">RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PendingIntentæ¦‚è¿°"><span class="toc-text">PendingIntentæ¦‚è¿°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RemoteViewsçš„å†…éƒ¨æœºåˆ¶"><span class="toc-text">RemoteViewsçš„å†…éƒ¨æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RemoteViewsçš„æ„ä¹‰"><span class="toc-text">RemoteViewsçš„æ„ä¹‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AndroidåŠ¨ç”»æ·±å…¥åˆ†æ"><span class="toc-text">AndroidåŠ¨ç”»æ·±å…¥åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ViewåŠ¨ç”»"><span class="toc-text">ViewåŠ¨ç”»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ViewåŠ¨ç”»çš„ç§ç±»"><span class="toc-text">ViewåŠ¨ç”»çš„ç§ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è‡ªå®šä¹‰ViewåŠ¨ç”»"><span class="toc-text">è‡ªå®šä¹‰ViewåŠ¨ç”»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸§åŠ¨ç”»"><span class="toc-text">å¸§åŠ¨ç”»</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯"><span class="toc-text">ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#LayoutAnimation"><span class="toc-text">LayoutAnimation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activityçš„åˆ‡æ¢æ•ˆæœ"><span class="toc-text">Activityçš„åˆ‡æ¢æ•ˆæœ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å±æ€§åŠ¨ç”»"><span class="toc-text">å±æ€§åŠ¨ç”»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š"><span class="toc-text">å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨"><span class="toc-text">ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨"><span class="toc-text">å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»"><span class="toc-text">å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†"><span class="toc-text">å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹"><span class="toc-text">ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± "><span class="toc-text">Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹"><span class="toc-text">ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Androidä¸­çš„çº¿ç¨‹å½¢æ€"><span class="toc-text">Androidä¸­çš„çº¿ç¨‹å½¢æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AsyncTask"><span class="toc-text">AsyncTask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AsyncTaskçš„å·¥ä½œåŸç†"><span class="toc-text">AsyncTaskçš„å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HandlerThread"><span class="toc-text">HandlerThread</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IntentService"><span class="toc-text">IntentService</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Androidçº¿ç¨‹æ± "><span class="toc-text">Androidçº¿ç¨‹æ± </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰"><span class="toc-text">ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°"><span class="toc-text">ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™"><span class="toc-text">ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#AsyncTaskçš„THREAD-POOL-EXECUTORçº¿ç¨‹æ± é…ç½®"><span class="toc-text">AsyncTaskçš„THREAD_POOL_EXECUTORçº¿ç¨‹æ± é…ç½®:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± "><span class="toc-text">å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç›¸å…³èµ„æ–™"><span class="toc-text">ç›¸å…³èµ„æ–™</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®°" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹è¯»ä¹¦ç¬”è®°</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.04.13</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>JinBeen</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbspçƒ­åº¦ <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>â„ƒ
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <blockquote>
<p><a href="https://book.douban.com/subject/26599538/" target="_blank" rel="external">ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹</a> - ä¸€æœ¬Androidè¿›é˜¶ç±»ä¹¦ç±ï¼Œé‡‡ç”¨ç†è®ºã€æºç å’Œå®è·µç›¸ç»“åˆçš„æ–¹å¼æ¥é˜è¿°é«˜æ°´å‡†çš„Androidåº”ç”¨å¼€å‘è¦ç‚¹ã€‚</p>
</blockquote>
<a id="more"></a>
<p>ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ä»ä¸‰ä¸ªæ–¹é¢æ¥ç»„ç»‡å†…å®¹ã€‚ç¬¬ä¸€ï¼Œä»‹ç»Androidå¼€å‘è€…ä¸å®¹æ˜“æŒæ¡çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼›ç¬¬äºŒï¼Œç»“åˆAndroidæºä»£ç å’Œåº”ç”¨å±‚å¼€å‘è¿‡ç¨‹ï¼Œèä¼šè´¯é€šï¼Œä»‹ç»ä¸€äº›æ¯”è¾ƒæ·±å…¥çš„çŸ¥è¯†ç‚¹ï¼›ç¬¬ä¸‰ï¼Œä»‹ç»ä¸€äº›æ ¸å¿ƒæŠ€æœ¯å’ŒAndroidçš„æ€§èƒ½ä¼˜åŒ–æ€æƒ³ã€‚</p>
<p>ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ä¾§é‡äºAndroidçŸ¥è¯†çš„ä½“ç³»åŒ–å’Œç³»ç»Ÿå·¥ä½œæœºåˆ¶çš„åˆ†æï¼Œé€šè¿‡ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„å­¦ä¹ å¯ä»¥æå¤§åœ°æé«˜å¼€å‘è€…çš„AndroidæŠ€æœ¯æ°´å¹³ï¼Œä»è€Œæ›´åŠ é«˜æ•ˆåœ°æˆä¸ºé«˜çº§å¼€å‘è€…ã€‚è€Œå¯¹äºé«˜çº§å¼€å‘è€…æ¥è¯´ï¼Œä»ç„¶å¯ä»¥ä»ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹çš„çŸ¥è¯†ä½“ç³»ä¸­è·ç›Šã€‚</p>
<blockquote>
<p>å®Œå–„ä¸­ï¼Œå€Ÿé‰´äº†ä»–äººçš„è¯»ä¹¦ç¬”è®°ã€‚</p>
</blockquote>
<h2 id="Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼"><a href="#Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼" class="headerlink" title="Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼"></a>Activityçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯åŠ¨æ¨¡å¼</h2><p>ç”¨æˆ·æ­£å¸¸ä½¿ç”¨æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸ &amp; ç”±äºActivityè¢«ç³»ç»Ÿå›æ”¶æˆ–è€…è®¾å¤‡é…ç½®æ”¹å˜å¯¼è‡´Activityè¢«é”€æ¯é‡å»ºæƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 id="Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ"><a href="#Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ" class="headerlink" title="Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ"></a>Activityçš„ç”Ÿå‘½å‘¨æœŸå…¨é¢åˆ†æ</h3><h4 id="å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"><a href="#å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ" class="headerlink" title="å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"></a>å…¸å‹æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ</h4><p>  <img src="https://upload-images.jianshu.io/upload_images/1354448-cfaabc5b421c5945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540" alt="Activityç”Ÿå‘½å‘¨æœŸ.png"></p>
<ul>
<li>1.Activityç¬¬ä¸€æ¬¡å¯åŠ¨ï¼šonCreate-&gt;onStart-&gt;onResumeã€‚</li>
<li>2.Activityåˆ‡æ¢åˆ°åå°ï¼ˆ ç”¨æˆ·æ‰“å¼€æ–°çš„Activityæˆ–è€…åˆ‡æ¢åˆ°æ¡Œé¢ï¼‰,onPause-&gt;onStopã€‚</li>
<li>3.Activityä»åå°åˆ°å‰å°ï¼Œé‡æ–°å¯è§ï¼ŒonRestart-&gt;onStart-&gt;onResumeã€‚</li>
<li>4.ç”¨æˆ·é€€å‡ºActivityï¼ŒonPause-&gt;onStop-&gt;onDestroyã€‚</li>
<li>5.onStartå¼€å§‹åˆ°onStopä¹‹å‰ï¼ŒActivityå¯è§ã€‚onResumeåˆ°onPauseä¹‹å‰ï¼ŒActivityå¯ä»¥æ¥å—ç”¨æˆ·äº¤äº’ã€‚</li>
<li>6.åœ¨æ–°Activityå¯åŠ¨ä¹‹å‰ï¼Œæ ˆé¡¶çš„Activityéœ€è¦å…ˆonPauseåï¼Œæ–°Activityæ‰èƒ½å¯åŠ¨ã€‚æ‰€ä»¥ä¸èƒ½åœ¨onPauseæ‰§è¡Œè€—æ—¶æ“ä½œã€‚</li>
</ul>
<h4 id="å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"><a href="#å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ" class="headerlink" title="å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ"></a>å¼‚å¸¸æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸåˆ†æ</h4><h5 id="ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º"><a href="#ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º" class="headerlink" title="ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º"></a>ç³»ç»Ÿé…ç½®å˜åŒ–å¯¼è‡´Activityé”€æ¯é‡å»º</h5><p>ä¾‹å¦‚Activityå¤„äºç«–å±çŠ¶æ€ï¼Œ<strong><em>å¦‚æœçªç„¶æ—‹è½¬å±å¹•</em></strong>ï¼Œç”±äºç³»ç»Ÿé…ç½®å‘ç”Ÿäº†æ”¹å˜ï¼ŒActivityå°±ä¼šè¢«é”€æ¯å¹¶é‡æ–°åˆ›å»ºã€‚</p>
<ul>
<li>åœ¨å¼‚å¸¸æƒ…å†µä¸‹ç³»ç»Ÿä¼šåœ¨onStopä¹‹å‰è°ƒç”¨onSaveInstanceStateæ¥ä¿å­˜çŠ¶æ€ã€‚Activityé‡æ–°åˆ›å»ºåï¼Œä¼šåœ¨onStartä¹‹åè°ƒç”¨onRestoreInstanceStateæ¥æ¢å¤ä¹‹å‰ä¿å­˜çš„æ•°æ®ã€‚</li>
<li>ä¿å­˜æ•°æ®çš„æµç¨‹ï¼š Activityè¢«æ„å¤–ç»ˆæ­¢ï¼Œè°ƒç”¨onSaveIntanceStateä¿å­˜æ•°æ®-&gt; Activityå§”æ‰˜Windowï¼ŒWindowå§”æ‰˜å®ƒä¸Šé¢çš„é¡¶çº§å®¹å™¨ä¸€ä¸ªViewGroupï¼ˆ ä¹¦ä¸Šè¯´å¾ˆå¯èƒ½å°±æ˜¯DecorViewï¼‰ ã€‚ç„¶åé¡¶å±‚å®¹å™¨åœ¨é€šçŸ¥æ‰€æœ‰å­å…ƒç´ æ¥ä¿å­˜æ•°æ®ã€‚ æ¯ä¸ªViewéƒ½æœ‰ onSaveInstanceState å’Œ onRestoreInstanceState æ–¹æ³•ã€‚æŸ¥çœ‹TextView æºç å¯ä»¥å‘ç°ä¿å­˜äº†æ–‡æœ¬é€‰ä¸­çŠ¶æ€å’Œæ–‡æœ¬å†…å®¹ã€‚</li>
<li>ç³»ç»Ÿåªåœ¨Activityå¼‚å¸¸ç»ˆæ­¢çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ onSaveInstanceState å’ŒonRestoreInstanceState æ–¹æ³•ã€‚å…¶ä»–æƒ…å†µä¸ä¼šè§¦å‘ã€‚</li>
</ul>
<h5 id="èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶"><a href="#èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶" class="headerlink" title="èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶"></a>èµ„æºå†…å­˜ä¸è¶³å¯¼è‡´ä½ä¼˜å…ˆçº§çš„Activityè¢«å›æ”¶</h5><ul>
<li>1.å‰å°- å¯è§éå‰å°ï¼ˆ è¢«å¯¹è¯æ¡†é®æŒ¡çš„Activityï¼‰ -åå°ï¼Œè¿™ä¸‰ç§Activityä¼˜å…ˆçº§ä»é«˜åˆ°ä½ã€‚</li>
<li>2.android:configChanges=â€orientationâ€ åœ¨manifestä¸­æŒ‡å®š configChanges åœ¨ç³»ç»Ÿé…ç½®å˜åŒ–åä¸é‡æ–°åˆ›å»ºActivityï¼Œä¹Ÿä¸ä¼šæ‰§è¡ŒonSaveInstanceState å’Œ onRestoreInstanceState æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨ onConfigurationChnaged æ–¹æ³•ã€‚</li>
<li>3.configChanges ä¸€èˆ¬å¸¸ç”¨ä¸‰ä¸ªé€‰é¡¹ï¼š<ul>
<li>locale ç³»ç»Ÿè¯­è¨€å˜åŒ–</li>
<li>keyborardHidden é”®ç›˜çš„å¯è®¿é—®æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œæ¯”å¦‚ç”¨æˆ·è°ƒå‡ºäº†é”®ç›˜</li>
<li>orientation å±å¹•æ–¹å‘å˜åŒ–</li>
</ul>
</li>
</ul>
<h3 id="Activityçš„å¯åŠ¨æ¨¡å¼"><a href="#Activityçš„å¯åŠ¨æ¨¡å¼" class="headerlink" title="Activityçš„å¯åŠ¨æ¨¡å¼"></a>Activityçš„å¯åŠ¨æ¨¡å¼</h3><h4 id="Activityçš„LaunchMode"><a href="#Activityçš„LaunchMode" class="headerlink" title="Activityçš„LaunchMode"></a>Activityçš„LaunchMode</h4><p>Androidä½¿ç”¨æ ˆæ¥ç®¡ç†Activityã€‚</p>
<h5 id="standard"><a href="#standard" class="headerlink" title="standard"></a>standard</h5><ul>
<li>æ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä¸ç®¡è¿™ä¸ªActivityåœ¨æ ˆä¸­æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li>
<li>è°å¯åŠ¨äº†è¿™ä¸ªActivityï¼Œé‚£ä¹ˆActivityå°±è¿è¡Œåœ¨å¯åŠ¨å®ƒçš„é‚£ä¸ªActivityæ‰€åœ¨çš„æ ˆä¸­ã€‚</li>
<li>ç”¨Applicationå»å¯åŠ¨Activityæ—¶ä¼šæŠ¥é”™ï¼Œæç¤ºéActivityçš„Contextæ²¡æœ‰æ‰€è°“çš„ä»»åŠ¡æ ˆã€‚è§£å†³<br>åŠæ³•æ˜¯ä¸ºå¾…å¯åŠ¨Activityåˆ¶å®šFLAG_ACTIVITY_NEW_TASHæ ‡å¿—ä½ï¼Œè¿™æ ·å°±ä¼šä¸ºå®ƒåˆ›å»º<br>ä¸€ä¸ªæ–°çš„ä»»åŠ¡æ ˆã€‚</li>
</ul>
<h5 id="singleTop"><a href="#singleTop" class="headerlink" title="singleTop"></a>singleTop</h5><ul>
<li>å¦‚æœæ–°Activityä½äºä»»åŠ¡æ ˆçš„æ ˆé¡¶ï¼Œé‚£ä¹ˆæ­¤Activityä¸ä¼šè¢«é‡æ–°åˆ›å»ºï¼ŒåŒæ—¶å›è°ƒ onNewIntent æ–¹æ³•ã€‚</li>
<li>å¦‚æœæ–°Activityå·²ç»å­˜åœ¨ä½†ä¸æ˜¯ä½äºæ ˆé¡¶ï¼Œé‚£ä¹ˆæ–°Activityä»ç„¶ä¼šè¢«åˆ›å»ºã€‚</li>
</ul>
<h5 id="singleTask"><a href="#singleTask" class="headerlink" title="singleTask"></a>singleTask</h5><ul>
<li>è¿™æ˜¯ä¸€ç§å•å®ä¾‹æ¨¡å¼</li>
<li>åªè¦Activityåœ¨æ ˆä¸­å­˜åœ¨ï¼Œé‚£ä¹ˆå¤šæ¬¡å¯åŠ¨è¿™ä¸ªActivityéƒ½ä¸ä¼šé‡æ–°åˆ›å»ºå®ä¾‹ï¼ŒåŒæ—¶ä¹Ÿä¼šå›è°ƒ onNewIntent æ–¹æ³•ã€‚</li>
<li>åŒæ—¶ä¼šå¯¼è‡´åœ¨Activityä¹‹ä¸Šçš„æ ˆå†…Activityå‡ºæ ˆã€‚</li>
</ul>
<h5 id="singleIntance"><a href="#singleIntance" class="headerlink" title="singleIntance"></a>singleIntance</h5><ul>
<li>å…·æœ‰singleTaskæ¨¡å¼çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒæ—¶å…·æœ‰æ­¤æ¨¡å¼çš„Activityåªèƒ½å•ç‹¬çš„ä½äºä¸€ä¸ªä»»åŠ¡æ ˆä¸­</li>
</ul>
<h5 id="TaskAffinityå±æ€§"><a href="#TaskAffinityå±æ€§" class="headerlink" title="TaskAffinityå±æ€§"></a>TaskAffinityå±æ€§</h5><p>TaskAffinityå‚æ•°æ ‡è¯†äº†ä¸€ä¸ªActivityæ‰€éœ€è¦çš„ä»»åŠ¡æ ˆçš„åå­—ã€‚ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”ä¸­é—´å¿…é¡»åŒ…å«åŒ…ååˆ†éš”ç¬¦â€œ.â€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰Activityæ‰€éœ€çš„ä»»åŠ¡æ ˆåå­—ä¸ºåº”ç”¨åŒ…åã€‚TashAffinityå±æ€§ä¸»è¦å’ŒsingleTaskå¯åŠ¨æ¨¡å¼æˆ–è€… allowTaskReparenting å±æ€§é…å¯¹ä½¿ç”¨ï¼Œå…¶ä»–æƒ…å†µä¸‹æ²¡æœ‰æ„ä¹‰ã€‚ åº”ç”¨Aå¯åŠ¨äº†åº”ç”¨Bçš„æŸä¸ªActivityåï¼Œå¦‚æœActivityçš„allowTaskReparentingå±æ€§ä¸ºtrueçš„è¯ï¼Œé‚£ä¹ˆå½“åº”ç”¨Bè¢«å¯åŠ¨åï¼Œæ­¤Activityä¼šç›´æ¥ä»åº”ç”¨Açš„ä»»åŠ¡æ ˆè½¬ç§»åˆ°åº”ç”¨Bçš„ä»»åŠ¡æ ˆä¸­ã€‚ æ‰“ä¸ªæ¯”æ–¹å°±æ˜¯ï¼Œåº”ç”¨Aå¯åŠ¨äº†åº”ç”¨Bçš„ActivityXï¼Œç„¶åæŒ‰Homeå›åˆ°æ¡Œé¢ï¼Œå•å‡»åº”ç”¨Bçš„å›¾æ ‡ï¼Œè¿™æ—¶å¹¶ä¸ä¼šå¯åŠ¨Bçš„ä¸»Activityï¼Œè€Œæ˜¯é‡æ–°æ˜¾ç¤ºå·²ç»è¢«åº”ç”¨Aå¯åŠ¨çš„ActivityXã€‚è¿™æ˜¯å› ä¸ºActivityXçš„TaskAffinityå€¼è‚¯å®šä¸å’Œåº”ç”¨Açš„ä»»åŠ¡æ ˆç›¸åŒï¼ˆ å› ä¸ºåŒ…åä¸åŒï¼‰ ã€‚æ‰€ä»¥å½“åº”ç”¨Bè¢«å¯åŠ¨ä»¥åï¼Œå‘ç°ActivityXåŸæœ¬æ‰€éœ€çš„ä»»åŠ¡æ ˆå·²ç»è¢«åˆ›å»ºäº†ï¼Œæ‰€ä»¥æŠŠActivityXä»Açš„ä»»åŠ¡æ ˆä¸­è½¬ç§»è¿‡æ¥äº†ã€‚</p>
<p>è®¾ç½®å¯åŠ¨æ¨¡å¼:</p>
<ul>
<li>1.manifestä¸­ è®¾ç½®ä¸‹çš„ android:launchMode å±æ€§ã€‚</li>
<li>2.å¯åŠ¨Activityçš„ intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); ã€‚</li>
<li>3.ä¸¤ç§åŒæ—¶å­˜åœ¨æ—¶ï¼Œä»¥ç¬¬äºŒç§ä¸ºå‡†ã€‚ç¬¬ä¸€ç§æ–¹å¼æ— æ³•ç›´æ¥ä¸ºActivityæ·»åŠ FLAG_ACTIVITY_CLEAR_TOPæ ‡è¯†ï¼Œç¬¬äºŒç§æ–¹å¼æ— æ³•æŒ‡å®šsingleInstanceæ¨¡å¼ã€‚</li>
<li>4.å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œ adb shell dumpsys activity å‘½ä»¤æŸ¥çœ‹æ ˆä¸­çš„Activityä¿¡æ¯ã€‚</li>
</ul>
<h4 id="Activityçš„Flags"><a href="#Activityçš„Flags" class="headerlink" title="Activityçš„Flags"></a>Activityçš„Flags</h4><p>è¿™äº›FLAGå¯ä»¥è®¾å®šå¯åŠ¨æ¨¡å¼ã€å¯ä»¥å½±å“Activityçš„è¿è¡ŒçŠ¶æ€ã€‚</p>
<ul>
<li>FLAG_ACTIVITY_CLEAR_TOP å…·æœ‰æ­¤æ ‡è®°ä½çš„Activityå¯åŠ¨æ—¶ï¼ŒåŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­ä½äºå®ƒä¸Šé¢çš„Activityéƒ½è¦å‡ºæ ˆï¼Œä¸€èˆ¬å’ŒFLAG_ACTIVITY_NEW_TASKé…åˆä½¿ç”¨ã€‚æ•ˆæœå’ŒsingleTaskä¸€æ ·ã€‚</li>
<li>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS å¦‚æœè®¾ç½®ï¼Œæ–°çš„Activityä¸ä¼šåœ¨æœ€è¿‘å¯åŠ¨çš„Activityçš„åˆ—è¡¨(å°±æ˜¯å®‰å“æ‰‹æœºé‡Œæ˜¾ç¤ºæœ€è¿‘æ‰“å¼€çš„Activityé‚£ä¸ªç³»ç»Ÿçº§çš„UI)ä¸­ä¿å­˜ã€‚</li>
</ul>
<h3 id="IntentFilterçš„åŒ¹é…è§„åˆ™"><a href="#IntentFilterçš„åŒ¹é…è§„åˆ™" class="headerlink" title="IntentFilterçš„åŒ¹é…è§„åˆ™"></a>IntentFilterçš„åŒ¹é…è§„åˆ™</h3><p>å¯åŠ¨Activityåˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>1.æ˜¾ç¤ºè°ƒç”¨ æ˜ç¡®æŒ‡å®šè¢«å¯åŠ¨å¯¹è±¡çš„ç»„ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ…åå’Œç±»å</li>
<li>2.éšå¼è°ƒç”¨ ä¸éœ€è¦æ˜ç¡®æŒ‡å®šç»„ä»¶ä¿¡æ¯ï¼Œéœ€è¦Intentèƒ½å¤ŸåŒ¹é…ç›®æ ‡ç»„ä»¶ä¸­çš„IntentFilterä¸­æ‰€è®¾ç½®çš„è¿‡æ»¤ä¿¡æ¯ã€‚</li>
<li>3.IntentFilterä¸­çš„è¿‡æ»¤ä¿¡æ¯æœ‰actionã€categoryã€dataã€‚</li>
<li>4.åªæœ‰ä¸€ä¸ªIntentåŒæ—¶åŒ¹é…actionç±»åˆ«ã€categoryç±»åˆ«ã€dataç±»åˆ«æ‰èƒ½æˆåŠŸå¯åŠ¨ç›®æ ‡Activityã€‚</li>
<li>5.ä¸€ä¸ªActivityå¯ä»¥æœ‰å¤šä¸ªintent-filterï¼Œä¸€ä¸ªIntentåªè¦èƒ½åŒ¹é…ä»»ä½•ä¸€ç»„intent-filterå³å¯æˆåŠŸå¯åŠ¨å¯¹åº”çš„Activityã€‚</li>
</ul>
<h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><ul>
<li>1.actionæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
<li>2.ä¸€ä¸ªintent-filterå¯ä»¥æœ‰å¤šä¸ªacitonï¼Œåªè¦Intentä¸­çš„actionèƒ½å¤Ÿå’Œä»»ä½•ä¸€ä¸ªactionç›¸åŒå³å¯æˆåŠŸåŒ¹é…ã€‚åŒ¹é…æ˜¯æŒ‡ä¸actionçš„å­—ç¬¦ä¸²å®Œå…¨ä¸€æ ·ã€‚</li>
<li>3.Intentä¸­å¦‚æœæ²¡æœ‰æŒ‡å®šactionï¼Œé‚£ä¹ˆåŒ¹é…å¤±è´¥ã€‚</li>
</ul>
<h4 id="category"><a href="#category" class="headerlink" title="category"></a>category</h4><ul>
<li>categoryæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
<li>2.Intentå¯ä»¥æ²¡æœ‰categoryï¼Œä½†æ˜¯å¦‚æœä½ ä¸€æ—¦æœ‰categoryï¼Œä¸ç®¡æœ‰å‡ ä¸ªï¼Œæ¯ä¸ªéƒ½èƒ½å¤Ÿä¸<br>intent-filterä¸­çš„å…¶ä¸­ä¸€ä¸ªcategoryç›¸åŒã€‚</li>
<li>3.ç³»ç»Ÿåœ¨<code>startActivity</code>å’Œ<code>startActivityForResult</code>çš„æ—¶å€™ï¼Œä¼šé»˜è®¤ä¸ºIntentåŠ ä¸Š android.intent.category.DEFAULT è¿™ä¸ªcategoryï¼Œæ‰€ä»¥ä¸ºäº†æˆ‘ä»¬çš„activityèƒ½å¤Ÿæ¥æ”¶éšå¼è°ƒç”¨ï¼Œå°±å¿…é¡»åœ¨intent-filterä¸­åŠ ä¸Š android.intent.category.DEFAULT è¿™ä¸ªcategoryã€‚</li>
</ul>
<h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><ul>
<li>1.dataçš„åŒ¹é…è§„åˆ™ä¸actionä¸€æ ·ï¼Œå¦‚æœintent-filterä¸­å®šä¹‰äº†dataï¼Œé‚£ä¹ˆIntentä¸­å¿…é¡»è¦å®šä¹‰å¯åŒ¹é…çš„dataã€‚</li>
<li><p>2.intent-filterä¸­dataçš„è¯­æ³•ï¼š</p>
<pre><code>&lt;data android:scheme=&quot;string&quot;
    android:host=&quot;string&quot;
    android:port=&quot;string&quot;
    android:path=&quot;string&quot;
    android:pathPattern=&quot;string&quot;
    android:pathPrefix=&quot;string&quot;
    android:mimeType=&quot;string&quot;/&gt;
</code></pre></li>
<li><p>3.Intentä¸­çš„dataæœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šmimeTypeå’ŒURIã€‚mimeTypeæ˜¯æŒ‡åª’ä½“ç±»å‹ï¼Œæ¯”å¦‚<br>image/jpegã€audio/mpeg4-genericå’Œvideo/ç­‰ï¼Œå¯ä»¥è¡¨ç¤ºå›¾ç‰‡ã€æ–‡æœ¬ã€è§†é¢‘ç­‰ä¸åŒçš„åª’<br>ä½“æ ¼å¼ã€‚</p>
<ul>
<li>URIçš„ç»“æ„ï¼š<code>&lt;scheme&gt;://&lt;host&gt;:&lt;port&gt;/[&lt;path&gt;|&lt;pathPrefix&gt;|&lt;pathPattern&gt;]</code><br>//å®é™…ä¾‹å­<br>content://com.example.project:200/folder/subfolder/etc<br><a href="http://www.baidu.com:80/search/info" target="_blank" rel="external">http://www.baidu.com:80/search/info</a><ul>
<li>schemeï¼šURIçš„æ¨¡å¼ï¼Œæ¯”å¦‚httpã€fileã€contentç­‰ï¼Œé»˜è®¤å€¼æ˜¯ file ã€‚</li>
<li>hostï¼šURIçš„ä¸»æœºå</li>
<li>portï¼šURIçš„ç«¯å£å·</li>
<li>pathã€pathPatternå’ŒpathPrefixï¼šè¿™ä¸‰ä¸ªå‚æ•°æè¿°è·¯å¾„ä¿¡æ¯ã€‚<ul>
<li>pathã€pathPatternå¯ä»¥è¡¨ç¤ºå®Œæ•´çš„è·¯å¾„ä¿¡æ¯ï¼Œå…¶ä¸­pathPatternå¯ä»¥åŒ…å«é€šé…ç¬¦ * ï¼Œè¡¨ç¤º0ä¸ªæˆ–è€…å¤šä¸ªä»»æ„å­—ç¬¦ã€‚</li>
<li>pathPrefixåªè¡¨ç¤ºè·¯å¾„çš„å‰ç¼€ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>IntentæŒ‡å®šdataæ—¶ï¼Œå¿…é¡»è°ƒç”¨ setDataAndType æ–¹æ³•ï¼Œ setData å’Œ setType ä¼šæ¸…é™¤å¦ä¸€æ–¹çš„å€¼ã€‚</li>
</ul>
</li>
</ul>
<p><strong>éšå¼è°ƒç”¨éœ€æ³¨æ„:</strong></p>
<ul>
<li><p>1.å½“é€šè¿‡éšå¼è°ƒç”¨å¯åŠ¨Activityæ—¶ï¼Œæ²¡æ‰¾åˆ°å¯¹åº”çš„Activityç³»ç»Ÿå°±ä¼šæŠ›å‡º android.content.ActivityNotFoundException å¼‚å¸¸ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰Activityèƒ½å¤ŸåŒ¹é…æˆ‘ä»¬çš„éšå¼Intentã€‚</p>
<ul>
<li>i. é‡‡ç”¨ PackageManager çš„ resloveActivity æ–¹æ³•<br>public abstract List<resolveinfo> queryIntentActivityies(Intent intent,int flags);<br>public abstract ResolveInfo resloveActivity(Intent intent,int flags);<br>ä»¥ä¸Šçš„ç¬¬äºŒä¸ªå‚æ•°ä½¿ç”¨ MATCH_DEFAULT_ONLY ï¼Œè¿™ä¸ªæ ‡å¿—ä½çš„å«ä¹‰æ˜¯ä»…ä»…åŒ¹é…é‚£äº›åœ¨intent-filterä¸­å£°æ˜äº† android.intent.category.DEFAULT è¿™ä¸ªcategoryçš„Activityã€‚å› ä¸ºå¦‚æœæŠŠä¸å«è¿™ä¸ªcategoryçš„ActivityåŒ¹é…å‡ºæ¥äº†ï¼Œç”±äºä¸å«DEFAULTè¿™ä¸ªcategoryçš„Activityæ˜¯æ— æ³•æ¥å—éšå¼Intentçš„ä»è€Œå¯¼è‡´startActivityå¤±è´¥ã€‚</resolveinfo></li>
<li>ii. é‡‡ç”¨ Intent çš„ resloveActivity æ–¹æ³•</li>
</ul>
</li>
<li><p>2.ä¸‹é¢çš„actionå’Œcategoryç”¨æ¥è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå…¥å£Activityå¹¶ä¸”ä¼šå‡ºç°åœ¨ç³»ç»Ÿçš„åº”ç”¨åˆ—è¡¨ä¸­ï¼ŒäºŒè€…ç¼ºä¸€ä¸å¯ã€‚<br><action android:name="android.intent.action.MAIN"></action></p>
<category android:name="android.intent.category.LAUNCHER">

</category></li>
</ul>
<hr>
<h2 id="Viewçš„äº‹ä»¶ä½“ç³»"><a href="#Viewçš„äº‹ä»¶ä½“ç³»" class="headerlink" title="Viewçš„äº‹ä»¶ä½“ç³»"></a>Viewçš„äº‹ä»¶ä½“ç³»</h2><h3 id="viewçš„åŸºç¡€çŸ¥è¯†"><a href="#viewçš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="viewçš„åŸºç¡€çŸ¥è¯†"></a>viewçš„åŸºç¡€çŸ¥è¯†</h3><h4 id="ä»€ä¹ˆæ˜¯view"><a href="#ä»€ä¹ˆæ˜¯view" class="headerlink" title="ä»€ä¹ˆæ˜¯view"></a>ä»€ä¹ˆæ˜¯view</h4><p>Viewæ˜¯Androidä¸­æ‰€æœ‰æ§ä»¶çš„åŸºç±»ï¼ŒViewçš„æœ¬èº«å¯ä»¥æ˜¯å•ä¸ªç©ºé—´ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªæ§ä»¶ç»„æˆçš„ä¸€<br>ç»„æ§ä»¶ï¼Œå³ViewGroupï¼ŒViewGroupç»§æ‰¿è‡ªViewï¼Œå…¶å†…éƒ¨å¯ä»¥æœ‰å­Viewï¼Œè¿™æ ·å°±å½¢æˆäº†View<br>æ ‘çš„ç»“æ„ã€‚</p>
<h4 id="Viewçš„ä½ç½®å‚æ•°"><a href="#Viewçš„ä½ç½®å‚æ•°" class="headerlink" title="Viewçš„ä½ç½®å‚æ•°"></a>Viewçš„ä½ç½®å‚æ•°</h4><p>Viewçš„ä½ç½®ä¸»è¦ç”±å®ƒçš„å››ä¸ªé¡¶ç‚¹æ¥å†³å®šï¼Œå³å®ƒçš„å››ä¸ªå±æ€§ï¼štopã€leftã€rightã€bottomï¼Œåˆ†åˆ«è¡¨ç¤ºViewå·¦ä¸Šè§’çš„åæ ‡ç‚¹ï¼ˆtopï¼Œleftï¼‰ä»¥åŠå³ä¸‹è§’çš„åæ ‡ç‚¹ï¼ˆrightï¼Œbottomï¼‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°Viewçš„å¤§å°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">width = right - left</div><div class="line">height = bottom - top</div></pre></td></tr></table></figure></p>
<p>è€Œè¿™å››ä¸ªå‚æ•°å¯ä»¥ç”±ä»¥ä¸‹æ–¹å¼è·å–ï¼š</p>
<ul>
<li>Left = getLeft();</li>
<li>Right = getRight();</li>
<li>Top = getTop();</li>
<li>Bottom = getBottom();<br>Android3.0åï¼ŒViewå¢åŠ äº†xã€yã€translationXå’ŒtranslationYè¿™å‡ ä¸ªå‚æ•°ã€‚å…¶ä¸­xå’Œyæ˜¯Viewå·¦ä¸Šè§’çš„åæ ‡ï¼Œè€ŒtranslationXå’ŒtranslationYæ˜¯Viewå·¦ä¸Šè§’ç›¸å¯¹äºå®¹å™¨çš„åç§»é‡ã€‚</li>
</ul>
<p>ä»–ä»¬ä¹‹é—´çš„æ¢ç®—å…³ç³»å¦‚ä¸‹ï¼š<br>x = left + translationX;<br>y = top + translationY;<br>æ³¨æ„ï¼šViewåœ¨å¹³ç§»çš„è¿‡ç¨‹ä¸­ï¼Œtopå’Œleftä¸ä¼šæ”¹å˜ï¼Œæ”¹å˜çš„æ˜¯xã€yã€translationXå’ŒtranslaYã€‚</p>
<h4 id="MotionEventå’ŒTouchSlop"><a href="#MotionEventå’ŒTouchSlop" class="headerlink" title="MotionEventå’ŒTouchSlop"></a>MotionEventå’ŒTouchSlop</h4><h5 id="MotionEvent"><a href="#MotionEvent" class="headerlink" title="MotionEvent"></a>MotionEvent</h5><p>åœ¨æ‰‹æŒ‡æ¥è§¦åˆ°å±å¹•åä¼šäº§ç”Ÿä¹™çƒ¯ç±»çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚</p>
<ul>
<li>ç‚¹å‡»å±å¹•åç¦»å¼€æ¾å¼€ï¼Œäº‹ä»¶åºåˆ—ä¸ºDOWN-&gt;UP</li>
<li>ç‚¹å‡»å±å¹•æ»‘åŠ¨ä¸€ä¼šå†æ¾å¼€ï¼Œäº‹ä»¶åºåˆ—ä¸ºDOWN-&gt;MOVE-&gt;â€¦-&gt;MOVE-&gt;UP é€šè¿‡MotionEvenå¯¹è±¡æˆ‘ä»¬å¯ä»¥å¾—åˆ°äº‹ä»¶å‘ç”Ÿçš„xå’Œyåæ ‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡getX/getYå’ŒgetRawX/getRawYå¾—åˆ°ï¼Œå®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼šgetX/getYè¿”å›çš„æ˜¯ç›¸å¯¹äºå½“å‰Viewå·¦ä¸Šè§’çš„xå’Œyåæ ‡ï¼ŒgetRawX/getRawYè¿”å›çš„æ˜¯ç›¸å¯¹äºæ‰‹æœºå±å¹•å·¦ä¸Šè§’çš„xå’Œyåæ ‡ã€‚</li>
</ul>
<h5 id="TouchSloup"><a href="#TouchSloup" class="headerlink" title="TouchSloup"></a>TouchSloup</h5><p>TouchSloupæ˜¯ç³»ç»Ÿæ‰€èƒ½è¯†åˆ«å‡ºçš„è¢«è®¤ä¸ºæ˜¯æ»‘åŠ¨çš„æœ€å°è·ç¦»ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸è®¾å¤‡æœ‰å…³ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•è·å¾—ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ViewConfiguration.get(getContext()).getScaledTouchSloup().</div></pre></td></tr></table></figure></p>
<h4 id="VelocityTrackerã€GestureDetectorå’ŒScroller"><a href="#VelocityTrackerã€GestureDetectorå’ŒScroller" class="headerlink" title="VelocityTrackerã€GestureDetectorå’ŒScroller"></a>VelocityTrackerã€GestureDetectorå’ŒScroller</h4><h5 id="VelocityTracker"><a href="#VelocityTracker" class="headerlink" title="VelocityTracker"></a>VelocityTracker</h5><p>é€Ÿåº¦è¿½è¸ªï¼Œç”¨äºè¿½è¸ªæ‰‹æŒ‡åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­çš„é€Ÿåº¦ï¼ŒåŒ…æ‹¬æ°´å¹³æ”¾å‘é€Ÿåº¦å’Œç«–ç›´æ–¹å‘é€Ÿåº¦ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š<br>1.åœ¨Viewçš„onTouchEventæ–¹æ³•ä¸­è¿½è¸ªå½“å‰å•å‡»äº‹ä»¶çš„é€Ÿåº¦<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">VelocityRracker velocityTracker = VelocityTracker.obtain();</div><div class="line">velocityTracker.addMovement(event);</div></pre></td></tr></table></figure></p>
<p>2.è®¡ç®—é€Ÿåº¦ï¼Œè·å¾—æ°´å¹³é€Ÿåº¦å’Œç«–ç›´é€Ÿåº¦<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">velocityTracker.computeCurrentVelocity(<span class="number">1000</span>);</div><div class="line"><span class="keyword">int</span> xVelocity = (<span class="keyword">int</span>)velocityTracker.getXVelocity();</div><div class="line"><span class="keyword">int</span> yVelocity = (<span class="keyword">int</span>)velocityTracker.getYVelocity();</div></pre></td></tr></table></figure></p>
<p>æ³¨æ„ï¼Œè·å–é€Ÿåº¦ä¹‹å‰å¿…é¡»å…ˆè®¡ç®—é€Ÿåº¦ï¼Œå³è°ƒç”¨computeCurrentVelocityæ–¹æ³•ï¼Œè¿™é‡ŒæŒ‡çš„é€Ÿåº¦æ˜¯æŒ‡ä¸€æ®µæ—¶é—´å†…æ‰‹æŒ‡æ»‘è¿‡çš„åƒç´ æ•°ï¼Œ1000æŒ‡çš„æ˜¯1000æ¯«ç§’ï¼Œå¾—åˆ°çš„æ˜¯1000æ¯«ç§’å†…æ»‘è¿‡çš„åƒç´ æ•°ã€‚é€Ÿåº¦å¯æ­£å¯è´Ÿï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">é€Ÿåº¦ = ï¼ˆç»ˆç‚¹ä½ç½® - èµ·ç‚¹ä½ç½®ï¼‰ / æ—¶é—´æ®µ</div></pre></td></tr></table></figure></p>
<p>3.æœ€åï¼Œå½“ä¸éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨clear()æ–¹æ³•é‡ç½®å¹¶å›æ”¶å†…å­˜ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">velocityTracker.clear();</div><div class="line">velocityTracker.recycle();</div></pre></td></tr></table></figure></p>
<h5 id="GestureDetector"><a href="#GestureDetector" class="headerlink" title="GestureDetector"></a>GestureDetector</h5><p>æ‰‹åŠ¿æ£€æµ‹ï¼Œç”¨äºè¾…åŠ©æ£€æµ‹ç”¨æˆ·çš„å•å‡»ã€æ»‘åŠ¨ã€é•¿æŒ‰ã€åŒå‡»ç­‰è¡Œä¸ºã€‚ ä½¿ç”¨æ–¹æ³•ï¼š<br>1.åˆ›å»ºä¸€ä¸ªGestureDetectorå¯¹è±¡å¹¶å®ç°OnGestureListeneræ¥å£ï¼Œæ ¹æ®éœ€è¦ï¼Œä¹Ÿå¯å®ç°<br>OnDoubleTapListeneræ¥å£ä»è€Œç›‘å¬åŒå‡»è¡Œä¸ºï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GestureDetector mGestureDetector = <span class="keyword">new</span> GestureDetector(<span class="keyword">this</span>);</div><div class="line"><span class="comment">//è§£å†³é•¿æŒ‰å±å¹•åæ— æ³•æ‹–åŠ¨çš„ç°è±¡</span></div><div class="line">mGestureDetector.setIsLongpressEnabled(<span class="keyword">false</span>);</div></pre></td></tr></table></figure></p>
<p>2.åœ¨ç›®æ ‡Viewçš„OnTouchEventæ–¹æ³•ä¸­æ·»åŠ ä»¥ä¸‹å®ç°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">boolean</span> consume = mGestureDetector.onTouchEvent(event);</div><div class="line"><span class="keyword">return</span> consume;</div></pre></td></tr></table></figure></p>
<p>3.å®ç°OnGestureListenerå’ŒOnDoubleTapListeneræ¥å£ä¸­çš„æ–¹æ³•ï¼Œå…¶ä¸­å¸¸ç”¨çš„æ–¹æ³•æœ‰ï¼š<br>onSingleTapUp(å•å‡»)ã€onFling(å¿«é€Ÿæ»‘åŠ¨)ã€onScroll(æ‹–åŠ¨)ã€onLongPress(é•¿æŒ‰)å’ŒonDoubleTapï¼ˆåŒå‡»ï¼‰ã€‚ å»ºè®®ï¼šå¦‚æœåªæ˜¯ç›‘å¬æ»‘åŠ¨ç›¸å…³çš„ï¼Œå¯ä»¥è‡ªå·±åœ¨onTouchEventä¸­å®ç°ï¼Œå¦‚æœè¦ç›‘å¬åŒå‡»è¿™ç§è¡Œä¸ºï¼Œé‚£ä¹ˆå°±ä½¿ç”¨GestureDetectorã€‚</p>
<h5 id="Scroller"><a href="#Scroller" class="headerlink" title="Scroller"></a>Scroller</h5><p>å¼¹æ€§æ»‘åŠ¨å¯¹è±¡ï¼Œç”¨äºå®ç°Viewçš„å¼¹æ€§æ»‘åŠ¨ã€‚å…¶æœ¬èº«æ— æ³•è®©Viewä»–è¡Œæ»‘åŠ¨ï¼Œéœ€è¦å’ŒViewçš„computeScrollæ–¹æ³•é…åˆä½¿ç”¨æ‰èƒ½å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Scroller scroller = <span class="keyword">new</span> Scroller(mContext);</div><div class="line"><span class="comment">//ç¼“æ…¢ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">smoothScrollTo</span><span class="params">(<span class="keyword">int</span> destX,<span class="keyword">int</span> destY)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> scrollX = getScrollX();</div><div class="line">	<span class="keyword">int</span> delta = destX - scrollX;</div><div class="line">	<span class="comment">//1000mså†…æ»‘å‘destX,æ•ˆæœå°±æ˜¯æ…¢æ…¢æ»‘åŠ¨</span></div><div class="line">	mScroller.startScroll(scrollX,<span class="number">0</span>,delta,<span class="number">0</span>,<span class="number">1000</span>);</div><div class="line">	invalidata();</div><div class="line">&#125;</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(mScroller.computeScrollOffset())&#123;</div><div class="line">		scrollTo(mScroller.getCurrX,mScroller.getCurrY());</div><div class="line">		postInvalidate();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åŸç†ä¸‹èŠ‚è®²ã€‚</p>
<h3 id="Viewçš„æ»‘åŠ¨"><a href="#Viewçš„æ»‘åŠ¨" class="headerlink" title="Viewçš„æ»‘åŠ¨"></a>Viewçš„æ»‘åŠ¨</h3><h4 id="ä½¿ç”¨scrollTo-scrollBy"><a href="#ä½¿ç”¨scrollTo-scrollBy" class="headerlink" title="ä½¿ç”¨scrollTo/scrollBy"></a>ä½¿ç”¨scrollTo/scrollBy</h4><p>1.scrollByå®é™…è°ƒç”¨äº†scrollToï¼Œå®ƒå®ç°äº†åŸºäºå½“å‰ä½ç½®çš„ç›¸å¯¹æ»‘åŠ¨ï¼Œè€ŒscrollToåˆ™å®ç°äº†ç»å¯¹æ»‘åŠ¨ã€‚<br>2.scrollToå’ŒscrollByåªèƒ½æ”¹å˜Viewçš„å†…å®¹ä½ç½®è€Œä¸èƒ½æ”¹å˜Viewåœ¨å¸ƒå±€ä¸­çš„ä½ç½®ã€‚<br>3.æ»‘åŠ¨åç§»é‡mScrollXå’ŒmScrollYçš„æ­£è´Ÿä¸å®é™…æ»‘åŠ¨æ–¹å‘ç›¸åï¼Œå³ä»å·¦å‘å³æ»‘åŠ¨ï¼ŒmScrollXä¸ºè´Ÿå€¼ï¼Œä»ä¸Šå¾€ä¸‹æ»‘åŠ¨mScrollYä¸ºè´Ÿå€¼ã€‚</p>
<h4 id="ä½¿ç”¨åŠ¨ç”»"><a href="#ä½¿ç”¨åŠ¨ç”»" class="headerlink" title="ä½¿ç”¨åŠ¨ç”»"></a>ä½¿ç”¨åŠ¨ç”»</h4><p>ä½¿ç”¨åŠ¨ç”»ç§»åŠ¨Viewï¼Œä¸»è¦æ˜¯æ“ä½œViewçš„translationXå’ŒtranslationYå±æ€§ï¼Œæ—¢å¯ä»¥é‡‡ç”¨ä¼ ç»Ÿçš„ViewåŠ¨ç”»ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨å±æ€§åŠ¨ç”»ï¼Œå¦‚æœä½¿ç”¨å±æ€§åŠ¨ç”»ï¼Œä¸ºäº†èƒ½å¤Ÿå…¼å®¹3.0ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œéœ€è¦é‡‡ç”¨å¼€æºåŠ¨ç”»åº“nineolddandroidsã€‚ å¦‚ä½¿ç”¨å±æ€§åŠ¨ç”»ï¼š(Viewåœ¨100mså†…å‘å³ç§»åŠ¨100åƒç´ )<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator.ofFloat(targetView,<span class="string">"translationX"</span><span class="number">0</span>,<span class="number">100</span>).setDuration(<span class="number">100</span>).start();</div></pre></td></tr></table></figure></p>
<h4 id="æ”¹å˜å¸ƒå±€å±æ€§"><a href="#æ”¹å˜å¸ƒå±€å±æ€§" class="headerlink" title="æ”¹å˜å¸ƒå±€å±æ€§"></a>æ”¹å˜å¸ƒå±€å±æ€§</h4><p>é€šè¿‡æ”¹å˜å¸ƒå±€å±æ€§æ¥ç§»åŠ¨Viewï¼Œå³æ”¹å˜LayoutParamsã€‚</p>
<h4 id="å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”"><a href="#å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”" class="headerlink" title="å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”"></a>å„ç§æ»‘åŠ¨æ–¹å¼çš„å¯¹æ¯”</h4><p>1.scrollTo/scrollByï¼šæ“ä½œç®€å•ï¼Œé€‚åˆå¯¹Viewå†…å®¹çš„æ»‘åŠ¨ï¼›<br>2.åŠ¨ç”»ï¼šæ“ä½œç®€å•ï¼Œä¸»è¦é€‚ç”¨äºæ²¡æœ‰äº¤äº’çš„Viewå’Œå®ç°å¤æ‚çš„åŠ¨ç”»æ•ˆæœï¼›<br>3.æ”¹å˜å¸ƒå±€å‚æ•°ï¼šæ“ä½œç¨å¾®å¤æ‚ï¼Œé€‚ç”¨äºæœ‰äº¤äº’çš„Viewã€‚</p>
<h3 id="å¼¹æ€§æ»‘åŠ¨"><a href="#å¼¹æ€§æ»‘åŠ¨" class="headerlink" title="å¼¹æ€§æ»‘åŠ¨"></a>å¼¹æ€§æ»‘åŠ¨</h3><h4 id="ä½¿ç”¨Scroller"><a href="#ä½¿ç”¨Scroller" class="headerlink" title="ä½¿ç”¨Scroller"></a>ä½¿ç”¨Scroller</h4><p>ä½¿ç”¨Scrollerå®ç°å¼¹æ€§æ»‘åŠ¨çš„å…¸å‹ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Scroller scroller = <span class="keyword">new</span> Scroller(mContext);</div><div class="line"><span class="comment">//ç¼“æ…¢ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">smoothScrollTo</span><span class="params">(<span class="keyword">int</span> destX,<span class="keyword">int</span> dextY)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> scrollX = getScrollX();</div><div class="line">	<span class="keyword">int</span> deltaX = destX - scrollX;</div><div class="line">	<span class="comment">//1000mså†…æ»‘å‘destXï¼Œæ•ˆæœå°±æ˜¯ç¼“æ…¢æ»‘åŠ¨</span></div><div class="line">	mScroller.startSscroll(scrollX,<span class="number">0</span>,deltaX,<span class="number">0</span>,<span class="number">1000</span>);</div><div class="line">	invalidate();</div><div class="line">&#125;</div><div class="line"><span class="meta">@override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(mScroller.computeScrollOffset())&#123;</div><div class="line">		scrollTo(mScroller.getCurrX(),mScroller.getCurrY());</div><div class="line">		postInvalidate();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šæ„é€ ä¸€ä¸ªScrollerå¯¹è±¡ï¼Œå¹¶è°ƒç”¨ä»–çš„startScrollæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¹¶æ²¡æœ‰è®©viewå®ç°æ»‘åŠ¨ï¼Œåªæ˜¯æŠŠå‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹startScrollæ–¹æ³•çš„å®ç°å°±çŸ¥é“äº†ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startScroll</span><span class="params">(<span class="keyword">int</span> startX,<span class="keyword">int</span> startY,<span class="keyword">int</span> dx,<span class="keyword">int</span> dy,<span class="keyword">int</span> duration)</span></span>&#123;</div><div class="line">	mMode = SCROLL_MODE;</div><div class="line">	mFinished = <span class="keyword">false</span>;</div><div class="line">	mDuration = duration;</div><div class="line">	mStartTime = AnimationUtils.currentAminationTimeMills();</div><div class="line">	mStartX = startX;</div><div class="line">	mStartY = startY;</div><div class="line">	mFinalX = startX + dx;</div><div class="line">	mFinalY = startY + dy;</div><div class="line">	mDeltaX = dx;</div><div class="line">	mDeltaY = dy;</div><div class="line">	mDurationReciprocal = <span class="number">1.0f</span> / (<span class="keyword">float</span>)mDuration;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çŸ¥é“ï¼ŒstartScrollæ–¹æ³•çš„å‡ ä¸ªå‚æ•°çš„å«ä¹‰ï¼ŒstartXå’ŒstartYè¡¨ç¤ºæ»‘åŠ¨çš„èµ·ç‚¹ï¼Œdxå’Œdyè¡¨ç¤ºçš„æ˜¯æ»‘åŠ¨çš„è·ç¦»ï¼Œè€Œdurationè¡¨ç¤ºçš„æ˜¯æ»‘åŠ¨æ—¶é—´ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„æ»‘åŠ¨æŒ‡çš„æ˜¯Viewå†…å®¹çš„æ»‘åŠ¨ï¼Œåœ¨startScrollæ–¹æ³•è¢«è°ƒç”¨åï¼Œé©¬ä¸Šè°ƒç”¨invalidateæ–¹æ³•ï¼Œè¿™æ˜¯æ»‘åŠ¨çš„å¼€å§‹ï¼Œinvalidateæ–¹æ³•ä¼šå¯¼è‡´Viewçš„é‡ç»˜ï¼Œåœ¨Viewçš„drawæ–¹æ³•ä¸­è°ƒç”¨computeScrollæ–¹æ³•ï¼ŒcomputeScrollåˆä¼šå»å‘Scrollerè·å–å½“å‰çš„scrollXå’ŒscrollYï¼›ç„¶åé€šè¿‡scrollToæ–¹æ³•å®ç°æ»‘åŠ¨ï¼Œæ¥ç€åˆè°ƒç”¨postInvalidateæ–¹æ³•è¿›è¡Œç¬¬äºŒæ¬¡é‡ç»˜ï¼Œä¸€ç›´å¾ªç¯ï¼ŒçŸ¥é“computeScrollOffset()æ–¹æ³•è¿”å›å€¼ä¸ºfalseæ‰ç»“æŸæ•´ä¸ªæ»‘åŠ¨è¿‡ç¨‹ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹çœ‹computeScrollOffsetæ–¹æ³•æ˜¯å¦‚ä½•è·å¾—å½“å‰çš„scrollXå’ŒscrollYçš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">computeScrollOffset</span><span class="params">()</span></span>&#123;</div><div class="line">	...</div><div class="line">	<span class="keyword">int</span> timePassed = (<span class="keyword">int</span>)(AnimationUtils.currentAnimationTimeMills() - mStartTime);</div><div class="line">	<span class="keyword">if</span>(timePassed &lt; mDuration)&#123;</div><div class="line">		<span class="keyword">switch</span>(mMode)&#123;</div><div class="line">			<span class="keyword">case</span> SCROLL_MODE:</div><div class="line">				<span class="keyword">final</span> <span class="keyword">float</span> x = mInterpolator.getInterpolation(timePassed * mDurationReciprocal);</div><div class="line">				mCurrX = mStartX + Math.round(x * mDeltaX);</div><div class="line">				mCurrY = mStartY + Math.round(y * mDeltaY);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		...</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬å°±åŸºæœ¬æ˜ç™½äº†ï¼ŒcomputeScrollå‘Scrollerè·å–å½“å‰çš„scrollXå’ŒscrollYå…¶å®æ˜¯é€šè¿‡è®¡ç®—æ—¶é—´æµé€çš„ç™¾åˆ†æ¯”æ¥è·å¾—çš„ï¼Œæ¯ä¸€æ¬¡é‡ç»˜è·æ»‘åŠ¨èµ·å§‹æ—¶é—´ä¼šæœ‰ä¸€ä¸ªæ—¶é—´é—´è·ï¼Œé€šè¿‡è¿™ä¸ªæ—¶é—´é—´è·Scrollerå°±å¯ä»¥å¾—åˆ°Viewå½“å‰çš„æ»‘åŠ¨ä½ç½®ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡scrollToæ–¹æ³•æ¥å®ŒæˆViewçš„æ»‘åŠ¨äº†ã€‚</p>
<h4 id="é€šè¿‡åŠ¨ç”»"><a href="#é€šè¿‡åŠ¨ç”»" class="headerlink" title="é€šè¿‡åŠ¨ç”»"></a>é€šè¿‡åŠ¨ç”»</h4><p>åŠ¨ç”»æœ¬èº«å°±æ˜¯ä¸€ç§æ¸è¿‘çš„è¿‡ç¨‹ï¼Œå› æ­¤é€šè¿‡åŠ¨ç”»æ¥å®ç°çš„æ»‘åŠ¨æœ¬èº«å°±å…·æœ‰å¼¹æ€§ã€‚å®ç°ä¹Ÿå¾ˆç®€å•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator.ofFloat(targetView,<span class="string">"translationX"</span><span class="number">0</span>,<span class="number">100</span>).setDuration(<span class="number">100</span>).start();</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨åŠ¨ç”»æ¥æ¨¡ä»¿Scrollerå®ç°Viewå¼¹æ€§æ»‘åŠ¨çš„è¿‡ç¨‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> <span class="keyword">int</span> startX = <span class="number">0</span>;</div><div class="line"><span class="keyword">final</span> <span class="keyword">int</span> deltaX = <span class="number">100</span>;</div><div class="line">ValueAnimator animator = ValueAnimator.ofInt(<span class="number">0</span>,<span class="number">1</span>).setDuration(<span class="number">1000</span>);</div><div class="line">animator.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener()&#123;</div><div class="line">	<span class="meta">@override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animator)</span></span>&#123;</div><div class="line">		<span class="keyword">float</span> fraction = animator.getAnimatedFraction();</div><div class="line">		mButton1.scrollTo(startX + (<span class="keyword">int</span>) (deltaX * fraction) , <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">animator.start();</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„åŠ¨ç”»æœ¬è´¨ä¸Šæ˜¯æ²¡æœ‰ä½œç”¨äºä»»ä½•å¯¹è±¡ä¸Šçš„ï¼Œä»–åªæ˜¯åœ¨1000mså†…å®Œæˆäº†æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŠ¨ç”»çš„æ¯ä¸€å¸§åˆ°æ¥æ—¶è·å–åŠ¨ç”»å®Œæˆçš„æ¯”ä¾‹ï¼Œæ ¹æ®æ¯”ä¾‹è®¡ç®—å‡ºViewæ‰€æ»‘åŠ¨çš„è·ç¦»ã€‚</p>
<h4 id="ä½¿ç”¨å»¶æ—¶ç­–ç•¥"><a href="#ä½¿ç”¨å»¶æ—¶ç­–ç•¥" class="headerlink" title="ä½¿ç”¨å»¶æ—¶ç­–ç•¥"></a>ä½¿ç”¨å»¶æ—¶ç­–ç•¥</h4><p>å»¶æ—¶ç­–ç•¥çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å‘é€ä¸€ç³»åˆ—å»¶æ—¶ä¿¡æ¯ä»è€Œè¾¾åˆ°ä¸€ç§æ¸è¿‘å¼çš„æ•ˆæœï¼Œå…·ä½“å¯ä»¥é€šè¿‡Handerå’ŒViewçš„postDelayedæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çº¿ç¨‹çš„sleepæ–¹æ³•ã€‚ä¸‹é¢ä»¥Handlerä¸ºä¾‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MESSAGE_SCROLL_TO = <span class="number">1</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FRAME_COUNT = <span class="number">30</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DELATED_TIME = <span class="number">33</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> mCount = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="meta">@suppressLint</span>(<span class="string">"HandlerLeak"</span>)</div><div class="line"><span class="keyword">private</span> Handler handler = <span class="keyword">new</span> handler()&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span></span>&#123;</div><div class="line">		<span class="keyword">switch</span>(msg.what)&#123;</div><div class="line">			<span class="keyword">case</span> MESSAGE_SCROLL_TO:</div><div class="line">			mCount ++ ;</div><div class="line">			<span class="keyword">if</span> (mCount &lt;= FRAME_COUNT)&#123;</div><div class="line">				<span class="keyword">float</span> fraction = mCount / (<span class="keyword">float</span>) FRAME_COUNT;</div><div class="line">				<span class="keyword">int</span> scrollX = (<span class="keyword">int</span>) (fraction * <span class="number">100</span>);</div><div class="line">				mButton1.scrollTo(scrollX,<span class="number">0</span>);</div><div class="line">				mHandelr.sendEmptyMessageDelayed(MESSAGE_SCROLL_TO , DELAYED_TIME);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">			<span class="keyword">default</span> : <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"><a href="#Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶" class="headerlink" title="Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"></a>Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</h3><h4 id="ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™"><a href="#ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™" class="headerlink" title="ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™"></a>ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™</h4><p>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸‹é¢ä¸€æ®µä¼ªä»£ç ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥ç†è§£åˆ°ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span> <span class="params">(MotionEvent ev)</span></span>&#123;</div><div class="line">	<span class="keyword">boolean</span> consume = <span class="keyword">false</span>;</div><div class="line">	<span class="keyword">if</span> (onInterceptTouchEvnet(ev)&#123;</div><div class="line">		consume = onTouchEvent(ev);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		consume = child.dispatchTouchEnvet(ev);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> consume;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>public boolean dispatchTouchEvent(MotionEvent ev); è¿™ä¸ªæ–¹æ³•ç”¨æ¥è¿›è¡Œäº‹ä»¶çš„åˆ†å‘</li>
<li>public boolean onInterceptTouchEvent(MotionEvent ev); è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ‹¦æˆªäº‹ä»¶</li>
<li>public boolean onTouchEvent(MotionEvent ev); è¿™ä¸ªæ–¹æ³•ç”¨æ¥å¤„ç†ç‚¹å‡»äº‹ä»¶</li>
</ul>
<p>ä¸‹é¢ç†ä¸€ç†ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™ï¼šå¯¹äºä¸€ä¸ªæ ¹ViewGroupï¼Œç‚¹å‡»äº‹ä»¶äº§ç”Ÿåï¼Œé¦–å…ˆä¼šä¼ é€’ç»™ä»–ï¼Œè¿™æ—¶å€™å°±ä¼šè°ƒç”¨ä»–çš„onDispatchTouchEventæ–¹æ³•ï¼Œå¦‚æœViewgroupçš„onInterceptTouchEventæ–¹æ³•è¿”å›trueè¡¨ç¤ºä»–è¦æ‹¦æˆªäº‹ä»¶ï¼Œæ¥ä¸‹æ¥äº‹ä»¶å°±ä¼šäº¤ç»™ViewGroupå¤„ç†ï¼Œè°ƒç”¨ViewGroupçš„onTouchEventæ–¹æ³•ï¼›å¦‚æœViewGroupçš„onInteceptTouchEventæ–¹æ³•è¿”å›å€¼ä¸ºfalseï¼Œè¡¨ç¤ºViewGroupä¸æ‹¦æˆªè¯¥äº‹ä»¶ï¼Œè¿™æ—¶äº‹ä»¶å°±ä¼ é€’ç»™ä»–çš„å­Viewï¼Œæ¥ä¸‹æ¥å­Viewçš„dispatchTouchEventæ–¹æ³•ï¼Œå¦‚æ­¤åå¤ç›´åˆ°äº‹ä»¶è¢«æœ€ç»ˆå¤„ç†ã€‚</p>
<p>å½“ä¸€ä¸ªViewéœ€è¦å¤„ç†äº‹ä»¶æ—¶ï¼Œå¦‚æœå®ƒè®¾ç½®äº†OnTouchListenerï¼Œé‚£ä¹ˆonTouchæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æœonTouchè¿”å›falseï¼Œåˆ™å½“å‰Viewçš„onTouchEventæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›trueåˆ™ä¸ä¼šè¢«è°ƒç”¨ï¼ŒåŒæ—¶ï¼Œåœ¨onTouchEventæ–¹æ³•ä¸­å¦‚æœè®¾ç½®äº†OnClickListenerï¼Œé‚£ä¹ˆä»–çš„onClickæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ç”±æ­¤å¯è§å¤„ç†äº‹ä»¶æ—¶çš„ä¼˜å…ˆçº§å…³ç³»ï¼š<br>onTouchListener &gt; onTouchEvent &gt; onClickListener</p>
<p>å…³äºäº‹ä»¶ä¼ é€’çš„æœºåˆ¶ï¼Œè¿™é‡Œç»™å‡ºä¸€äº›ç»“è®ºï¼š</p>
<ol>
<li>ä¸€ä¸ªäº‹ä»¶ç³»åˆ—ä»¥downäº‹ä»¶å¼€å§‹ï¼Œä¸­é—´åŒ…å«æ•°é‡ä¸å®šçš„moveäº‹ä»¶ï¼Œæœ€ç»ˆä»¥upäº‹ä»¶ç»“æŸã€‚</li>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½ç”±ä¸€ä¸ªViewæ‹¦æˆªå¹¶æ¶ˆè€—ã€‚</li>
<li>æŸä¸ªViewæ‹¦æˆªäº†äº‹ä»¶åï¼Œè¯¥äº‹ä»¶åºåˆ—åªèƒ½ç”±å®ƒå»å¤„ç†ï¼Œå¹¶ä¸”å®ƒçš„onInterceptTouchEventä¸ä¼šå†è¢«è°ƒç”¨ã€‚</li>
<li>æŸä¸ªViewä¸€æ—¦å¼€å§‹å¤„ç†äº‹ä»¶ï¼Œå¦‚æœå®ƒä¸æ¶ˆè€—ACTION_DOWNäº‹ä»¶ï¼ˆonTouchEvnetè¿”å›falseï¼‰ï¼Œé‚£ä¹ˆåŒä¸€äº‹ä»¶åºåˆ—ä¸­çš„å…¶ä»–äº‹ä»¶éƒ½ä¸ä¼šäº¤ç»™ä»–å¤„ç†ï¼Œå¹¶ä¸”äº‹ä»¶å°†é‡æ–°äº¤ç”±ä»–çš„çˆ¶å…ƒç´ å»å¤„ç†ï¼Œå³çˆ¶å…ƒç´ çš„onTouchEventè¢«è°ƒç”¨ã€‚</li>
<li>å¦‚æœViewä¸æ¶ˆè€—ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶å°†ä¼šæ¶ˆå¤±ï¼Œæ­¤æ—¶çˆ¶å…ƒç´ çš„onTouchEventå¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å½“å‰Viewå¯ä»¥æŒç»­æ”¶åˆ°åç»­çš„äº‹ä»¶ï¼Œæœ€ç»ˆæ¶ˆå¤±çš„ç‚¹å‡»äº‹ä»¶ä¼šä¼ é€’ç»™Activityå»å¤„ç†ã€‚</li>
<li>ViewGroupé»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ã€‚</li>
<li>Viewæ²¡æœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸€æ—¦äº‹ä»¶ä¼ é€’ç»™å®ƒï¼Œå®ƒçš„onTouchEventæ–¹æ³•ä¼šè¢«Viewçš„äº‹ä»¶ä½“ç³»è°ƒç”¨ã€‚</li>
<li>Viewçš„onTouchEventé»˜è®¤æ¶ˆè€—äº‹ä»¶ï¼Œé™¤éä»–æ˜¯ä¸å¯ç‚¹å‡»çš„ï¼ˆclickableå’ŒlongClickableåŒæ—¶ä¸ºfalseï¼‰ã€‚</li>
<li>Viewçš„enableä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚</li>
<li>onClickä¼šå‘ç”Ÿçš„å‰ææ˜¯å½“å‰Viewæ˜¯å¯ç‚¹å‡»çš„ï¼Œå¹¶ä¸”æ”¶åˆ°äº†downå’Œupäº‹ä»¶ã€‚</li>
<li>äº‹ä»¶ä¼ é€’è¿‡ç¨‹æ€»æ˜¯ç”±å¤–å‘å†…çš„ï¼Œå³äº‹ä»¶æ€»æ˜¯å…ˆä¼ é€’ç»™çˆ¶å…ƒç´ ï¼Œç„¶åç”±çˆ¶å…ƒç´ åˆ†å‘ç»™å­Viewï¼Œé€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚</li>
</ol>
<h3 id="Viewçš„æ»‘åŠ¨å†²çª"><a href="#Viewçš„æ»‘åŠ¨å†²çª" class="headerlink" title="Viewçš„æ»‘åŠ¨å†²çª"></a>Viewçš„æ»‘åŠ¨å†²çª</h3><p>åœ¨ç•Œé¢ä¸­ï¼Œåªè¦å†…å¤–ä¸¤å±‚åŒæ—¶å¯ä»¥æ»‘åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šäº§ç”Ÿæ»‘åŠ¨å†²çªã€‚</p>
<h4 id="å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯"><a href="#å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯" class="headerlink" title="å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯"></a>å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯</h4><ol>
<li>å¤–éƒ¨æ»‘åŠ¨å’Œå†…éƒ¨æ»‘åŠ¨æ–¹å‘ä¸ä¸€è‡´ï¼›</li>
<li>å¤–éƒ¨æ»‘åŠ¨æ–¹å‘å’Œå†…éƒ¨æ»‘åŠ¨æ–¹å‘ä¸€è‡´ï¼›</li>
<li>ä¸Šé¢ä¸¤ç§æƒ…å†µçš„åµŒå¥—ã€‚</li>
</ol>
<h4 id="æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™"><a href="#æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™" class="headerlink" title="æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™"></a>æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™</h4><ol>
<li>å¯¹äºåœºæ™¯ä¸€ï¼Œå¤„ç†çš„è§„åˆ™æ˜¯ï¼šå½“ç”¨æˆ·å·¦å³ï¼ˆä¸Šä¸‹ï¼‰æ»‘åŠ¨æ—¶ï¼Œéœ€è¦è®©å¤–éƒ¨çš„Viewæ‹¦æˆªç‚¹å‡»äº‹ä»¶ï¼Œå½“ç”¨æˆ·ä¸Šä¸‹ï¼ˆå·¦å³ï¼‰æ»‘åŠ¨çš„æ—¶å€™ï¼Œéœ€è¦è®©å†…éƒ¨çš„Viewæ‹¦æˆªç‚¹å‡»äº‹ä»¶ã€‚æ ¹æ®æ»‘åŠ¨çš„æ–¹å‘åˆ¤æ–­è°æ¥æ‹¦æˆªäº‹ä»¶ã€‚</li>
<li>å¯¹äºåœºæ™¯äºŒï¼Œç”±äºæ»‘åŠ¨æ–¹å‘ä¸€è‡´ï¼Œè¿™æ—¶å€™åªèƒ½åœ¨ä¸šåŠ¡ä¸Šæ‰¾åˆ°çªç ´ç‚¹ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œè§„å®šä»€ä¹ˆæ—¶å€™è®©å¤–éƒ¨Viewæ‹¦æˆªäº‹ä»¶ï¼Œä»€ä¹ˆæ—¶å€™ç”±å†…éƒ¨Viewæ‹¦æˆªäº‹ä»¶ã€‚</li>
<li>åœºæ™¯ä¸‰çš„æƒ…å†µç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼ŒåŒæ ·æ ¹æ®éœ€æ±‚åœ¨ä¸šåŠ¡ä¸Šæ‰¾åˆ°çªç ´ç‚¹ã€‚</li>
</ol>
<h4 id="æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼"><a href="#æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼" class="headerlink" title="æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼"></a>æ»‘åŠ¨å†²çªçš„è§£å†³æ–¹å¼</h4><ol>
<li>å¤–éƒ¨æ‹¦æˆªæ³•ï¼šæ‰€è°“çš„å¤–éƒ¨æ‹¦æˆªæ³•æ˜¯æŒ‡ç‚¹å‡»äº‹ä»¶éƒ½å…ˆç»è¿‡çˆ¶å®¹å™¨çš„æ‹¦æˆªå¤„ç†ï¼Œå¦‚æœçˆ¶å®¹å™¨éœ€è¦æ­¤äº‹ä»¶å°±æ‹¦æˆªï¼Œå¦åˆ™å°±ä¸æ‹¦æˆªã€‚ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span> <span class="params">(MotionEvent event)</span></span>&#123;</div><div class="line">	<span class="keyword">boolean</span> intercepted = <span class="keyword">false</span>;</div><div class="line">	<span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</div><div class="line">	<span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</div><div class="line">	<span class="keyword">switch</span> (event.getAction()) &#123;</div><div class="line">		<span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">			intercepted = <span class="keyword">false</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">			<span class="keyword">if</span> (çˆ¶å®¹å™¨éœ€è¦å½“å‰äº‹ä»¶ï¼‰ &#123;</div><div class="line">				intercepted = <span class="keyword">true</span>;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				intercepted = flase;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">			intercepted = <span class="keyword">false</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">default</span> : <span class="keyword">break</span>;</div><div class="line">&#125;</div><div class="line">mLastXIntercept = x;</div><div class="line">mLastYIntercept = y;</div><div class="line"><span class="keyword">return</span> intercepted;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>å†…éƒ¨æ‹¦æˆªæ³•ï¼šå†…éƒ¨æ‹¦æˆªæ³•æ˜¯æŒ‡çˆ¶å®¹å™¨ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½ä¼ é€’ç»™å­å…ƒç´ ï¼Œå¦‚æœå­å…ƒç´ éœ€è¦æ­¤äº‹ä»¶å°±ç›´æ¥æ¶ˆè€—ï¼Œå¦åˆ™å°±äº¤ç”±çˆ¶å®¹å™¨è¿›è¡Œå¤„ç†ã€‚è¿™ç§æ–¹æ³•ä¸Androidäº‹ä»¶åˆ†å‘æœºåˆ¶ä¸ä¸€è‡´ï¼Œéœ€è¦é…åˆrequestDisallowInterceptTouchEventæ–¹æ³•æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span> <span class="params">( MotionEvent event )</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</div><div class="line">		<span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</div><div class="line">		<span class="keyword">switch</span> (event.getAction) &#123;</div><div class="line">			<span class="keyword">case</span> MotionEvent.ACTION_DOWN:</div><div class="line">				parent.requestDisallowInterceptTouchEvent(<span class="keyword">true</span>);</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			<span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">				<span class="keyword">int</span> deltaX = x - mLastX;</div><div class="line">				<span class="keyword">int</span> deltaY = y - mLastY;</div><div class="line">				<span class="keyword">if</span> (çˆ¶å®¹å™¨éœ€è¦æ­¤ç±»ç‚¹å‡»äº‹ä»¶) &#123;</div><div class="line">					parent.requestDisallowInterceptTouchEvent(<span class="keyword">false</span>);</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			<span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			<span class="keyword">default</span> : <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	mLastX = x;</div><div class="line">	mLastY = y;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(event);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>é™¤äº†å­å…ƒç´ éœ€è¦åšå¤„ç†å¤–ï¼Œçˆ¶å…ƒç´ ä¹Ÿè¦é»˜è®¤æ‹¦æˆªé™¤äº†ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ï¼Œè¿™æ ·å½“å­å…ƒç´ è°ƒç”¨parent.requestDisallowInterceptTouchEvent(false)æ–¹æ³•æ—¶ï¼Œçˆ¶å…ƒç´ æ‰èƒ½ç»§ç»­æ‹¦æˆªæ‰€éœ€çš„äº‹ä»¶ã€‚å› æ­¤ï¼Œçˆ¶å…ƒç´ è¦åšä»¥ä¸‹ä¿®æ”¹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span> <span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> action = event.getAction();</div><div class="line">	<span class="keyword">if</span>(action == MotionEvent.ACTION_DOWN) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è‡³äºå…·ä½“çš„å®ç°å¯ä»¥æ ¹æ®å®é™…éœ€è¦å»ä¿®æ”¹æ‹¦æˆªæˆç«‹çš„æ¡ä»¶ï¼Œå¼€å‘è‰ºæœ¯è‰ºæœ¯ä¸­ä¹Ÿç»™å‡ºäº†å®<br>ä¾‹ï¼Œå…·ä½“å¯å‚è€ƒä¹¦ä¸­P161-P173ã€‚</p>
<hr>
<h2 id="ç†è§£RemoteViews"><a href="#ç†è§£RemoteViews" class="headerlink" title="ç†è§£RemoteViews"></a>ç†è§£RemoteViews</h2><p>RemoteViewsæä¾›äº†ä¸€ç»„åŸºç¡€çš„æ“ä½œï¼Œç”¨äºè·¨è¿›ç¨‹æ›´æ–°å®ƒçš„ç•Œé¢ã€‚RemoteViewsåœ¨Andriodä¸­çš„ä½¿ç”¨åœºæ™¯æœ‰ä¸¤ç§ï¼šé€šçŸ¥æ å’Œæ¡Œé¢å°éƒ¨ä»¶(éƒ½è¿è¡Œåœ¨SystemServerè¿›ç¨‹)ã€‚</p>
<h3 id="RemoteViewsçš„åº”ç”¨"><a href="#RemoteViewsçš„åº”ç”¨" class="headerlink" title="RemoteViewsçš„åº”ç”¨"></a>RemoteViewsçš„åº”ç”¨</h3><p>é€šçŸ¥æ ä¸»è¦é€šè¿‡NotificationManagerçš„notifyæ–¹æ³•æ¥å®ç°ï¼Œé™¤äº†é»˜è®¤æ•ˆæœå¤–è¿˜å¯ä»¥è‡ªå®šä¹‰å¸ƒå±€ã€‚<br>æ¡Œé¢å°å·¥å…·ä¸»è¦é€šè¿‡AppWidgetProvideræ¥å®ç°ï¼ŒAppWidgetProvideræœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¹¿æ’­ã€‚<br>ä¸¤è€…éƒ½ä¼šç”¨åˆ°RemoteViewsï¼Œä¸¤è€…éƒ½è¿è¡Œåœ¨å…¶ä»–è¿›ç¨‹ä¸­ï¼Œå‡†ç¡®çš„è¯´æ˜¯ç³»ç»Ÿçš„SystemServerè¿›ç¨‹ã€‚</p>
<h4 id="RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨"><a href="#RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨" class="headerlink" title="RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨"></a>RemoteViewsåœ¨é€šçŸ¥æ ä¸Šçš„åº”ç”¨</h4><p>å…³äºPendingIntentï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ç§ç‰¹å®šçš„Intentï¼Œè¿™ä¸ªIntentä¸­æ‰€åŒ…å«çš„æ„å›¾å¿…é¡»ç”±ç”¨æˆ·æ¥è§¦å‘ã€‚</p>
<h4 id="RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨"><a href="#RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨" class="headerlink" title="RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨"></a>RemoteViewsåœ¨æ¡Œé¢å°éƒ¨ä»¶ä¸Šçš„åº”ç”¨</h4><p>AppWidgetProviderå®ç°æ¡Œé¢å°å·¥å…·çš„ç±»ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå¹¿æ’­å³BroadcastReceiverã€‚<br>å…·ä½“ä½¿ç”¨çœ‹ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ¡Œé¢å°å·¥å…·ã€‚<br>æ¡Œé¢å°éƒ¨ä»¶ä¸Šä¸ç®¡æ˜¯åˆå§‹åŒ–ç•Œé¢è¿˜æ˜¯åç»­çš„æ›´æ–°ç•Œé¢éƒ½å¿…é¡»ä½¿ç”¨RemoteViewsæ¥å®Œæˆã€‚</p>
<h4 id="PendingIntentæ¦‚è¿°"><a href="#PendingIntentæ¦‚è¿°" class="headerlink" title="PendingIntentæ¦‚è¿°"></a>PendingIntentæ¦‚è¿°</h4><p>PendingIntentå’ŒIntentçš„åŒºåˆ«åœ¨äºï¼ŒPendingIntentæ˜¯åœ¨å°†æ¥çš„æŸä¸ªç¯èŠ‚çš„ä¸ç¡®å®šçš„æ—¶åˆ»å‘ç”Ÿï¼Œè€ŒIntentæ˜¯ç«‹åˆ»å‘ç”Ÿã€‚</p>
<h3 id="RemoteViewsçš„å†…éƒ¨æœºåˆ¶"><a href="#RemoteViewsçš„å†…éƒ¨æœºåˆ¶" class="headerlink" title="RemoteViewsçš„å†…éƒ¨æœºåˆ¶"></a>RemoteViewsçš„å†…éƒ¨æœºåˆ¶</h3><ul>
<li>å¤§éƒ¨åˆ†çš„setæ–¹æ³•çš„ç¡®æ˜¯é€šè¿‡å‘å°„æ¥å®Œæˆçš„ã€‚</li>
<li>NotificationManagerå’ŒAppWidgetProvideré€šè¿‡Binderåˆ†åˆ«å’ŒSystemServerè¿›ç¨‹ä¸­çš„NotificationManagerServiceä»¥åŠAppWidgetServerè¿›è¡Œé€šä¿¡ã€‚</li>
<li>RemoteViewsä¼šé€šè¿‡Binderä¼ é€’åˆ°SystemServerè¿›ç¨‹ä¸­ï¼Œè¿™æ˜¯å› ä¸ºRemoteViewså®ç°äº†Parcelableæ¥å£ï¼Œå› æ­¤å®ƒå¯ä»¥è·¨è¿›ç¨‹ä¼ è¾“ï¼Œç³»ç»Ÿä¼šæ ¹æ®RemoteViewsä¸­çš„åŒ…åç­‰ä¿¡æ¯å»å¾—åˆ°è¯¥åº”ç”¨çš„èµ„æºã€‚</li>
</ul>
<h3 id="RemoteViewsçš„æ„ä¹‰"><a href="#RemoteViewsçš„æ„ä¹‰" class="headerlink" title="RemoteViewsçš„æ„ä¹‰"></a>RemoteViewsçš„æ„ä¹‰</h3><p>æ¨¡æ‹Ÿé€šçŸ¥æ æ•ˆæœå®ç°è·¨è¿›ç¨‹è·¨è¿›ç¨‹çš„UIæ›´æ–°ã€‚<br>æˆ‘ä»¬å¯ä»¥åƒç³»ç»Ÿä¸€æ ·ä½¿ç”¨Binderæ¥å®ç°ï¼Œä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§å°±é‡‡ç”¨å¹¿æ’­ã€‚<br>å®é™…ï¼š</p>
<ul>
<li>ç°åœ¨ç”¨ä¸¤ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªåº”ç”¨éœ€è¦èƒ½å¤Ÿæ›´æ–°å¦ä¸€ä¸ªåº”ç”¨çš„æŸä¸ªç•Œé¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å½“ç„¶å¯ä»¥é€‰æ‹©AIDLå»å®ç°ï¼ˆ<strong>è·¨åº”ç”¨æ›´æ–°UI</strong>ï¼‰ï¼Œä½†æ˜¯å¦‚æœå¯¹ç•Œé¢çš„æ›´æ–°æ¯”è¾ƒé¢‘ç¹ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰æ•ˆç‡çš„é—®é¢˜ï¼Œå¦‚æœé‡‡ç”¨RemoteViewsæ¥å®ç°å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ã€‚ï¼ˆRemoteViewsåªæ”¯æŒä¸€äº›å¸¸ç”¨çš„View,å¯¹äºè‡ªå®šä¹‰çš„Viewæ˜¯ä¸æ”¯æŒçš„ã€‚ï¼‰</li>
</ul>
<hr>
<h2 id="AndroidåŠ¨ç”»æ·±å…¥åˆ†æ"><a href="#AndroidåŠ¨ç”»æ·±å…¥åˆ†æ" class="headerlink" title="AndroidåŠ¨ç”»æ·±å…¥åˆ†æ"></a>AndroidåŠ¨ç”»æ·±å…¥åˆ†æ</h2><p>AndroidåŠ¨ç”»åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>1.ViewåŠ¨ç”»ï¼ˆå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€é€æ˜åº¦ï¼‰</li>
<li>2.å¸§åŠ¨ç”»ï¼ˆå›¾ç‰‡åˆ‡æ¢åŠ¨ç”»ï¼‰</li>
<li>3.å±æ€§åŠ¨ç”»ï¼ˆåŠ¨æ€çš„æ”¹å˜å¯¹è±¡çš„å±æ€§ä»è€Œè¾¾åˆ°åŠ¨ç”»çš„æ•ˆæœï¼‰</li>
</ul>
<h3 id="ViewåŠ¨ç”»"><a href="#ViewåŠ¨ç”»" class="headerlink" title="ViewåŠ¨ç”»"></a>ViewåŠ¨ç”»</h3><p>ViewåŠ¨ç”»çš„ä½œç”¨å¯¹è±¡æ˜¯Viewï¼Œæ”¯æŒå››ç§åŠ¨ç”»æ•ˆæœï¼š</p>
<ul>
<li>1.å¹³ç§»</li>
<li>2.ç¼©æ”¾</li>
<li>3.æ—‹è½¬</li>
<li>4.é€æ˜</li>
</ul>
<h4 id="ViewåŠ¨ç”»çš„ç§ç±»"><a href="#ViewåŠ¨ç”»çš„ç§ç±»" class="headerlink" title="ViewåŠ¨ç”»çš„ç§ç±»"></a>ViewåŠ¨ç”»çš„ç§ç±»</h4><p>ä¸Šè¿°å››ç§å˜æ¢æ•ˆæœå¯¹åº”ç€Animationå››ä¸ªå­ç±»ï¼š TranslateAnimation ã€ ScaleAnimation ã€ RotateAnimation å’Œ AlphaAnimation ã€‚è¿™å››ç§åŠ¨ç”»çš†å¯ä»¥é€šè¿‡XMLå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»£ç æ¥åŠ¨æ€åˆ›å»ºã€‚</p>
<p><strong>xmlå®šä¹‰åŠ¨ç”»:</strong></p>
<ul>
<li><p>1.<set> æ ‡ç­¾è¡¨ç¤ºåŠ¨ç”»é›†åˆï¼Œå¯¹åº”AnimationSetç±»ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªåŠ¨ç”»ï¼Œå†…éƒ¨è¿˜å¯ä»¥åµŒå¥—å…¶ä»–åŠ¨ç”»é›†åˆã€‚ä¸¤ä¸ªå±æ€§ï¼š</set></p>
<ul>
<li>i. android:interpolator è¡¨ç¤ºåŠ¨ç”»é›†åˆæ‰€é‡‡ç”¨çš„æ’å€¼å™¨ï¼Œæ’å€¼å™¨å½±å“åŠ¨ç”»é€Ÿåº¦ï¼Œæ¯”å¦‚éåŒ€é€ŸåŠ¨ç”»å°±éœ€è¦é€šè¿‡æ’å€¼å™¨æ¥æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾è¿‡ç¨‹ã€‚</li>
<li>ii. android:shareInterpolator è¡¨ç¤ºé›†åˆä¸­çš„åŠ¨ç”»æ˜¯å¦å’Œé›†åˆå…±äº«åŒä¸€ä¸ªæ’å€¼å™¨ï¼Œå¦‚æœé›†åˆä¸æŒ‡å®šæ’å€¼å™¨ï¼Œé‚£ä¹ˆå­åŠ¨ç”»å°±éœ€è¦å•ç‹¬æŒ‡å®šæ‰€éœ€çš„æ’å€¼å™¨æˆ–é»˜è®¤å€¼ã€‚</li>
</ul>
</li>
<li><p>2.<code>&lt;translate&gt;</code>ã€<code>&lt;scale&gt;</code>ã€<code>&lt;rotate&gt;</code>ã€<code>&lt;alpha&gt;</code>è¿™å‡ ä¸ªå­æ ‡ç­¾åˆ†åˆ«ä»£è¡¨å››ç§å˜æ¢æ•ˆæœã€‚</p>
</li>
<li><p>3.å®šä¹‰å®ŒViewåŠ¨ç”»çš„xmlåï¼Œé€šè¿‡ä»¥ä¸‹ä»£ç åº”ç”¨åŠ¨ç”»ï¼š</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Aniamation anim = AnimationUtils.loadAnimation(context,R.anim.animation_test);</div><div class="line">view.startAnimation(anim);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>ä»£ç åŠ¨æ€åˆ›å»ºåŠ¨ç”»ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">AlphaAnimation alphaAnimation = <span class="keyword">new</span> AlphaAnimation(<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">alphaAnimation.setDuration(<span class="number">1500</span>);</div><div class="line">view.startAnimation(alphaAnimation);</div></pre></td></tr></table></figure>
<h4 id="è‡ªå®šä¹‰ViewåŠ¨ç”»"><a href="#è‡ªå®šä¹‰ViewåŠ¨ç”»" class="headerlink" title="è‡ªå®šä¹‰ViewåŠ¨ç”»"></a>è‡ªå®šä¹‰ViewåŠ¨ç”»</h4><p>éœ€è¦ç»§æ‰¿ Animation è¿™ä¸ªæŠ½è±¡ç±»ï¼Œé‡å†™å®ƒçš„ initialize å’Œ applyTransformation æ–¹æ³•ã€‚åœ¨ initialize æ–¹æ³•ä¸­åšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œåœ¨ applyTransformation ä¸­è¿›è¡Œç›¸åº”çš„çŸ©é˜µå˜æ¢å³å¯ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦é‡‡ç”¨ Camera æ¥ç®€åŒ–çŸ©é˜µå˜æ¢çš„è¿‡ç¨‹ã€‚è‡ªå®šä¹‰ViewåŠ¨ç”»çš„è¿‡ç¨‹ä¸»è¦æ˜¯çŸ©é˜µå˜æ¢çš„è¿‡ç¨‹ã€‚</p>
<h4 id="å¸§åŠ¨ç”»"><a href="#å¸§åŠ¨ç”»" class="headerlink" title="å¸§åŠ¨ç”»"></a>å¸§åŠ¨ç”»</h4><p>å¸§åŠ¨ç”»æ˜¯é¡ºåºæ’­æ”¾ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„å›¾ç‰‡ï¼Œä½¿ç”¨ç®€å•ï¼Œä½†å®¹æ˜“å¼•èµ·OOMï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å¸§åŠ¨ç”»æ—¶åº”å°½é‡é¿å…ä½¿ç”¨è¿‡å¤šå°ºå¯¸è¾ƒå¤§çš„å›¾ç‰‡ã€‚</p>
<h3 id="ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯"><a href="#ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯" class="headerlink" title="ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯"></a>ViewåŠ¨ç”»çš„ç‰¹æ®Šä½¿ç”¨åœºæ™¯</h3><h4 id="LayoutAnimation"><a href="#LayoutAnimation" class="headerlink" title="LayoutAnimation"></a>LayoutAnimation</h4><p>ä½œç”¨äºViewGroupï¼Œä¸ºViewGroupæŒ‡å®šä¸€ä¸ªåŠ¨ç”»ï¼Œå½“å®ƒçš„å­å…ƒç´ å‡ºåœºæ—¶éƒ½ä¼šå…·æœ‰è¿™ç§åŠ¨ç”»æ•ˆæœï¼Œä¸€èˆ¬ç”¨åœ¨ListViewä¸Šã€‚</p>
<h4 id="Activityçš„åˆ‡æ¢æ•ˆæœ"><a href="#Activityçš„åˆ‡æ¢æ•ˆæœ" class="headerlink" title="Activityçš„åˆ‡æ¢æ•ˆæœ"></a>Activityçš„åˆ‡æ¢æ•ˆæœ</h4><p>æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰Activityçš„åˆ‡æ¢æ•ˆæœï¼Œä¸»è¦é€šè¿‡åœ¨ startActivity æˆ–è€… finish çš„åé¢å¢åŠ <code>overridePendingTransition(int enterAnim , int exitAnim)</code>æ–¹æ³•</p>
<h3 id="å±æ€§åŠ¨ç”»"><a href="#å±æ€§åŠ¨ç”»" class="headerlink" title="å±æ€§åŠ¨ç”»"></a>å±æ€§åŠ¨ç”»</h3><p>API 11ååŠ å…¥ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ—¶é—´é—´éš”å†…å®Œæˆå¯¹è±¡ä»ä¸€ä¸ªå±æ€§å€¼åˆ°å¦ä¸€ä¸ªå±æ€§å€¼çš„æ”¹å˜ã€‚å› æ­¤ä¸<br>ViewåŠ¨ç”»ç›¸æ¯”ï¼Œå±æ€§åŠ¨ç”»å‡ ä¹æ— æ‰€ä¸èƒ½ï¼Œåªè¦å¯¹è±¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå®ƒéƒ½èƒ½å®ç°åŠ¨ç”»æ•ˆæœã€‚API11<br>ä»¥ä¸‹å¯ä»¥é€šè¿‡ nineoldandroids åº“æ¥å…¼å®¹ä»¥å‰ç‰ˆæœ¬ã€‚</p>
<h4 id="å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š"></a><strong>å±æ€§åŠ¨ç”»æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨æ–¹æ³•ï¼š</strong></h4><ul>
<li>ObjectAnimator:<ul>
<li><code>ObjectAnimator.ofFloat(view,&quot;translationY&quot;,values).start();</code></li>
</ul>
</li>
<li><p>ValueAnimator</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ValueAnimator colorAnim = ObjectAnimator.ofInt(view,<span class="string">"backgroundColor"</span>,<span class="comment">/*red*/</span><span class="number">0xffff8080</span>,<span class="comment">/*blue*/</span><span class="number">0xff8080ff</span>);</div><div class="line">colorAnim.setDuration(<span class="number">2000</span>);</div><div class="line">colorAnim.setEvaluator(<span class="keyword">new</span> ArgbEvaluator());</div><div class="line">colorAnim.setRepeatCount(ValueAnimator.INFINITE);</div><div class="line">colorAnim.setRepeatMode(ValueAnimator.REVERSE);</div><div class="line">colorAnim.start();</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>AnimatorSet</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">AnimatorSet set = <span class="keyword">new</span> AnimatorSet();</div><div class="line">set.playTogether(animator1,animator2,animator3);</div><div class="line">set.setDuration(<span class="number">3</span>*<span class="number">1000</span>).start();</div></pre></td></tr></table></figure>
</li>
<li><p>ä¹Ÿå¯ä»¥é€šè¿‡åœ¨xmlä¸­å®šä¹‰åœ¨ res/animator/ ç›®å½•ä¸‹ã€‚å…·ä½“å¦‚ä¸‹:</p>
<ul>
<li><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">&lt;set xmlns:android="http://schemas.android.com/apk/res/android"&gt;</div><div class="line">&lt;objectAnimator</div><div class="line">....../&gt;</div><div class="line">&lt;animator</div><div class="line">....../&gt;</div><div class="line">&lt;/set&gt;</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">AnimatorSet set = (AnimatorSet)AnimatorInflater.loadAnimator(context , R.animator.anim);</div><div class="line">set.setTarget(view);</div><div class="line">set.start();</div><div class="line">&lt;set&gt; æ ‡ç­¾å¯¹åº” AnimatorSet,&lt;animator&gt;å¯¹åº”ValueAnimator,</div><div class="line">è€Œ&lt;objectAnimator&gt;åˆ™å¯¹åº” ObjectAnimatorã€‚</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨"><a href="#ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨" class="headerlink" title="ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨"></a>ç†è§£å·®å€¼å™¨å’Œä¼°å€¼å™¨</h4><ul>
<li><p>æ—¶é—´æ’å€¼å™¨ï¼ˆ TimeInterpolatorï¼‰ çš„ä½œç”¨æ˜¯æ ¹æ®æ—¶é—´æµé€çš„ç™¾åˆ†æ¯”æ¥è®¡ç®—å‡ºå½“å‰å±æ€§å€¼æ”¹å˜çš„ç™¾åˆ†æ¯”ï¼Œç³»ç»Ÿé¢„ç½®çš„æœ‰LinearInterpolatorï¼ˆ<strong>çº¿æ€§æ’å€¼å™¨ï¼šåŒ€é€ŸåŠ¨ç”»</strong>),AccelerateDecelerateInterpolatorï¼ˆ<strong>åŠ é€Ÿå‡é€Ÿæ’å€¼å™¨ï¼šåŠ¨ç”»ä¸¤å¤´æ…¢ä¸­é—´å¿«</strong>ï¼‰,DecelerateInterpolator(<strong>å‡é€Ÿæ’å€¼å™¨ï¼šåŠ¨ç”»è¶Šæ¥è¶Šæ…¢</strong>ï¼‰ã€‚</p>
</li>
<li><p>ä¼°å€¼å™¨ï¼ˆ TypeEvaluatorï¼‰ çš„ä½œç”¨æ˜¯æ ¹æ®å½“å‰å±æ€§æ”¹å˜çš„ç™¾åˆ†æ¯”æ¥è®¡ç®—æ”¹å˜åçš„å±æ€§å€¼ã€‚<br>ç³»ç»Ÿé¢„ç½®æœ‰IntEvaluator ã€FloatEvaluator ã€ArgbEvaluatorã€‚</p>
</li>
<li><p>å…·ä½“æ¥è¯´ å¯¹äºä¸€ä¸ªä½œç”¨åœ¨viewä¸Šæ”¹å˜å…¶å®½åº¦å±æ€§ã€æŒç»­40msçš„å±æ€§åŠ¨ç”»æ¥è¯´ï¼Œå°±æ˜¯å½“æ—¶é—´t=20msæ—¶ï¼Œæ—¶é—´æµé€äº†50%ï¼Œé‚£ä¹ˆviewçš„å®½åº¦å±æ€§åº”è¯¥æ”¹å˜äº†å¤šå°‘å‘¢ï¼Ÿè¿™ä¸ªå°±ç”±Interpolatorå’ŒEvaluatorçš„ç®—æ³•æ¥å†³å®šã€‚</p>
</li>
</ul>
<h4 id="å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨"><a href="#å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨" class="headerlink" title="å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨"></a>å±æ€§åŠ¨ç”»çš„ç›‘å¬å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">interface</span> <span class="title">AnimatorListener</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onAnimationStart</span><span class="params">(Animator animation)</span></span>; <span class="comment">//åŠ¨ç”»å¼€å§‹</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">(Animator animation)</span></span>; <span class="comment">//åŠ¨ç”»ç»“æŸ</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onAnimationCancel</span><span class="params">(Animator animation)</span></span>; <span class="comment">//åŠ¨ç”»å–æ¶ˆ</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onAnimationRepeat</span><span class="params">(Animator animation)</span></span>; <span class="comment">//åŠ¨ç”»é‡å¤æ’­æ”¾</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œç³»ç»Ÿæä¾›äº†AnimatorListenerAdapterç±»ï¼Œå®ƒæ˜¯AnimatorListenerçš„é€‚é…å™¨ç±»ï¼Œå¯ä»¥æœ‰é€‰æ‹©çš„å®ç°ä»¥ä¸Š4ä¸ªæ–¹æ³•ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* Implementors of this interface can add themselves as update listeners</div><div class="line">* to an &lt;code&gt;ValueAnimator&lt;/code&gt; instance to receive callbacks on every animation</div><div class="line">* frame, after the current frame's values have been calculated for that</div><div class="line">* &lt;code&gt;ValueAnimator&lt;/code&gt;.</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">interface</span> <span class="title">AnimatorUpdateListener</span> </span>&#123;</div><div class="line">	<span class="comment">/**</span></div><div class="line">	* &lt;p&gt;Notifies the occurrence of another frame of the animation.&lt;/p&gt;</div><div class="line">	* *</div><div class="line">	<span class="doctag">@param</span> animation The animation which was repeated.</div><div class="line">	*/</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>AnimatorUpdateListenerä¼šç›‘å¬æ•´ä¸ªåŠ¨ç”»çš„è¿‡ç¨‹ï¼ŒåŠ¨ç”»ç”±è®¸å¤šå¸§ç»„æˆçš„ï¼Œæ¯æ’­æ”¾ä¸€å¸§ï¼ŒonAnimationUpdateå°±ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚</p>
<h4 id="å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»"><a href="#å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»" class="headerlink" title="å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»"></a>å¯¹ä»»æ„å±æ€§åšåŠ¨ç”»</h4><ul>
<li><p>1.å±æ€§åŠ¨ç”»è¦æ±‚ä½œç”¨çš„å¯¹è±¡æä¾›è¯¥å±æ€§çš„getå’Œsetæ–¹æ³•ï¼Œå±æ€§åŠ¨ç”»æ ¹æ®å¤–ç•Œä¼ é€’çš„è¯¥å±æ€§çš„åˆå§‹å€¼å’Œæœ€ç»ˆå€¼ï¼Œé€šè¿‡å¤šæ¬¡è°ƒç”¨setæ–¹æ³•æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚</p>
</li>
<li><p>2.å¦‚æœè¢«ä½œç”¨çš„å¯¹è±¡æ²¡æœ‰set/getæ–¹æ³•ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>i.è¯·ç»™ä½ çš„å¯¹è±¡åŠ ä¸Šgetå’Œsetæ–¹æ³•ï¼Œå¦‚æœä½ æœ‰æƒé™çš„è¯ï¼ˆ å¯¹äºSDKæˆ–è€…å…¶ä»–ç¬¬ä¸‰æ–¹ç±»åº“<br>çš„ç±»æ— æ³•åŠ ä¸Šçš„ï¼‰ </li>
<li>ii.ç”¨ä¸€ä¸ªç±»æ¥åŒ…è£…åŸå§‹å¯¹è±¡ï¼Œé—´æ¥ä¸ºå…¶æä¾›getå’Œsetæ–¹æ³•</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åŒ…è£…Viewç±» ç”¨äºç»™å±æ€§åŠ¨ç”»è°ƒç”¨ ä»è€ŒåŒ…è£…äº†set get</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewWrapper</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> View target;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ViewWrapper</span><span class="params">(View target)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.target = target;</div><div class="line">	&#125; </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> target.getLayoutParams().width;</div><div class="line">	&#125; </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWidth</span><span class="params">(<span class="keyword">int</span> width)</span> </span>&#123;</div><div class="line">		target.getLayoutParams().width = width;</div><div class="line">		target.requestLayout();</div><div class="line">	&#125;</div><div class="line">&#125; </div><div class="line"><span class="comment">//ä½¿ç”¨ï¼š</span></div><div class="line">ViewWrapper wrapper = <span class="keyword">new</span> ViewWrapper(mButton);</div><div class="line">ObjectAnimator.ofInt(mButton,<span class="string">"width"</span>,<span class="number">500</span>).setDuration(<span class="number">3000</span>).start();</div></pre></td></tr></table></figure>
</li>
<li><p>iii.é‡‡ç”¨ValueAnimatorï¼Œç›‘å¬åŠ¨ç”»è¿‡ç¨‹ï¼Œè‡ªå·±å®ç°å±æ€§çš„æ”¹å˜ï¼›</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">performAnimate</span><span class="params">(<span class="keyword">final</span> View target, <span class="keyword">final</span> <span class="keyword">int</span> start, <span class="keyword">final</span> <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">	ValueAnimator valueAnimator = ValueAnimator.ofInt(<span class="number">1</span>, <span class="number">100</span>);</div><div class="line">	valueAnimator.addUpdateListener(<span class="keyword">new</span> AnimatorUpdateListener() &#123;</div><div class="line">		<span class="comment">// æŒæœ‰ä¸€ä¸ªIntEvaluatorå¯¹è±¡ï¼Œæ–¹ä¾¿ä¸‹é¢ä¼°å€¼çš„æ—¶å€™ä½¿ç”¨</span></div><div class="line">		<span class="keyword">private</span> IntEvaluator mEvaluator = <span class="keyword">new</span> IntEvaluator();</div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animator)</span> </span>&#123;</div><div class="line">			<span class="comment">// è·å¾—å½“å‰åŠ¨ç”»çš„è¿›åº¦å€¼ï¼Œæ•´å‹ï¼Œ1-100ä¹‹é—´</span></div><div class="line">			<span class="keyword">int</span> currentValue = (Integer) animator.getAnimatedValue();</div><div class="line">			Log.d(TAG, <span class="string">"current value: "</span> + currentValue);</div><div class="line">			<span class="comment">// è·å¾—å½“å‰è¿›åº¦å æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹çš„æ¯”ä¾‹ï¼Œæµ®ç‚¹å‹ï¼Œ0-1ä¹‹é—´</span></div><div class="line">			<span class="keyword">float</span> fraction = animator.getAnimatedFraction();</div><div class="line">			<span class="comment">// ç›´æ¥è°ƒç”¨æ•´å‹ä¼°å€¼å™¨é€šè¿‡æ¯”ä¾‹è®¡ç®—å‡ºå®½åº¦ï¼Œç„¶åå†è®¾ç»™Button</span></div><div class="line">			target.getLayoutParams().width = mEvaluator.evaluate(fraction, start, end);</div><div class="line">			target.requestLayout();</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line">	valueAnimator.setDuration(<span class="number">5000</span>).start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†"><a href="#å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†" class="headerlink" title="å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†"></a>å±æ€§åŠ¨ç”»çš„å·¥ä½œåŸç†</h4><p>å±æ€§åŠ¨ç”»éœ€è¦è¿è¡Œåœ¨æœ‰Looperçš„çº¿ç¨‹ä¸­ï¼Œç³»ç»Ÿé€šè¿‡åå°„è°ƒç”¨è¢«ä½œç”¨å¯¹è±¡get/setæ–¹æ³•ã€‚</p>
<h3 id="ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹"><a href="#ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹"></a>ä½¿ç”¨åŠ¨ç”»çš„æ³¨æ„äº‹é¡¹</h3><ul>
<li>1.ä½¿ç”¨å¸§åŠ¨ç”»æ—¶ï¼Œå½“å›¾ç‰‡æ•°é‡è¾ƒå¤šä¸”å›¾ç‰‡åˆ†è¾¨ç‡è¾ƒå¤§çš„æ—¶å€™å®¹æ˜“å‡ºç°OOMï¼Œéœ€æ³¨æ„ï¼Œå°½é‡<br>é¿å…ä½¿ç”¨å¸§åŠ¨ç”»ã€‚</li>
<li>2.ä½¿ç”¨æ— é™å¾ªç¯çš„å±æ€§åŠ¨ç”»æ—¶ï¼Œåœ¨Activityé€€å‡ºæ—¶å³ä½¿åœæ­¢ï¼Œå¦åˆ™å°†å¯¼è‡´Activityæ— æ³•é‡Šæ”¾ä»è€Œé€ æˆå†…å­˜æ³„éœ²ã€‚</li>
<li>3.åŠ¨ç”»åœ¨3.0ä»¥ä¸‹çš„ç³»ç»Ÿå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œç‰¹æ®Šåœºæ™¯å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œéœ€åšå¥½é€‚é…å·¥ä½œã€‚</li>
<li>4.ViewåŠ¨ç”»æ˜¯å¯¹Viewçš„å½±åƒåšåŠ¨ç”»ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æ”¹å˜äº†Viewçš„çŠ¶æ€ï¼Œå› æ­¤æœ‰æ—¶å€™ä¼šå‡ºç°åŠ¨ç”»å®ŒæˆåViewæ— æ³•éšè—ï¼ˆ setVisibility(View.GONEï¼‰ å¤±æ•ˆï¼‰,è¿™æ—¶å€™è°ƒç”¨ view.clearAnimation() æ¸…ç†ViewåŠ¨ç”»å³å¯è§£å†³ã€‚</li>
<li>5.ä¸è¦ä½¿ç”¨pxï¼Œä½¿ç”¨pxä¼šå¯¼è‡´ä¸åŒè®¾å¤‡ä¸Šæœ‰ä¸åŒçš„æ•ˆæœã€‚</li>
<li>6.ViewåŠ¨ç”»æ˜¯å¯¹Viewçš„å½±åƒåšåŠ¨ç”»ï¼ŒViewçš„çœŸå®ä½ç½®æ²¡æœ‰å˜åŠ¨ï¼ŒåŠ¨ç”»å®Œæˆåçš„æ–°ä½ç½®æ˜¯æ— æ³•è§¦å‘ç‚¹å‡»äº‹ä»¶çš„ã€‚å±æ€§åŠ¨ç”»æ˜¯çœŸå®æ”¹å˜äº†Viewçš„å±æ€§ï¼Œæ‰€ä»¥åŠ¨ç”»å®Œæˆåçš„ä½ç½®å¯ä»¥æ¥å—è§¦æ‘¸äº‹ä»¶ã€‚</li>
<li>7.ä½¿ç”¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿå¯ä»¥æé«˜åŠ¨ç”»çš„æµç•…åº¦ã€‚</li>
</ul>
<hr>
<h2 id="Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± "><a href="#Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± " class="headerlink" title="Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± "></a>Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± </h2><ul>
<li>1.åœ¨Androidç³»ç»Ÿï¼Œçº¿ç¨‹ä¸»è¦åˆ†ä¸ºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹å¤„ç†å’Œç•Œé¢ç›¸å…³çš„äº‹æƒ…ï¼Œè€Œå­çº¿ç¨‹ä¸€èˆ¬ç”¨äºæ‰§è¡Œè€—æ—¶æ“ä½œã€‚</li>
<li>2.åœ¨Androidä¸­ï¼Œçº¿ç¨‹çš„å½¢æ€æœ‰å¾ˆå¤šç§ï¼š<ul>
<li>i.AsyncTaskå°è£…äº†çº¿ç¨‹æ± å’ŒHandlerã€‚</li>
<li>ii.HandlerThreadæ˜¯å…·æœ‰æ¶ˆæ¯å¾ªç¯çš„çº¿ç¨‹ï¼Œå†…éƒ¨å¯ä»¥ä½¿ç”¨handler</li>
<li>iii.IntentServiceæ˜¯ä¸€ç§Serviceï¼Œå†…éƒ¨é‡‡ç”¨HandlerThreadæ¥æ‰§è¡Œä»»åŠ¡ï¼Œå½“ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åIntentServiceä¼šè‡ªåŠ¨é€€å‡ºã€‚ç”±äºå®ƒæ˜¯ä¸€ç§Serviceï¼Œæ‰€ä»¥ä¸å®¹æ˜“è¢«ç³»ç»Ÿæ€æ­»</li>
</ul>
</li>
<li>3.æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•å…ƒï¼ŒåŒæ—¶çº¿ç¨‹åˆæ˜¯ä¸€ç§å—é™çš„ç³»ç»Ÿèµ„æºï¼Œå…¶åˆ›å»ºå’Œé”€æ¯éƒ½ä¼šæœ‰ç›¸åº”çš„å¼€é”€ã€‚åŒæ—¶å½“ç³»ç»Ÿå­˜åœ¨å¤§é‡çº¿ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šé€šè¿‡æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼è°ƒåº¦æ¯ä¸ªçº¿ç¨‹ï¼Œå› æ­¤çº¿ç¨‹ä¸å¯èƒ½åšåˆ°ç»å¯¹çš„å¹¶å‘ï¼Œé™¤éçº¿ç¨‹æ•°é‡å°äºç­‰äºCPUçš„æ ¸å¿ƒæ•°ã€‚</li>
<li>4.é¢‘ç¹åˆ›å»ºé”€æ¯çº¿ç¨‹ä¸æ˜æ™ºï¼Œä½¿ç”¨çº¿ç¨‹æ± æ˜¯æ­£ç¡®çš„åšæ³•ã€‚çº¿ç¨‹æ± ä¼šç¼“å­˜ä¸€å®šæ•°é‡çš„çº¿ç¨‹ï¼Œé€šè¿‡çº¿ç¨‹æ± å°±å¯ä»¥é¿å…å› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ‰€å¸¦æ¥çš„ç³»ç»Ÿå¼€é”€ã€‚</li>
</ul>
<h3 id="ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹"><a href="#ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹" class="headerlink" title="ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹"></a>ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹</h3><ul>
<li>1.ä¸»çº¿ç¨‹ä¸»è¦å¤„ç†ç•Œé¢äº¤äº’é€»è¾‘ï¼Œç”±äºç”¨æˆ·éšæ—¶ä¼šå’Œç•Œé¢äº¤äº’ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹åœ¨ä»»ä½•æ—¶å€™éƒ½éœ€è¦æœ‰è¾ƒé«˜å“åº”é€Ÿåº¦ï¼Œåˆ™ä¸èƒ½æ‰§è¡Œè€—æ—¶çš„ä»»åŠ¡ï¼›</li>
<li>2.android3.0å¼€å§‹ï¼Œç½‘ç»œè®¿é—®å°†ä¼šå¤±è´¥å¹¶æŠ›å‡ºNetworkOnMainThreadExceptionè¿™ä¸ªå¼‚å¸¸ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…ä¸»çº¿ç¨‹ç”±äºè¢«è€—æ—¶æ“ä½œæ‰€é˜»å¡ä»è€Œç°ANRç°è±¡ã€‚</li>
</ul>
<h3 id="Androidä¸­çš„çº¿ç¨‹å½¢æ€"><a href="#Androidä¸­çš„çº¿ç¨‹å½¢æ€" class="headerlink" title="Androidä¸­çš„çº¿ç¨‹å½¢æ€"></a>Androidä¸­çš„çº¿ç¨‹å½¢æ€</h3><h4 id="AsyncTask"><a href="#AsyncTask" class="headerlink" title="AsyncTask"></a>AsyncTask</h4><p>1.ä¸‰ä¸ªå‚æ•°ï¼ˆéƒ½å¯ä¸ºVoid)ï¼š</p>
<ul>
<li>i. Paramsï¼šå‚æ•°</li>
<li>ii. Progressï¼šæ‰§è¡Œè¿›åº¦</li>
<li>iii. Resultï¼šè¿”å›å€¼</li>
</ul>
<p>2.å››ä¸ªæ–¹æ³• ï¼š</p>
<ul>
<li>i. onPreExecute() ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¼‚æ­¥æ–¹æ³•æ‰§è¡Œå‰è°ƒç”¨ã€‚</li>
<li>ii. doInBackground(Paramsâ€¦params) çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼›åœ¨æ–¹æ³•å†…éƒ¨ç”¨publishProgress æ¥æ›´æ–°ä»»åŠ¡è¿›åº¦ã€‚</li>
<li>iii. onProgressUpdate(Progressâ€¦value) ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œåå°ä»»åŠ¡è¿›åº¦çŠ¶æ€æ”¹å˜æ—¶è¢«è°ƒç”¨ã€‚</li>
<li>iv. onPostExecute(Result result) ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¹‹åè¢«è°ƒç”¨æ‰§è¡Œé¡ºåºï¼š onPreExecute-&gt;doInBackground-&gt;onPostExecute å¦‚æœå–æ¶ˆäº†å¼‚æ­¥ä»»åŠ¡ï¼Œä¼šå›è°ƒonCancelled()ï¼ŒonPostExecuteåˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>
<p>AsyncTaskçš„ç±»å¿…é¡»åœ¨ä¸»çº¿ç¨‹åŠ è½½ï¼ŒAndroid4.1åŠä»¥ä¸Šå·²ç»è¢«ç³»ç»Ÿè‡ªåŠ¨å®Œæˆäº†ï¼›AsyncTaskå¯¹è±¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹åˆ›å»ºï¼›executeæ–¹æ³•éœ€è¦åœ¨UIçº¿ç¨‹è°ƒç”¨ï¼›ä¸€ä¸ªAsyncTaskå¯¹è±¡åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼›Android1.6ä¹‹å‰ä¸²è¡Œæ‰§è¡Œï¼ŒAndroid1.6é‡‡ç”¨çº¿ç¨‹æ± å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼ŒAndroid3.0å¼€å§‹ï¼Œåˆé‡‡ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡ executeOnExecutor() æ–¹æ³•æ¥å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚</p>
<h4 id="AsyncTaskçš„å·¥ä½œåŸç†"><a href="#AsyncTaskçš„å·¥ä½œåŸç†" class="headerlink" title="AsyncTaskçš„å·¥ä½œåŸç†"></a>AsyncTaskçš„å·¥ä½œåŸç†</h4><ul>
<li>1.AsyncTaskä¸­æœ‰ä¸¤ä¸ªçº¿ç¨‹æ± ï¼ˆ SerialExecutor å’Œ THREAD_POOL_EXECUTOR ï¼‰å’Œä¸€ä¸ª InternalHandler ï¼Œå…¶ä¸­çº¿ç¨‹æ± SerialExecutorç”¨äºä»»åŠ¡æ’é˜Ÿï¼ŒTHREAD_POOL_EXECUTORç”¨äºçœŸæ­£æ‰§è¡Œä»»åŠ¡ï¼ŒInternalHandlerç”¨äºå°†æ‰§è¡Œç¯å¢ƒåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ã€‚</li>
<li>2.AsyncTaskçš„æ’é˜Ÿè¿‡ç¨‹ï¼šç³»ç»Ÿé¦–å…ˆä¼šæŠŠAsyncTaskçš„Paramså‚æ•°å°è£…æˆFutureTaskå¯¹è±¡ï¼Œå®ƒå……å½“Runnableçš„ä½œç”¨ï¼Œæ¥ä¸‹æ¥è¿™ä¸ªFutureTaskä¼šäº¤ç»™SerialExecutorçš„ execute() æ–¹æ³•å¤„ç†ï¼Œexecute()æ–¹æ³•é¦–å…ˆä¼šæŠŠFutereTaskå¯¹è±¡æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ— mTasks ä¸­å»ï¼›å¦‚æœæ²¡æœ‰æ­£åœ¨æ´»åŠ¨çš„AsyncTaskä»»åŠ¡ï¼Œå°±ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªAsyncTaskä»»åŠ¡ï¼›åŒæ—¶å½“ä¸€ä¸ªAsyncTaskä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼ŒAsyncTaskä¼šç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œä¸ºæ­¢ï¼Œå¯ä»¥çœ‹å‡ºé»˜è®¤æƒ…å†µï¼ŒAsyncTaskæ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼ˆAndroid3.0åï¼‰ã€‚</li>
</ul>
<h4 id="HandlerThread"><a href="#HandlerThread" class="headerlink" title="HandlerThread"></a>HandlerThread</h4><ul>
<li>1.HandlerThreadç»§æ‰¿äº†Thread,æ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨Handlerçš„Thread</li>
<li>2.åœ¨runæ–¹æ³•ä¸­é€šè¿‡ looper.prepare() æ¥å¼€å¯æ¶ˆæ¯å¾ªç¯ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨HandlerThreadä¸­åˆ›å»ºHandleräº†</li>
<li>3.å¤–ç•Œå¯ä»¥é€šè¿‡ä¸€ä¸ªHandlerçš„æ¶ˆæ¯æ–¹å¼æ¥é€šçŸ¥HandlerThreadæ¥æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼›ç¡®å®šä¸ä½¿ç”¨ä¹‹åï¼Œå¯ä»¥é€šè¿‡ quit æˆ– quitSafely æ–¹æ³•æ¥ç»ˆæ­¢çº¿ç¨‹æ‰§è¡Œ</li>
<li>4.å…·ä½“ä½¿ç”¨åœºæ™¯æ˜¯IntentService</li>
</ul>
<h4 id="IntentService"><a href="#IntentService" class="headerlink" title="IntentService"></a>IntentService</h4><p>IntentSercieæ˜¯ä¸€ç§ç‰¹æ®Šçš„Serviceï¼Œç»§æ‰¿äº†Serviceå¹¶ä¸”æ˜¯æŠ½è±¡ç±»ï¼Œä»»åŠ¡æ‰§è¡Œå®Œæˆåä¼šè‡ªåŠ¨åœæ­¢ï¼Œä¼˜å…ˆçº§è¿œé«˜äºæ™®é€šçº¿ç¨‹ï¼Œé€‚åˆæ‰§è¡Œä¸€äº›é«˜ä¼˜å…ˆçº§çš„åå°ä»»åŠ¡ï¼› IntentServiceå°è£…äº† HandlerThread å’Œ Handlerã€‚</p>
<ul>
<li>1.onCreate æ–¹æ³•è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªHandlerThread</li>
<li>2.ç„¶åç”¨å®ƒçš„Looperæ„é€ äº†ä¸€ä¸ªHandlerå¯¹è±¡ mServiceHandler ï¼Œè¿™æ ·é€šè¿‡mServiceHandlerAndroidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± å‘é€çš„æ¶ˆæ¯éƒ½ä¼šåœ¨HandlerThreadæ‰§è¡Œï¼›</li>
<li>3.IntentServicedçš„ onHandlerIntent æ–¹æ³•æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œéœ€è¦åœ¨å­ç±»å®ç°ï¼ŒonHandlerIntentæ–¹æ³•æ‰§è¡Œåï¼ŒstopSelt(int startId)å°±ä¼šåœæ­¢æœåŠ¡ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªåå°ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæœ€åä¸€ä¸ªstopSelf(int startId)æ‰ä¼šåœæ­¢æœåŠ¡ã€‚</li>
</ul>
<h3 id="Androidçº¿ç¨‹æ± "><a href="#Androidçº¿ç¨‹æ± " class="headerlink" title="Androidçº¿ç¨‹æ± "></a>Androidçº¿ç¨‹æ± </h3><p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>é‡ç”¨çº¿ç¨‹æ± çš„çº¿ç¨‹ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯å¸¦æ¥çš„æ€§èƒ½å¼€é”€</li>
<li>æ§åˆ¶çº¿ç¨‹æ± çš„æœ€å¤§å¹¶å‘æ•°ï¼Œé¿å…å¤§é‡çº¿ç¨‹äº’ç›¸æŠ¢ç³»ç»Ÿèµ„æºå¯¼è‡´é˜»å¡</li>
<li>æä¾›å®šæ—¶æ‰§è¡Œå’Œé—´éš”å¾ªç¯æ‰§è¡ŒåŠŸèƒ½</li>
</ol>
<h4 id="ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰"><a href="#ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰" class="headerlink" title="ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰"></a>ThreadPoolExecutorï¼ˆç†Ÿæ‚‰åå¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼‰</h4><p>Executoræ˜¯ä¸€ä¸ªæ¥å£ï¼Œçº¿ç¨‹æ± çš„å…·ä½“å®ç°åœ¨ThreadPoolExecutorï¼›å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„å‚æ•°æ¥é…ç½®çº¿ç¨‹æ± ï¼›Androidçš„çº¿ç¨‹æ±  å¤§éƒ¨åˆ†éƒ½æ˜¯é€š è¿‡Executoræä¾›çš„å·¥å‚æ–¹æ³•åˆ›å»ºçš„ã€‚</p>
<h5 id="ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°"><a href="#ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°" class="headerlink" title="ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°"></a>ThreadPoolExecutorå¸¸è§æ„é€ å‚æ•°</h5><ol>
<li>corePoolSizeï¼š çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¼šä¸€ç›´å­˜æ´»(è®¾ç½®äº†è¶…æ—¶æœºåˆ¶é™¤å¤–ï¼Œ allowCoreThreadTimeOutå±æ€§ä¸ºtrueæ—¶å¼€å¯ï¼‰</li>
<li>maxinmumPoolSizeï¼š çº¿ç¨‹æ± èƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œå½“æ´»åŠ¨çš„çº¿ç¨‹è¾¾åˆ°è¿™ä¸ªæ•°å€¼ä¹‹åï¼Œåç»­æ–°ä»»åŠ¡ä¼šè¢«é˜»å¡</li>
<li>keepAliveTimeï¼š éæ ¸å¿ƒçº¿ç¨‹é—²ç½®çš„è¶…æ—¶æ—¶é•¿ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é•¿ï¼Œéæ ¸å¿ƒçº¿ç¨‹å°±ä¼šè¢«å›æ”¶,å½“allowCoreThreadTimeOutä¸ºtrueæ—¶ï¼ŒkeepAliveTimeåŒæ ·ä½œç”¨äºæ ¸å¿ƒçº¿ç¨‹ã€‚</li>
<li>unitï¼škeepAliveTimeçš„æ—¶é—´å•ä½ï¼Œè¿™æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå¸¸ç”¨TimeUnit.MILLISECONDS(æ¯«ç§’)ã€TimeUnit.SECONDSï¼ˆç§’ï¼‰ã€TimeUnit.MINUTES(åˆ†é’Ÿ)</li>
<li>workQueueï¼š çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œé€šè¿‡executeæ–¹æ³•æäº¤çš„Runnableå¯¹è±¡ä¼šå­˜å‚¨åœ¨è¿™ä¸ªå‚æ•°ä¸­</li>
<li>threadFactoryï¼š çº¿ç¨‹å·¥å‚ï¼Œä¸ºçº¿ç¨‹æ± æä¾›åˆ›å»ºçº¿ç¨‹çš„åŠŸèƒ½ï¼Œæ˜¯ä¸ªæ¥å£ï¼Œæä¾›ThreadnewThread(Runnable r)æ–¹æ³•</li>
<li>RejectedExecutionHandleï¼šå½“çº¿ç¨‹æ± æ— æ³•æ‰§è¡Œæ–°ä»»åŠ¡æ—¶ï¼Œå¯èƒ½ç”±äºçº¿ç¨‹é˜Ÿåˆ—å·²æ»¡æˆ–æ— æ³•æˆåŠŸæ‰§è¡Œä»»åŠ¡ï¼Œè¿™æ—¶å€™ ThreadPoolExecutorä¼šè°ƒç”¨handlerçš„ rejectedExecutionçš„æ–¹æ³•ï¼Œé»˜è®¤ä¼šæŠ›å‡ºRejectedExecutionException</li>
</ol>
<h5 id="ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™"><a href="#ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™" class="headerlink" title="ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™:"></a>ThreadPoolExecutoræ‰§è¡Œä»»åŠ¡å¤§è‡´éµå¾ªå¦‚ä¸‹è§„åˆ™:</h5><ol>
<li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æœªè¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡ï¼Œé‚£ä¹ˆä¼šç›´æ¥å¯åŠ¨ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± </li>
<li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å·²ç»è¾¾åˆ°æˆ–è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œé‚£ä¹ˆä»»åŠ¡ä¼šè¢«æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…æ‰§è¡Œ</li>
<li>å¦‚æœæ­¥éª¤2ä¸­æ— æ³•å°†ä»»åŠ¡æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¾€å¾€æ˜¯å› ä¸ºä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœçº¿ç¨‹æ•°é‡æœªè¾¾åˆ°çº¿ç¨‹æ± è§„å®šçš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆä¼šç«‹åˆ»å¯åŠ¨ä¸€ä¸ªéæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡</li>
<li>å¦‚æœæ­¥éª¤3ä¸­çº¿ç¨‹æ•°é‡è¾¾åˆ°çº¿ç¨‹æ± è§„å®šçš„æœ€å¤§å€¼ï¼Œçº¿ç¨‹æ± ä¼šæ‹’ç»æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¼šè°ƒç”¨RejectedExecutionHandlerçš„rejectedExecutionæ–¹æ³•æ¥é€šçŸ¥è°ƒç”¨è€…</li>
</ol>
<h5 id="AsyncTaskçš„THREAD-POOL-EXECUTORçº¿ç¨‹æ± é…ç½®"><a href="#AsyncTaskçš„THREAD-POOL-EXECUTORçº¿ç¨‹æ± é…ç½®" class="headerlink" title="AsyncTaskçš„THREAD_POOL_EXECUTORçº¿ç¨‹æ± é…ç½®:"></a>AsyncTaskçš„THREAD_POOL_EXECUTORçº¿ç¨‹æ± é…ç½®:</h5><ol>
<li>æ ¸å¿ƒçº¿ç¨‹æ•°ç­‰äºCPUæ ¸å¿ƒæ•°+1</li>
<li>çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°ä¸ºCPUæ ¸å¿ƒæ•°çš„2å€+1</li>
<li>æ ¸å¿ƒçº¿ç¨‹æ— è¶…æ—¶æœºåˆ¶ï¼Œéæ ¸å¿ƒçº¿ç¨‹çš„é—²ç½®è¶…æ—¶æ—¶é—´ä¸º1ç§’</li>
<li>ä»»åŠ¡é˜Ÿåˆ—å®¹é‡æ˜¯128</li>
</ol>
<h4 id="å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± "><a href="#å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± " class="headerlink" title="å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± "></a>å¸¸è§çš„4ä¸ªçº¿ç¨‹æ± </h4><ul>
<li>1ã€FixedThreadPool ï¼šçº¿ç¨‹æ•°é‡å›ºå®šçš„çº¿ç¨‹æ± ï¼Œå½“æ‰€æœ‰çº¿ç¨‹éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œæ–°ä»»åŠ¡ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œåªæœ‰æ ¸å¿ƒçº¿ç¨‹å¹¶ä¸”ä¸ä¼šå›æ”¶ï¼ˆæ— è¶…æ—¶æœºåˆ¶ï¼‰ï¼Œèƒ½å¿«é€Ÿçš„å“åº”å¤–ç•Œè¯·æ±‚ã€‚</li>
<li>2ã€CachedThreadPool ï¼šçº¿ç¨‹æ•°é‡ä¸å®šçš„çº¿ç¨‹æ± ï¼Œæœ€å¤§çº¿ç¨‹æ•°Integer.MAX_VALUE(ç›¸å½“äºä»»æ„å¤§),å½“æ‰€æœ‰çº¿ç¨‹éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œä¼šåˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼›çº¿ç¨‹æ± çš„ç©ºé—²è¿›ç¨‹è¶…æ—¶æ—¶é•¿ä¸º60ç§’ï¼Œè¶…è¿‡å°±ä¼šè¢«å›æ”¶ï¼›ä»»ä½•ä»»åŠ¡éƒ½ä¼šè¢«ç«‹å³æ‰§è¡Œï¼Œé€‚åˆæ‰§è¡Œå¤§é‡çš„è€—æ—¶è¾ƒå°‘çš„ä»»åŠ¡ã€‚</li>
<li>3ã€ScheduledThreadPool ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡å›ºå®šï¼Œéæ ¸å¿ƒçº¿ç¨‹æ•°é‡æ— é™åˆ¶ï¼Œéæ ¸å¿ƒçº¿ç¨‹é—²ç½®æ—¶ä¼šè¢«ç«‹åˆ»å›æ”¶ï¼Œç”¨äºæ‰§è¡Œå®šæ—¶ä»»åŠ¡å’Œå…·æœ‰å›ºå®šå‘¨æœŸçš„é‡å¤ä»»åŠ¡ã€‚</li>
<li>4ã€SingleThreadExecutor ï¼šåªæœ‰ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­ä¸²è¡Œæ‰§è¡Œï¼Œä¸éœ€è¦å¤„ç†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚</li>
</ul>
<hr>
<h2 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h2><ul>
<li><a href="https://github.com/zhuyongit/AndroidDevelopmentArt" target="_blank" rel="external">Androidå¼€å‘è‰ºæœ¯æ¢ç´¢ï¼Œè„‘å›¾ç¬”è®°</a></li>
</ul>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">æ”¯æŒä¸€ä¸‹</span>
      <div class="donation-body">
        <div class="tip text-center">æ‰«ä¸€æ‰«ï¼Œæ”¯æŒæˆ‘</div>
        <ul>
        
          <li class="item">
            
              <span>å¾®ä¿¡æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/Wechat-admire.jpg" alt="">
          </li>
        
          <li class="item">
            
              <span>æ”¯ä»˜å®æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/alipay-admire.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2018/02/04/ã€ŠAndroidç¾¤è‹±ä¼ -ç¥å…µåˆ©å™¨ã€‹è¯»ä¹¦ç¬”è®°/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2018/04/28/ã€Šç¬¬ä¸€è¡Œä»£ç ï¼šAndroidï¼ˆç¬¬2ç‰ˆï¼‰ã€‹è¯»ä¹¦ç¬”è®°/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">å…³é—­</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/categories/Android"
              rel="noopener noreferrer"
              target="_self"
              >
              åˆ†ç±»
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/Android"
              rel="noopener noreferrer"
              target="_self"
              >
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/project"
              rel="noopener noreferrer"
              target="_self"
              >
              é¡¹ç›®
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              å‹é“¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              å…³äº
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/music.html"
              rel="noopener noreferrer"
              target="_self"
              >
              ğŸµ
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalkè¯„è®ºæ’ä»¶é€šç”¨ä»£ç  -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '2b303b849c8ea65e4051',
  clientSecret: '57fc88550a6d86d10a191bb7b6411072576c00b3',
  repo: 'blog-comment',
  owner: 'youlookwhat',
  // åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸‹æˆªå–å‰50ä¸ªå­—ç¬¦ä¸², è¿™æ˜¯å› ä¸º github å¯¹ label çš„é•¿åº¦æœ‰äº†è¦æ±‚, å¦‚æœè¶…è¿‡
  // 50ä¸ªå­—ç¬¦ä¸²åˆ™ä¼šæŠ¥é”™.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['youlookwhat'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalkä»£ç ç»“æŸ -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
