<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Android å†…å­˜æ³„æ¼åˆ†æä¸ä¼˜åŒ– | JinBeen&#39;s Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–," />
  

  <meta name="description" content="å¤§èŒƒå›´å€Ÿé‰´åŠè‡ªå·±æ€è€ƒæ€»ç»“çš„å†…å®¹ï¼Œæ„Ÿè°¢å„ä½åšä¸»çš„åˆ†äº«ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Android å†…å­˜æ³„æ¼åˆ†æä¸ä¼˜åŒ–">
<meta property="og:url" content="http://jinbeen.com/2018/06/27/memory-leak-analysis/index.html">
<meta property="og:site_name" content="JinBeen's Blog">
<meta property="og:description" content="å¤§èŒƒå›´å€Ÿé‰´åŠè‡ªå·±æ€è€ƒæ€»ç»“çš„å†…å®¹ï¼Œæ„Ÿè°¢å„ä½åšä¸»çš„åˆ†äº«ã€‚">
<meta property="og:updated_time" content="2018-07-06T06:17:57.473Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android å†…å­˜æ³„æ¼åˆ†æä¸ä¼˜åŒ–">
<meta name="twitter:description" content="å¤§èŒƒå›´å€Ÿé‰´åŠè‡ªå·±æ€è€ƒæ€»ç»“çš„å†…å®¹ï¼Œæ„Ÿè°¢å„ä½åšä¸»çš„åˆ†äº«ã€‚">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'G-91L2DT6NQB', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?643275289e816ea38d7a840456d91ebd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">ç›’å­</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">ç›’å­</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/categories/Android/"
            rel="noopener noreferrer"
            target="_self"
            >
            åˆ†ç±»
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/Android/"
            rel="noopener noreferrer"
            target="_self"
            >
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/project/"
            rel="noopener noreferrer"
            target="_self"
            >
            é¡¹ç›®
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            å‹é“¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            å…³äº
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/music.html"
            rel="noopener noreferrer"
            target="_self"
            >
            ğŸµ
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#åŸºç¡€æ¦‚å¿µ"><span class="toc-text">åŸºç¡€æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½•ä¸ºæ€§èƒ½é—®é¢˜"><span class="toc-text">ä½•ä¸ºæ€§èƒ½é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-å“åº”æ—¶é—´"><span class="toc-text">(1). å“åº”æ—¶é—´</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-TPS-Transaction-Per-Second"><span class="toc-text">(2). TPS(Transaction Per Second)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ€§èƒ½è°ƒä¼˜æ–¹å¼"><span class="toc-text">æ€§èƒ½è°ƒä¼˜æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚"><span class="toc-text">é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å†…å­˜æ³„æ¼é—®é¢˜"><span class="toc-text">å†…å­˜æ³„æ¼é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context"><span class="toc-text">é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡"><span class="toc-text">å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼"><span class="toc-text">AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²"><span class="toc-text">å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼"><span class="toc-text">webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Window-Leaked"><span class="toc-text">Window Leaked</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#é¿å…å†…å­˜æµå¤±"><span class="toc-text">é¿å…å†…å­˜æµå¤±</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ç›‘å¬å™¨çš„æ³¨é”€"><span class="toc-text">ç›‘å¬å™¨çš„æ³¨é”€</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Bitmapå¤„ç†"><span class="toc-text">Bitmapå¤„ç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SharedPreference-å­˜å‚¨value"><span class="toc-text">SharedPreference å­˜å‚¨value</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Cursorå…³é—­"><span class="toc-text">Cursorå…³é—­</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®"><span class="toc-text">æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ"><span class="toc-text">å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º"><span class="toc-text">å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#è°¨æ…ä½¿ç”¨æœåŠ¡Service"><span class="toc-text">è°¨æ…ä½¿ç”¨æœåŠ¡Service</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨"><span class="toc-text">ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#å°‘ç”¨æšä¸¾enumç»“æ„"><span class="toc-text">å°‘ç”¨æšä¸¾enumç»“æ„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡"><span class="toc-text">é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ"><span class="toc-text">ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ä½¿ç”¨-nano-protobufs-åºåˆ—åŒ–æ•°æ®"><span class="toc-text">ä½¿ç”¨ nano protobufs åºåˆ—åŒ–æ•°æ®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç "><span class="toc-text">ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#é™ä½æ•´ä½“å°ºå¯¸APK"><span class="toc-text">é™ä½æ•´ä½“å°ºå¯¸APK</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡"><span class="toc-text">ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ£€æµ‹å·¥å…·"><span class="toc-text">æ£€æµ‹å·¥å…·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‚è€ƒæ–‡ç« "><span class="toc-text">å‚è€ƒæ–‡ç« </span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Android-å†…å­˜æ³„æ¼åˆ†æä¸ä¼˜åŒ–" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Android å†…å­˜æ³„æ¼åˆ†æä¸ä¼˜åŒ–</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.06.27</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>JinBeen</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbspçƒ­åº¦ <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>â„ƒ
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <blockquote>
<p>å¤§èŒƒå›´å€Ÿé‰´åŠè‡ªå·±æ€è€ƒæ€»ç»“çš„å†…å®¹ï¼Œæ„Ÿè°¢å„ä½åšä¸»çš„åˆ†äº«ã€‚</p>
</blockquote>
<a id="more"></a>
<h3 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h3><h4 id="ä½•ä¸ºæ€§èƒ½é—®é¢˜"><a href="#ä½•ä¸ºæ€§èƒ½é—®é¢˜" class="headerlink" title="ä½•ä¸ºæ€§èƒ½é—®é¢˜"></a>ä½•ä¸ºæ€§èƒ½é—®é¢˜</h4><h5 id="1-å“åº”æ—¶é—´"><a href="#1-å“åº”æ—¶é—´" class="headerlink" title="(1). å“åº”æ—¶é—´"></a>(1). å“åº”æ—¶é—´</h5><p>æŒ‡ä»ç”¨æˆ·æ“ä½œå¼€å§‹åˆ°ç³»ç»Ÿç»™ç”¨æˆ·ä»¥æ­£ç¡®åé¦ˆçš„æ—¶é—´ã€‚ä¸€èˆ¬åŒ…æ‹¬é€»è¾‘å¤„ç†æ—¶é—´ + ç½‘ç»œä¼ è¾“æ—¶é—´ + å±•ç°æ—¶é—´ã€‚å¯¹äºéç½‘ç»œç±»åº”ç”¨ä¸åŒ…æ‹¬ç½‘ç»œä¼ è¾“æ—¶é—´ã€‚</p>
<p>å±•ç°æ—¶é—´å³ï¼šç½‘é¡µæˆ– App ç•Œé¢æ¸²æŸ“æ—¶é—´ã€‚<br>å“åº”æ—¶é—´æ˜¯ï¼šç”¨æˆ·å¯¹æ€§èƒ½æœ€ç›´æ¥çš„æ„Ÿå—ã€‚</p>
<h5 id="2-TPS-Transaction-Per-Second"><a href="#2-TPS-Transaction-Per-Second" class="headerlink" title="(2). TPS(Transaction Per Second)"></a>(2). TPS(Transaction Per Second)</h5><p>TPSä¸ºæ¯ç§’å¤„ç†çš„äº‹åŠ¡æ•°ï¼Œæ˜¯ç³»ç»Ÿååé‡çš„æŒ‡æ ‡ï¼Œåœ¨æœç´¢ç³»ç»Ÿä¸­ä¹Ÿç”¨QPS(Query Per Second)è¡¡é‡ã€‚TPSä¸€èˆ¬ä¸å“åº”æ—¶é—´åç›¸å…³ã€‚</p>
<p>é€šå¸¸æ‰€è¯´çš„æ€§èƒ½é—®é¢˜å°±æ˜¯æŒ‡å“åº”æ—¶é—´è¿‡é•¿ã€ç³»ç»Ÿååé‡è¿‡ä½ã€‚</p>
<p>å¯¹åå°å¼€å‘æ¥è¯´ï¼Œä¹Ÿå¸¸å°†é«˜å¹¶å‘ä¸‹å†…å­˜æ³„æ¼å½’ä¸ºæ€§èƒ½é—®é¢˜ã€‚<br>å¯¹ç§»åŠ¨å¼€å‘æ¥è¯´ï¼Œæ€§èƒ½é—®é¢˜è¿˜åŒ…æ‹¬ç”µé‡ã€å†…å­˜ä½¿ç”¨è¿™ä¸¤ç±»è¾ƒç‰¹æ®Šæƒ…å†µã€‚</p>
<h4 id="æ€§èƒ½è°ƒä¼˜æ–¹å¼"><a href="#æ€§èƒ½è°ƒä¼˜æ–¹å¼" class="headerlink" title="æ€§èƒ½è°ƒä¼˜æ–¹å¼"></a>æ€§èƒ½è°ƒä¼˜æ–¹å¼</h4><p>æ˜ç™½äº†ä½•ä¸ºæ€§èƒ½é—®é¢˜ä¹‹åï¼Œå°±èƒ½æ˜ç™½æ€§èƒ½ä¼˜åŒ–å®é™…å°±æ˜¯ä¼˜åŒ–ç³»ç»Ÿçš„å“åº”æ—¶é—´ï¼Œæé«˜TPSã€‚ä¼˜åŒ–å“åº”æ—¶é—´ï¼Œæé«˜TPSã€‚æ–¹å¼ä¸å¤–ä¹è¿™ä¸‰å¤§ç±»ï¼š</p>
<ul>
<li>(1) é™ä½æ‰§è¡Œæ—¶é—´ï¼ŒåˆåŒ…æ‹¬å‡ å°ç±»<ul>
<li>a. åˆ©ç”¨å¤šçº¿ç¨‹å¹¶å‘æˆ–åˆ†å¸ƒå¼æé«˜ TPS</li>
<li>b. ç¼“å­˜(åŒ…æ‹¬å¯¹è±¡ç¼“å­˜ã€IO ç¼“å­˜ã€ç½‘ç»œç¼“å­˜ç­‰)</li>
<li>c. æ•°æ®ç»“æ„å’Œç®—æ³•ä¼˜åŒ–</li>
<li>d. æ€§èƒ½æ›´ä¼˜çš„åº•å±‚æ¥å£è°ƒç”¨ï¼Œå¦‚ JNI å®ç°</li>
<li>e. é€»è¾‘ä¼˜åŒ–</li>
<li>f. éœ€æ±‚ä¼˜åŒ–</li>
</ul>
</li>
<li>(2) åŒæ­¥æ”¹å¼‚æ­¥ï¼Œåˆ©ç”¨å¤šçº¿ç¨‹æé«˜TPS</li>
<li>(3) æå‰æˆ–å»¶è¿Ÿæ“ä½œï¼Œé”™å³°æé«˜TPS</li>
</ul>
<h3 id="é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚"><a href="#é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚" class="headerlink" title="é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚"></a>é¡¹ç›®ä¼˜åŒ–ç»†èŠ‚</h3><h4 id="å†…å­˜æ³„æ¼é—®é¢˜"><a href="#å†…å­˜æ³„æ¼é—®é¢˜" class="headerlink" title="å†…å­˜æ³„æ¼é—®é¢˜"></a>å†…å­˜æ³„æ¼é—®é¢˜</h4><h5 id="é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context"><a href="#é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context" class="headerlink" title="é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context"></a>é™æ€å•ä¾‹ç±»å¼•ç”¨Activityçš„context</h5><p>å•ä¾‹æ¨¡å¼ä¸æ­£ç¡®çš„è·å–context:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginManager</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Context context;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LoginManager manager;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LoginManager <span class="title">getInstance</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (manager == <span class="keyword">null</span>)</div><div class="line">            manager = <span class="keyword">new</span> LoginManager(context);</div><div class="line">        <span class="keyword">return</span> manager;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LoginManager</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.context = context;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åœ¨LoginActivityä¸­:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span>  </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> LoginManager loginManager;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_login);</div><div class="line">        loginManager = LoginManager.getInstance(<span class="keyword">this</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>åœ¨LoginManagerçš„å•ä¾‹ä¸­contextæŒæœ‰äº†LoginActivityçš„thiså¯¹è±¡ï¼Œå³ä½¿ç™»å½•æˆåŠŸåæˆ‘ä»¬è·³è½¬åˆ°äº†å…¶ä»–Activityé¡µé¢ï¼ŒLoginActivityçš„å¯¹è±¡ä»ç„¶å¾—ä¸åˆ°å›æ”¶å› ä¸ºä»–è¢«å•ä¾‹æ‰€æŒæœ‰ï¼Œè€Œå•ä¾‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åŒApplicationä¿æŒä¸€è‡´çš„ã€‚</p>
<p>æ­£ç¡®çš„è·å–contextçš„æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginManager</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Context context;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LoginManager manager;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LoginManager <span class="title">getInstance</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (manager == <span class="keyword">null</span>)</div><div class="line">            manager = <span class="keyword">new</span> LoginManager(context);</div><div class="line">        <span class="keyword">return</span> manager;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LoginManager</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.context = context.getApplicationContext();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘ä»¬å•ä¾‹ä¸­contextä¸å†æŒæœ‰Activityçš„contextè€Œæ˜¯æŒæœ‰Applicationçš„contextå³å¯ï¼Œå› ä¸ºApplicationæœ¬æ¥å°±æ˜¯å•ä¾‹ï¼Œæ‰€ä»¥è¿™æ ·å°±ä¸ä¼šå­˜åœ¨å†…å­˜æ³„æ¼çš„çš„ç°è±¡äº†ã€‚</p>
</blockquote>
<h5 id="å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡"><a href="#å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡" class="headerlink" title="å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡"></a>å•ä¾‹æ¨¡å¼ä¸­é€šè¿‡å†…éƒ¨ç±»æŒæœ‰activityå¯¹è±¡</h5><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå•ä¾‹çš„ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestManager</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> TestManager INSTANCE = <span class="keyword">new</span> TestManager();</div><div class="line">    <span class="keyword">private</span> List&lt;MyListener&gt; mListenerList;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">TestManager</span><span class="params">()</span> </span>&#123;</div><div class="line">        mListenerList = <span class="keyword">new</span> ArrayList&lt;MyListener&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TestManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> INSTANCE;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerListener</span><span class="params">(MyListener listener)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!mListenerList.contains(listener)) &#123;</div><div class="line">            mListenerList.add(listener);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unregisterListener</span><span class="params">(MyListener listener)</span> </span>&#123;</div><div class="line">        mListenerList.remove(listener);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyListener</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSomeThingHappen</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯activity:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> MyListener mMyListener=<span class="keyword">new</span> MyListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSomeThingHappen</span><span class="params">()</span> </span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">private</span> TestManager testManager=TestManager.getInstance();</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_test);</div><div class="line">        testManager.registerListener(mMyListener);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çŸ¥é“åœ¨javaä¸­ï¼Œéé™æ€çš„å†…éƒ¨ç±»çš„å¯¹è±¡éƒ½æ˜¯ä¼šæŒæœ‰æŒ‡å‘å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†å†…éƒ¨ç±»å¯¹è±¡mMyListenerè®©å•ä¾‹æ‰€æŒæœ‰æ—¶ï¼Œç”±äºmMyListenerå¼•ç”¨äº†æˆ‘ä»¬çš„activityå¯¹è±¡ï¼Œå› æ­¤é€ æˆactivityå¯¹è±¡ä¹Ÿä¸èƒ½è¢«å›æ”¶äº†ï¼Œä»è€Œå‡ºç°å†…å­˜æ³„æ¼ç°è±¡ã€‚</p>
<p>ä¿®æ”¹ä»¥ä¸Šä»£ç ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼Œåœ¨activityä¸­æ·»åŠ ä»¥ä¸‹ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">    testManager.unregisterListener(mMyListener);</div><div class="line">    <span class="keyword">super</span>.onDestroy();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>é€€å‡ºç•Œé¢æ—¶ï¼Œå–æ¶ˆç›¸å…³æ³¨å†Œç›‘å¬ï¼</p>
</blockquote>
<h5 id="AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼"><a href="#AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼" class="headerlink" title="AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼"></a>AsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆçš„å†…å­˜æ³„æ¼</h5><p>æˆ‘ä»¬åœ¨æ¥çœ‹ä¸€ç§æ›´åŠ å®¹æ˜“è¢«å¿½ç•¥çš„å†…å­˜æ³„æ¼ç°è±¡ï¼Œå¯¹äºAsyncTaskä¸æ­£ç¡®ä½¿ç”¨é€ æˆå†…å­˜æ³„æ¼çš„é—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mTask=<span class="keyword">new</span> AsyncTask&lt;String,Void,Void&gt;()</div><div class="line">        &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(String... params)</span> </span>&#123;</div><div class="line">                <span class="comment">//doSamething..</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;.execute(<span class="string">"a task"</span>);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨AsyncTaskçš„æ—¶å€™ä¸å®œåœ¨å…¶ä¸­æ‰§è¡Œå¤ªè€—æ—¶çš„æ“ä½œï¼Œå‡è®¾activityå·²ç»é€€å‡ºäº†ï¼Œç„¶è€ŒAsyncTaské‡Œä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆæˆ–è€…æ˜¯è¿˜åœ¨æ’é˜Ÿç­‰å¾…æ‰§è¡Œï¼Œå°±ä¼šé€ æˆæˆ‘ä»¬çš„activityå¯¹è±¡è¢«å›æ”¶çš„æ—¶é—´å»¶åï¼Œä¸€æ®µæ—¶é—´å†…å†…å­˜å æœ‰ç‡å˜å¤§ã€‚</p>
<p>è§£å†³æ–¹æ³•åœ¨activityé€€å‡ºçš„æ—¶å€™åº”è¯¥è°ƒç”¨cancel()å‡½æ•°:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">       <span class="comment">//mTask.cancel(false);</span></div><div class="line">       mTask.cancel(<span class="keyword">true</span>);</div><div class="line">       <span class="keyword">super</span>.onDestroy();</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>é€€å‡ºç•Œé¢æ—¶ï¼Œç»“æŸå½“å‰é¡µé¢çš„çº¿ç¨‹ã€‚</p>
</blockquote>
<h5 id="å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²"><a href="#å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²" class="headerlink" title="å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²"></a>å†…éƒ¨Handlerç±»å¼•èµ·å†…å­˜æ³„éœ²</h5><p>åŸå› ï¼šHandleråœ¨Androidä¸­ç”¨äºæ¶ˆæ¯çš„å‘é€ä¸å¼‚æ­¥å¤„ç†ï¼Œå¸¸å¸¸åœ¨Activityä¸­ä½œä¸ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»æ¥å®šä¹‰ï¼Œæ­¤æ—¶Handlerä¼šéšå¼åœ°æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªActivityï¼‰çš„å¼•ç”¨ã€‚å½“Activityå·²ç»è¢«ç”¨æˆ·å…³é—­æ—¶ï¼Œç”±äºHandleræŒæœ‰Activityçš„å¼•ç”¨é€ æˆActivityæ— æ³•è¢«GCå›æ”¶ï¼Œè¿™æ ·å®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚ æ­£ç¡®çš„åšæ³•æ˜¯å°†å…¶å®šä¹‰æˆä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼ˆæ­¤æ—¶ä¸ä¼šæŒæœ‰å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼‰ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Activityå¹¶å¯¹Activityå¯¹è±¡å¢åŠ ä¸€ä¸ªå¼±å¼•ç”¨ï¼Œè¿™æ ·Activityè¢«ç”¨æˆ·å…³é—­ä¹‹åï¼Œå³ä¾¿å¼‚æ­¥æ¶ˆæ¯è¿˜æœªå¤„ç†å®Œæ¯•ï¼ŒActivityä¹Ÿèƒ½å¤Ÿè¢«GCå›æ”¶ï¼Œä»è€Œé¿å…äº†å†…å­˜æ³„éœ²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> WeakReference&lt;Activity&gt; reference;</div><div class="line">        </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyHandler</span><span class="params">(Activity activity)</span> </span>&#123;</div><div class="line">            reference = <span class="keyword">new</span> WeakReference&lt;Activity&gt;(activity);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (reference.get() != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">switch</span> (msg.what) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                    <span class="comment">// do something...</span></div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">default</span>:</div><div class="line">                    <span class="comment">// do something...</span></div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h5 id="webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼"><a href="#webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼" class="headerlink" title="webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼"></a>webviewå¯¼è‡´çš„å†…å­˜æ³„æ¼</h5><p>ç”¨ä»£ç Newä¸€ä¸ªWebViewè€Œä¸æ˜¯åœ¨XMLä¸­é™æ€å†™å…¥(ä¸è¿‡è²Œä¼¼ä¸èƒ½è®¾ç½®è¿›åº¦æ¡äº†ï¼Œä¸éœ€è¦è¿›åº¦æ¡çš„å¯ä»¥å¿½ç•¥):</p>
<p>åœ¨XMLæ–‡ä»¶ä¸­ç”¨layoutå ä½:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;RelativeLayout</div><div class="line">    android:id=<span class="string">"@+id/base_web_view_container"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span> /&gt;</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥åªéœ€è¦åœ¨Activityä¸­Newä¸€ä¸ªWebViewå¹¶ä¸”æ·»åŠ åˆ°æˆ‘ä»¬çš„å®¹å™¨ä¸­å°±okäº†:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">RelativeLayout webview_container = (RelativeLayout) findViewById(R.id.base_web_view_container);</div><div class="line">web_view_ = <span class="keyword">new</span> WebView(yourApplicationContext);</div><div class="line">web_view_.setLayoutParams(<span class="keyword">new</span> ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,</div><div class="line">                ViewGroup.LayoutParams.MATCH_PARENT));</div><div class="line">web_view_.setOnWebCallback(yourWebCallback);</div><div class="line">webview_container.addView(web_view_);</div></pre></td></tr></table></figure>
<p>å…³äºWebViewçš„contextåº”è¯¥ç”¨Activityè¿˜æ˜¯Applicationçš„contextï¼Œè¿™é‡Œç½‘ä¸Šè¾ƒä¸ºä¸€è‡´çš„è§‚ç‚¹éƒ½æ˜¯é‡‡ç”¨Applicationçš„ï¼Œç†ç”±æ˜¯è¿™æ ·ä¸ä¼šé€ æˆActivityçš„contextçš„å†…å­˜æ³„æ¼ã€‚</p>
<p>é”€æ¯æ—¶çš„åŠ¨ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearWebViewResource</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (web_view_ != <span class="keyword">null</span>) &#123;</div><div class="line">        LogUtils.d(TAG,<span class="string">"Clear webview's resources"</span>);</div><div class="line">        web_view_.removeAllViews();</div><div class="line">        <span class="comment">// in android 5.1(sdk:21) we should invoke this to avoid memory leak</span></div><div class="line">        <span class="comment">// see (https://coolpers.github.io/webview/memory/leak/2015/07/16/</span></div><div class="line">        <span class="comment">// android-5.1-webview-memory-leak.html)</span></div><div class="line">        ((ViewGroup) web_view_.getParent()).removeView(web_view_);</div><div class="line">        web_view_.setTag(<span class="keyword">null</span>);</div><div class="line">        web_view_.clearHistory();</div><div class="line">        web_view_.destroy();</div><div class="line">        web_view_ = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å°½é‡ä¸è¦å°†WebViewä½œä¸ºlistviewçš„å¤´éƒ¨ä½¿ç”¨ï¼Œè¿™æ ·çš„è¯WebViewä¼šè¢«ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p>
<h5 id="Window-Leaked"><a href="#Window-Leaked" class="headerlink" title="Window Leaked"></a>Window Leaked</h5><p>æŒ‰å­—é¢äº†è§£ï¼ŒWindow Leakedå¤§æ¦‚å°±æ˜¯è¯´ä¸€ä¸ªçª—ä½“æ³„æ¼äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å†…å­˜æ³„æ¼ï¼Œä¸ºä»€ä¹ˆçª—ä½“ä¼šæ³„æ¼å‘¢ï¼Ÿ</p>
<ul>
<li><p>äº§ç”ŸåŸå› ï¼š<br> æˆ‘ä»¬çŸ¥é“Androidçš„æ¯ä¸€ä¸ªActivityéƒ½æœ‰ä¸ªWindowManagerçª—ä½“ç®¡ç†å™¨ï¼ŒåŒæ ·ï¼Œæ„å»ºåœ¨æŸä¸ªActivityä¹‹ä¸Šçš„å¯¹è¯æ¡†ã€PopupWindowä¹Ÿæœ‰ç›¸åº”çš„WindowManagerçª—ä½“ç®¡ç†å™¨ã€‚å› ä¸ºå¯¹è¯æ¡†ã€PopupWindownä¸èƒ½è„±ç¦»Activityè€Œå•ç‹¬å­˜åœ¨ç€ï¼Œæ‰€ä»¥å½“æŸä¸ªDialogæˆ–è€…æŸä¸ªPopupWindowæ­£åœ¨æ˜¾ç¤ºçš„æ—¶å€™æˆ‘ä»¬å»finish()äº†æ‰¿è½½è¯¥Dialog(æˆ–PopupWindow)çš„Activityæ—¶ï¼Œå°±ä¼šæŠ›Window Leakedå¼‚å¸¸äº†ï¼Œå› ä¸ºè¿™ä¸ªDialog(æˆ–PopupWindow)çš„WindowManagerå·²ç»æ²¡æœ‰è°å¯ä»¥é™„å±äº†ï¼Œæ‰€ä»¥å®ƒçš„çª—ä½“ç®¡ç†å™¨å·²ç»æ³„æ¼äº†ã€‚</p>
</li>
<li><p>è§£å†³æ–¹æ³•ï¼š<br>å…³é—­(finish)æŸä¸ªActivityå‰ï¼Œè¦ç¡®ä¿é™„å±åœ¨ä¸Šé¢çš„Dialogæˆ–PopupWindowå·²ç»å…³é—­(dismiss)äº†ã€‚</p>
</li>
</ul>
<h5 id="é¿å…å†…å­˜æµå¤±"><a href="#é¿å…å†…å­˜æµå¤±" class="headerlink" title="é¿å…å†…å­˜æµå¤±"></a>é¿å…å†…å­˜æµå¤±</h5><p>å†…å­˜æµå¤±å¯èƒ½ä¼šå¯¼è‡´å‡ºç°å¤§é‡çš„ GC äº‹ä»¶ï¼Œå¦‚è‡ªå®šä¹‰ç»„ä»¶çš„ onDraw() ï¼Œé¿å…å¤§é‡åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œæ¯”å¦‚ String ï¼Œä»¥å…é¢‘ç¹è§¦å‘ GCã€‚GC äº‹ä»¶é€šå¸¸ä¸å½±å“æ‚¨çš„ APP çš„æ€§èƒ½ï¼Œç„¶è€Œåœ¨å¾ˆçŸ­çš„æ—¶é—´æ®µï¼Œå‘ç”Ÿè®¸å¤šåƒåœ¾æ”¶é›†äº‹ä»¶å¯ä»¥å¿«é€Ÿåœ°åƒäº†æ‚¨çš„å¸§æ—¶é—´ï¼Œç³»ç»Ÿä¸Šæ—¶é—´çš„éƒ½èŠ±è´¹åœ¨ GC ï¼Œå°±æœ‰å¾ˆå°‘æ—¶é—´åšå…¶ä»–çš„ä¸œè¥¿åƒæ¸²æŸ“æˆ–éŸ³é¢‘æµã€‚</p>
<h5 id="ç›‘å¬å™¨çš„æ³¨é”€"><a href="#ç›‘å¬å™¨çš„æ³¨é”€" class="headerlink" title="ç›‘å¬å™¨çš„æ³¨é”€"></a>ç›‘å¬å™¨çš„æ³¨é”€</h5><ul>
<li>å¯¹äºè§‚å¯Ÿè€…, å¹¿æ’­, Listenerç­‰, æ³¨å†Œå’Œæ³¨é”€æ²¡æœ‰æˆå¯¹å‡ºç°è€Œå¯¼è‡´çš„å†…å­˜æ³„éœ².</li>
<li>ä½¿ç”¨CountDownTimerå€’è®¡æ—¶æ—¶ï¼Œé€€å‡ºactivityè¦å–æ¶ˆï¼š<code>timer.cancel()</code></li>
<li>ä½¿ç”¨LocationManagerè·å–åœ°ç†ä½ç½®ï¼ŒåŠæ—¶å–æ¶ˆæ³¨å†Œï¼š<code>locationManager.removeUpdates(mListener);</code></li>
<li>ä½¿ç”¨dialogæˆ–BottomSheetDialogï¼Œæ¶ˆå¤±æ—¶ç§»é™¤ç›‘å¬ï¼Œå¯¹è±¡ç½®ç©º</li>
<li>ä½¿ç”¨RxBusï¼Œé€€å‡ºactivityå–æ¶ˆæ³¨å†Œ</li>
<li>ä½¿ç”¨ä¸€äº›ä¸‰æ–¹çš„åº“ï¼Œä»”ç»†æŸ¥çœ‹æ˜¯å¦éœ€è¦å–æ¶ˆæ³¨å†Œçš„æƒ…å†µ</li>
</ul>
<h5 id="Bitmapå¤„ç†"><a href="#Bitmapå¤„ç†" class="headerlink" title="Bitmapå¤„ç†"></a>Bitmapå¤„ç†</h5><p>ä»¥<a href="https://www.fresco-cn.org/docs/troubleshooting.html" target="_blank" rel="external">fresco</a>ä¸ºä¾‹ï¼š</p>
<ul>
<li>(æœ€å¥½æ˜¯åŠ è½½å›¾ç‰‡å®½é«˜å¤§å°çš„å›¾ç‰‡ï¼Œå¤šä½™çš„å°ºå¯¸ä¼šå¯¼è‡´å†…å­˜æµªè´¹ï¼Œä¸è¿‡webpåç¼€çš„å›¾ç‰‡æ— æ³•è®¾ç½®å®½é«˜ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ï¼Ÿ)åŠ è½½ç‰¹åˆ«ç‰¹åˆ«å¤§çš„å›¾ç‰‡æ—¶æœ€å®¹æ˜“å¯¼è‡´è¿™ç§æƒ…å†µã€‚å¦‚æœä½ åŠ è½½çš„å›¾ç‰‡æ¯”æ‰¿è½½çš„Viewæ˜æ˜¾å¤§å‡ºå¤ªå¤šï¼Œé‚£ä½ åº”è¯¥è€ƒè™‘å°†å®ƒResizeä¸€ä¸‹ã€‚</li>
<li>Android <strong><em>æ— æ³•ç»˜åˆ¶é•¿æˆ–å®½å¤§äº2048åƒç´ çš„å›¾ç‰‡</em></strong>ã€‚è¿™æ˜¯ç”±OpenGLæ¸²æŸ“ç³»ç»Ÿé™åˆ¶çš„ï¼Œå¦‚æœå®ƒè¶…è¿‡äº†è¿™ä¸ªç•Œé™ï¼ŒFrescoä¼šå¯¹å®ƒè¿›è¡ŒResizeã€‚</li>
<li>decode formatï¼šè§£ç æ ¼å¼ï¼Œé€‰æ‹©ARGB_8888/RBG_565/ARGB_4444/ALPHA_8ï¼Œå­˜åœ¨å¾ˆå¤§å·®å¼‚ã€‚åœ¨ä¸éœ€è¦ç‰¹åˆ«æ¸…æ™°çš„å›¾ç‰‡æƒ…å†µä¸‹ï¼Œä½¿ç”¨<strong><em>RBG_565</em></strong>ä¸ºå¥½ã€‚</li>
</ul>
<h5 id="SharedPreference-å­˜å‚¨value"><a href="#SharedPreference-å­˜å‚¨value" class="headerlink" title="SharedPreference å­˜å‚¨value"></a>SharedPreference å­˜å‚¨value</h5><p>spåœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶å…¨éƒ¨åŠ è½½è¿›å†…å­˜ï¼Œå¦‚æœä½ çš„spæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œé‚£ä¹ˆä¼šå¸¦æ¥ä¸¤ä¸ªä¸¥é‡é—®é¢˜ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ä»spä¸­è·å–å€¼çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½¿ç•Œé¢å¡é¡¿ã€æ‰å¸§ã€‚</li>
<li>è§£æspçš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼Œå¯¼è‡´é¢‘ç¹GCï¼Œå¼•èµ·ç•Œé¢å¡é¡¿ã€‚</li>
<li>è¿™äº›keyå’Œvalueä¼šæ°¸è¿œå­˜åœ¨äºå†…å­˜ä¹‹ä¸­ï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚</li>
</ul>
<p>å‚¨å­˜æ•°æ®é‡è¿‡å¤§åï¼Œå–å€¼å°å±æ‰‹æœºvivoY23L,v4.4.4ä¼šå–å€¼å¤±è´¥ã€‚</p>
<h5 id="Cursorå…³é—­"><a href="#Cursorå…³é—­" class="headerlink" title="Cursorå…³é—­"></a>Cursorå…³é—­</h5><p>å¦‚æŸ¥è¯¢æ•°æ®åº“çš„æ“ä½œï¼Œä½¿ç”¨åˆ°Cursorï¼Œä¹Ÿè¦å¯¹Cursorå¯¹è±¡åŠæ—¶å…³é—­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">     <span class="keyword">if</span> (cursor != <span class="keyword">null</span>) &#123;</div><div class="line">        cursor.moveToFirst();</div><div class="line">        <span class="comment">// do something.</span></div><div class="line">    &#125;</div><div class="line">&#125;<span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">    e.printStackTrace();</div><div class="line">&#125;<span class="keyword">finally</span> &#123;</div><div class="line">    <span class="keyword">if</span> (cursor != <span class="keyword">null</span>) &#123;</div><div class="line">        cursor.close();</div><div class="line">        cursor = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®"><a href="#æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®" class="headerlink" title="æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®"></a>æœ‰æ•ˆä½¿ç”¨å†…å­˜çš„å»ºè®®</h4><h5 id="å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ"><a href="#å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ" class="headerlink" title="å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ"></a>å»æ‰beané‡Œæ— ç”¨çš„å­—æ®µ</h5><p>æœ‰æ—¶å€™æˆ‘ä»¬é€šè¿‡GsonFormatç›´æ¥ç”Ÿæˆè¿”å›çš„jsonçš„Beanï¼Œè€Œæœ‰ä¸€äº›æˆ‘ä»¬å¹¶æœªä½¿ç”¨çš„å­—æ®µä¹Ÿä¸€å¹¶ç”Ÿæˆäº†ï¼Œå»ºè®®åˆ é™¤è¿™äº›æ— ç”¨å­—æ®µï¼Œä¸ç„¶å°†æ— å¯é¿å…çš„å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ã€‚</p>
<h5 id="å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º"><a href="#å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º" class="headerlink" title="å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º"></a>å…³é—­é¡µé¢ï¼Œå…¨å±€çš„listæ¸…ç©ºåç½®ç©º</h5><p>ç”¨å®Œå°±æ¸…ç©ºï¼Œå¹¶è®¾ç½®ä¸ºnullï¼Œä¸è¦åˆ°å¤„å¼•ç”¨ä¸ç„¶ä¼šå¯¼è‡´ä¸èƒ½åŠæ—¶é‡Šæ”¾ã€‚</p>
<h5 id="è°¨æ…ä½¿ç”¨æœåŠ¡Service"><a href="#è°¨æ…ä½¿ç”¨æœåŠ¡Service" class="headerlink" title="è°¨æ…ä½¿ç”¨æœåŠ¡Service"></a>è°¨æ…ä½¿ç”¨æœåŠ¡Service</h5><p>ç¦»å¼€äº† APP è¿˜åœ¨è¿è¡ŒæœåŠ¡æ˜¯æœ€ç³Ÿç³•çš„å†…å­˜ç®¡ç†é”™è¯¯ä¹‹ä¸€ï¼Œå½“ APP å¤„åœ¨åå°ï¼Œæˆ‘ä»¬åº”è¯¥åœæ­¢æœåŠ¡ï¼Œé™¤éå®ƒéœ€è¦è¿è¡Œçš„ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://developer.android.google.cn/topic/performance/background-optimization" target="_blank" rel="external">JobScheduler</a>æ›¿ä»£å®ç°ï¼ŒJobScheduleræŠŠä¸€äº›ä¸æ˜¯ç‰¹åˆ«ç´§æ€¥çš„ä»»åŠ¡æ”¾åˆ°æ›´åˆé€‚çš„æ—¶æœºæ‰¹é‡å¤„ç†ã€‚å¦‚æœå¿…é¡»ä½¿ç”¨ä¸€ä¸ªæœåŠ¡ï¼Œæœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://developer.android.google.cn/guide/components/services" target="_blank" rel="external">IntentService</a>ï¼Œé™åˆ¶æœåŠ¡å¯¿å‘½ï¼Œæ‰€æœ‰è¯·æ±‚å¤„ç†å®Œæˆåï¼ŒIntentService ä¼šè‡ªåŠ¨åœæ­¢ã€‚</p>
<h5 id="ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨"><a href="#ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨" class="headerlink" title="ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨"></a>ä½¿ç”¨ä¼˜åŒ–åçš„æ•°æ®å®¹å™¨</h5><p>è€ƒè™‘ä½¿ç”¨ä¼˜åŒ–è¿‡æ•°æ®çš„å®¹å™¨ SparseArray / SparseBooleanArray / LongSparseArray ä»£æ›¿ HashMap ç­‰ä¼ ç»Ÿæ•°æ®ç»“æ„ï¼Œé€šç”¨ HashMap çš„å®ç°å¯ä»¥è¯´æ˜¯ç›¸å½“ä½æ•ˆçš„å†…å­˜ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸ºæ¯ä¸ªæ˜ å°„ä¸€ä¸ªå•ç‹¬çš„æ¡ç›®å¯¹è±¡</p>
<p>å…³äºHashMapï¼ŒArrayMapï¼ŒSparseArray, <a href="https://www.jianshu.com/p/7b9a1b386265" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>æœ‰ä¸ªæ¯”è¾ƒç›´è§‚çš„æ¯”è¾ƒ, å¯ä»¥çœ‹ä¸‹</p>
<h5 id="å°‘ç”¨æšä¸¾enumç»“æ„"><a href="#å°‘ç”¨æšä¸¾enumç»“æ„" class="headerlink" title="å°‘ç”¨æšä¸¾enumç»“æ„"></a>å°‘ç”¨æšä¸¾enumç»“æ„</h5><p>æšä¸¾ä¸€èˆ¬æ˜¯ç”¨æ¥åˆ—ä¸¾ä¸€ç³»åˆ—ç›¸åŒç±»å‹çš„å¸¸é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨æšä¸¾èƒ½å¤Ÿç¡®ä¿å‚æ•°çš„å®‰å…¨æ€§ã€‚ä½†æ˜¯Androidå¼€å‘æ–‡æ¡£ä¸ŠæŒ‡å‡ºï¼Œä½¿ç”¨æšä¸¾ä¼šæ¯”ä½¿ç”¨é™æ€å˜é‡å¤šæ¶ˆè€—ä¸¤å€çš„å†…å­˜ï¼Œåº”è¯¥å°½é‡é¿å…åœ¨Androidä¸­ä½¿ç”¨æšä¸¾ã€‚</p>
<p>é‚£ä¹ˆæšä¸¾ä¸ºä»€ä¹ˆä¼šæ›´æ¶ˆè€—å†…å­˜å‘¢ï¼Ÿ - <a href="https://blog.csdn.net/xiao_nian/article/details/80002101" target="_blank" rel="external">åˆ†æé“¾æ¥</a></p>
<h5 id="é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡"><a href="#é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡" class="headerlink" title="é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡"></a>é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡</h5><p>è¯¸å¦‚ä¸€äº›ä¸´æ—¶å¯¹è±¡, ç‰¹åˆ«æ˜¯å¾ªç¯ä¸­çš„.</p>
<h5 id="ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ"><a href="#ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ" class="headerlink" title="ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ"></a>ä½¿ç”¨å¼‚æ­¥å¤„ç†æ•°æ®è¾ƒå¤šçš„æƒ…å†µ</h5><p>å¦‚æœä¸€äº›æ•°æ®éœ€è¦å¤„ç†å†æ˜¾ç¤ºåœ¨UIä¸Šï¼Œå¯¹äºæ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µå¼ºçƒˆå»ºè®®å¼‚æ­¥å¤„ç†åå†åœ¨ä¸»çº¿ç¨‹å¤„ç†ã€‚</p>
<h5 id="ä½¿ç”¨-nano-protobufs-åºåˆ—åŒ–æ•°æ®"><a href="#ä½¿ç”¨-nano-protobufs-åºåˆ—åŒ–æ•°æ®" class="headerlink" title="ä½¿ç”¨ nano protobufs åºåˆ—åŒ–æ•°æ®"></a>ä½¿ç”¨ nano protobufs åºåˆ—åŒ–æ•°æ®</h5><p>Protocol buffers æ˜¯ä¸€ä¸ªè¯­è¨€ä¸­ç«‹ï¼Œå¹³å°ä¸­ç«‹çš„ï¼Œå¯æ‰©å±•çš„æœºåˆ¶ï¼Œç”±è°·æ­Œè¿›è¡Œåºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®ï¼Œç±»ä¼¼äº XML è®¾è®¡çš„ï¼Œä½†æ˜¯æ›´å°ï¼Œæ›´å¿«ï¼Œæ›´ç®€å•ã€‚å¦‚æœéœ€è¦ä¸ºæ‚¨çš„æ•°æ®åºåˆ—åŒ–ä¸åè®®åŒ–ï¼Œå»ºè®®ä½¿ç”¨ nano protobufsã€‚</p>
<h5 id="ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç "><a href="#ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç " class="headerlink" title="ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç "></a>ä½¿ç”¨ProGuardæ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç </h5><p>ä½¿ç”¨ ProGuard æ¥å‰”é™¤ä¸éœ€è¦çš„ä»£ç ï¼Œç§»é™¤ä»»ä½•å†—ä½™çš„ï¼Œä¸å¿…è¦çš„ï¼Œæˆ–è‡ƒè‚¿çš„ç»„ä»¶ï¼Œèµ„æºæˆ–åº“å®Œå–„ APP çš„å†…å­˜æ¶ˆè€—ã€‚</p>
<h5 id="é™ä½æ•´ä½“å°ºå¯¸APK"><a href="#é™ä½æ•´ä½“å°ºå¯¸APK" class="headerlink" title="é™ä½æ•´ä½“å°ºå¯¸APK"></a>é™ä½æ•´ä½“å°ºå¯¸APK</h5><p>æ‚¨å¯ä»¥é€šè¿‡å‡å°‘ APP çš„æ•´ä½“è§„æ¨¡æ˜¾è‘—å‡å°‘ APP çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚æ–‡ç« ï¼š<a href="http://wuxiaolong.me/2017/03/19/ReduceAPKSize/" target="_blank" rel="external">Android APKç˜¦èº«å®è·µ</a></p>
<h5 id="ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡"><a href="#ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡" class="headerlink" title="ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡"></a>ä¼˜åŒ–å¸ƒå±€å±‚æ¬¡</h5><p>é€šè¿‡ä¼˜åŒ–è§†å›¾å±‚æ¬¡ç»“æ„ï¼Œä»¥å‡å°‘é‡å çš„ UI å¯¹è±¡çš„æ•°é‡æ¥æé«˜æ€§èƒ½ã€‚æ–‡ç« ï¼š<a href="http://wuxiaolong.me/2017/03/26/Rendering/" target="_blank" rel="external">Android æ¸²æŸ“ä¼˜åŒ–</a></p>
<h3 id="æ£€æµ‹å·¥å…·"><a href="#æ£€æµ‹å·¥å…·" class="headerlink" title="æ£€æµ‹å·¥å…·"></a>æ£€æµ‹å·¥å…·</h3><ul>
<li><a href="https://github.com/square/leakcanary" target="_blank" rel="external">leakcanary</a></li>
</ul>
<h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul>
<li><a href="http://www.trinea.cn/android/performance/" target="_blank" rel="external">æ€§èƒ½ä¼˜åŒ–ç³»åˆ—æ€»ç¯‡</a></li>
<li><a href="https://blog.csdn.net/ys408973279/article/details/50389200" target="_blank" rel="external">Androidå†…å­˜ä¼˜åŒ–ä¹‹â€”â€”staticä½¿ç”¨ç¯‡</a></li>
<li><a href="https://gist.github.com/yangdm0209/ded1d6fe2d7724070b3af87caa5515c2" target="_blank" rel="external">Android ä¸­handlerçš„HandlerLeaké—®é¢˜</a></li>
<li><a href="https://blog.csdn.net/sanjay_f/article/details/50208847" target="_blank" rel="external">æºç æ¢ç´¢ç³»åˆ—1â€”Handlerä¸HandlerLeakçš„é‚£äº›äº‹</a></li>
<li><a href="http://lipeng1667.github.io/2016/08/06/memory-optimisation-for-webview-in-android/" target="_blank" rel="external">WebViewå†…å­˜æ³„æ¼ä¼˜åŒ–ä¹‹è·¯</a></li>
<li><a href="https://blog.csdn.net/u_xtian/article/details/6123945" target="_blank" rel="external">å…³äºandroid.view.WindowLeakedçš„è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="http://wuxiaolong.me/2017/04/15/memory/" target="_blank" rel="external">Android å†…å­˜ä¼˜åŒ–</a></li>
<li><a href="http://weishu.me/2016/10/13/sharedpreference-advices/" target="_blank" rel="external">è¯·ä¸è¦æ»¥ç”¨SharedPreference</a></li>
</ul>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">æ”¯æŒä¸€ä¸‹</span>
      <div class="donation-body">
        <div class="tip text-center">æ‰«ä¸€æ‰«ï¼Œæ”¯æŒæˆ‘</div>
        <ul>
        
          <li class="item">
            
              <span>å¾®ä¿¡æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/Wechat-admire.jpg" alt="">
          </li>
        
          <li class="item">
            
              <span>æ”¯ä»˜å®æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/alipay-admire.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2018/06/13/buying-a-house-in-wuhan/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2018/07/02/deeplink-intro-use/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">å…³é—­</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/categories/Android/"
              rel="noopener noreferrer"
              target="_self"
              >
              åˆ†ç±»
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/Android/"
              rel="noopener noreferrer"
              target="_self"
              >
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/project/"
              rel="noopener noreferrer"
              target="_self"
              >
              é¡¹ç›®
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              å‹é“¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              å…³äº
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/music.html"
              rel="noopener noreferrer"
              target="_self"
              >
              ğŸµ
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalkè¯„è®ºæ’ä»¶é€šç”¨ä»£ç  -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '2b303b849c8ea65e4051',
  clientSecret: '57fc88550a6d86d10a191bb7b6411072576c00b3',
  repo: 'blog-comment',
  owner: 'youlookwhat',
  // åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸‹æˆªå–å‰50ä¸ªå­—ç¬¦ä¸², è¿™æ˜¯å› ä¸º github å¯¹ label çš„é•¿åº¦æœ‰äº†è¦æ±‚, å¦‚æœè¶…è¿‡
  // 50ä¸ªå­—ç¬¦ä¸²åˆ™ä¼šæŠ¥é”™.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['youlookwhat'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalkä»£ç ç»“æŸ -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
