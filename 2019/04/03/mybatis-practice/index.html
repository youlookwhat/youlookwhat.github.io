<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Mybatis æ¡†æ¶å®æˆ˜ | JinBeen&#39;s Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="MySql," />
  

  <meta name="description" content="æˆ‘ä»¬å®¹æ˜“å¿½è§†æ…¢å˜é‡ï¼Œä½†æ…¢å˜é‡æ‰æ˜¯ç‰µå¼•å†å²è¿›ç¨‹çš„ç«è½¦å¤´ã€‚ - ä½•å¸†/å˜é‡">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatis æ¡†æ¶å®æˆ˜">
<meta property="og:url" content="http://jinbeen.com/2019/04/03/mybatis-practice/index.html">
<meta property="og:site_name" content="JinBeen's Blog">
<meta property="og:description" content="æˆ‘ä»¬å®¹æ˜“å¿½è§†æ…¢å˜é‡ï¼Œä½†æ…¢å˜é‡æ‰æ˜¯ç‰µå¼•å†å²è¿›ç¨‹çš„ç«è½¦å¤´ã€‚ - ä½•å¸†/å˜é‡">
<meta property="og:updated_time" content="2019-04-10T14:49:09.907Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mybatis æ¡†æ¶å®æˆ˜">
<meta name="twitter:description" content="æˆ‘ä»¬å®¹æ˜“å¿½è§†æ…¢å˜é‡ï¼Œä½†æ…¢å˜é‡æ‰æ˜¯ç‰µå¼•å†å²è¿›ç¨‹çš„ç«è½¦å¤´ã€‚ - ä½•å¸†/å˜é‡">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'G-91L2DT6NQB', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?643275289e816ea38d7a840456d91ebd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">ç›’å­</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">ç›’å­</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/categories/Android"
            rel="noopener noreferrer"
            target="_self"
            >
            åˆ†ç±»
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/Android"
            rel="noopener noreferrer"
            target="_self"
            >
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/project"
            rel="noopener noreferrer"
            target="_self"
            >
            é¡¹ç›®
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            å‹é“¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            å…³äº
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/music.html"
            rel="noopener noreferrer"
            target="_self"
            >
            ğŸµ
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-åˆ›å»ºé¡¹ç›®mubatis-01"><span class="toc-text">1.åˆ›å»ºé¡¹ç›®mubatis-01</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å¯¼å…¥jar"><span class="toc-text">2.å¯¼å…¥jar:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-åŠ å…¥é…ç½®æ–‡ä»¶"><span class="toc-text">3.åŠ å…¥é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ç¼–å†™æ¥å£ï¼šBlogMapper"><span class="toc-text">4.ç¼–å†™æ¥å£ï¼šBlogMapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-åˆ›å»ºpojoï¼šBlog"><span class="toc-text">5.åˆ›å»ºpojoï¼šBlog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil"><span class="toc-text">6.åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ç¼–å†™æµ‹è¯•ç±»ï¼š"><span class="toc-text">7.ç¼–å†™æµ‹è¯•ç±»ï¼š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ"><span class="toc-text">8.åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-æ¨¡ç³ŠæŸ¥è¯¢ä¹‹-å’Œ-çš„åŒºåˆ«"><span class="toc-text">9.æ¨¡ç³ŠæŸ¥è¯¢ä¹‹#å’Œ$çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-æŸ¥è¯¢æ’åº"><span class="toc-text">10.æŸ¥è¯¢æ’åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’"><span class="toc-text">11.åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id"><span class="toc-text">12.æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜"><span class="toc-text">13.ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-åˆ é™¤è®°å½•"><span class="toc-text">14.åˆ é™¤è®°å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-if"><span class="toc-text">15.if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-chooseã€whenã€otherwise"><span class="toc-text">16.chooseã€whenã€otherwise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-where"><span class="toc-text">17.where</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-set"><span class="toc-text">18.set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-trim"><span class="toc-text">19.trim</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-foreach"><span class="toc-text">20.foreach</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-sqlç‰‡æ®µ"><span class="toc-text">21.sqlç‰‡æ®µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-23-é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ"><span class="toc-text">22 23.é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-ç¼“å­˜-mybatisçš„ä¸€çº§ç¼“å­˜"><span class="toc-text">24.ç¼“å­˜ - mybatisçš„ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-ç¼“å­˜-ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"><span class="toc-text">25.ç¼“å­˜ - ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-ç¼“å­˜-å¼€å¯äºŒçº§ç¼“å­˜"><span class="toc-text">26.ç¼“å­˜ - å¼€å¯äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-ç¼“å­˜-äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"><span class="toc-text">27.ç¼“å­˜ - äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€"><span class="toc-text">28.åµŒå¥—æŸ¥è¯¢ - ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-åµŒå¥—æŸ¥è¯¢-æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨"><span class="toc-text">29.åµŒå¥—æŸ¥è¯¢ - æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½®-31-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®"><span class="toc-text">30.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½® 31.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ"><span class="toc-text">32.é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†-34-æ‰©å±•ç»“æœçš„å®ç°"><span class="toc-text">33.ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†|34.æ‰©å±•ç»“æœçš„å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#35-é«˜çº§ç»“æœæ˜ å°„-æ„é€ æ–¹å¼æ˜ å°„"><span class="toc-text">35.é«˜çº§ç»“æœæ˜ å°„ - æ„é€ æ–¹å¼æ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-é‰´åˆ«å™¨"><span class="toc-text">36.é‰´åˆ«å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#37-å»¶è¿ŸåŠ è½½-ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ"><span class="toc-text">37.å»¶è¿ŸåŠ è½½ - ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#38-å»¶è¿ŸåŠ è½½-é…ç½®lazyloadingenabled"><span class="toc-text">38.å»¶è¿ŸåŠ è½½ - é…ç½®lazyloadingenabled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#39-å»¶è¿ŸåŠ è½½-æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ"><span class="toc-text">39.å»¶è¿ŸåŠ è½½ - æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#40-å»¶è¿ŸåŠ è½½-ç§¯æçš„å»¶è¿ŸåŠ è½½"><span class="toc-text">40.å»¶è¿ŸåŠ è½½ - ç§¯æçš„å»¶è¿ŸåŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#41-å»¶è¿ŸåŠ è½½-éç§¯æå»¶è¿ŸåŠ è½½"><span class="toc-text">41.å»¶è¿ŸåŠ è½½ - éç§¯æå»¶è¿ŸåŠ è½½</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Mybatis æ¡†æ¶å®æˆ˜" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Mybatis æ¡†æ¶å®æˆ˜</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2019.04.03</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>JinBeen</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Javaåç«¯/">Javaåç«¯</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbspçƒ­åº¦ <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>â„ƒ
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <blockquote>
<p>æˆ‘ä»¬å®¹æ˜“å¿½è§†æ…¢å˜é‡ï¼Œä½†æ…¢å˜é‡æ‰æ˜¯ç‰µå¼•å†å²è¿›ç¨‹çš„ç«è½¦å¤´ã€‚ - ä½•å¸†/å˜é‡</p>
</blockquote>
<a id="more"></a>
<ul>
<li>Mybatis æŒä¹…å±‚ï¼šç®€åŒ–å·¥ä½œé‡ã€çµæ´»</li>
<li>Spring ç²˜åˆå‰‚ï¼šæ•´åˆæ¡†æ¶ AOP IOC DI</li>
<li>SpringMvc è¡¨ç°å±‚ï¼šæ–¹ä¾¿å‰åç«¯æ•°æ®çš„ä¼ è¾“</li>
</ul>
<p>Mybatis:</p>
<ul>
<li>1.æ˜¯å¯¹jdbcçš„å°è£…ï¼Œ</li>
<li>2.å°†sqlè¯­å¥æ”¾åœ¨æ˜ å°„æ–‡ä»¶ä¸­(xml)ï¼Œ</li>
<li>3.è‡ªåŠ¨å°†è¾“å…¥å‚æ•°æ˜ å°„åˆ°sqlè¯­å¥çš„åŠ¨æ€å‚æ•°ä¸Šï¼Œ</li>
<li>4.è‡ªåŠ¨å°†sqlè¯­å¥æ‰§è¡Œçš„ç»“æœæ˜ å°„æˆjavaå¯¹è±¡</li>
</ul>
<p>å…¥é—¨ç¤ºä¾‹ï¼š</p>
<h3 id="1-åˆ›å»ºé¡¹ç›®mubatis-01"><a href="#1-åˆ›å»ºé¡¹ç›®mubatis-01" class="headerlink" title="1.åˆ›å»ºé¡¹ç›®mubatis-01"></a>1.åˆ›å»ºé¡¹ç›®mubatis-01</h3><h3 id="2-å¯¼å…¥jar"><a href="#2-å¯¼å…¥jar" class="headerlink" title="2.å¯¼å…¥jar:"></a>2.å¯¼å…¥jar:</h3><ul>
<li>mybatis-3.2.8</li>
<li>mysql-connect</li>
<li>log4j-1.2.17</li>
</ul>
<h3 id="3-åŠ å…¥é…ç½®æ–‡ä»¶"><a href="#3-åŠ å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="3.åŠ å…¥é…ç½®æ–‡ä»¶"></a>3.åŠ å…¥é…ç½®æ–‡ä»¶</h3><p>(1)db.properties</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</div><div class="line">jdbc.url = jdbc:mysql:<span class="comment">//localhost:3306/mysql_0219</span></div><div class="line">jdbc.username = root</div><div class="line">jdbc.password = <span class="number">123456</span></div></pre></td></tr></table></figure>
<p>(2)log4j.properties<br><a href="https://blog.csdn.net/sinat_30185177/article/details/73550377" target="_blank" rel="external">https://blog.csdn.net/sinat_30185177/article/details/73550377</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">log4j.rootLogger=DEBUG,A1</div><div class="line">log4j.logger.org.mybatis=DEBUG</div><div class="line">...</div></pre></td></tr></table></figure>
<p>(3) mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼šmybatis-config.xml</p>
<p>(4) BlogMapper.xml</p>
<p>åŒ…:com.jingbin.mybatis.mapper</p>
<h3 id="4-ç¼–å†™æ¥å£ï¼šBlogMapper"><a href="#4-ç¼–å†™æ¥å£ï¼šBlogMapper" class="headerlink" title="4.ç¼–å†™æ¥å£ï¼šBlogMapper"></a>4.ç¼–å†™æ¥å£ï¼šBlogMapper</h3><h3 id="5-åˆ›å»ºpojoï¼šBlog"><a href="#5-åˆ›å»ºpojoï¼šBlog" class="headerlink" title="5.åˆ›å»ºpojoï¼šBlog"></a>5.åˆ›å»ºpojoï¼šBlog</h3><h3 id="6-åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil"><a href="#6-åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil" class="headerlink" title="6.åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil"></a>6.åˆ›å»ºå·¥å…·ç±»ï¼šMyBatisUtil</h3><h3 id="7-ç¼–å†™æµ‹è¯•ç±»ï¼š"><a href="#7-ç¼–å†™æµ‹è¯•ç±»ï¼š" class="headerlink" title="7.ç¼–å†™æµ‹è¯•ç±»ï¼š"></a>7.ç¼–å†™æµ‹è¯•ç±»ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">testSelectBlog</div><div class="line">å‘ç°è¦è¿æ¥æ•°æ®åº“ï¼Œå­¦ä¹ mysqlå†…å®¹</div><div class="line">å­¦ä¹ é…ç½®å¥½äº†åï¼šè¿è¡ŒæŠ¥é”™ï¼šInvalid bound statement (not found): mapper.BlogMapper.selectBlog</div><div class="line">è§£å†³ï¼šhttps://www.cnblogs.com/cailijuan/p/9505244.html</div><div class="line">1)ä½¿ç”¨åˆ›å»ºæ¥å£çš„æ–¹å¼</div><div class="line">2)ä¸æ˜¯ç”¨æ¥å£çš„æ–¹å¼</div></pre></td></tr></table></figure>
<h3 id="8-åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ"><a href="#8-åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ" class="headerlink" title="8.åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ"></a>8.åˆ—åå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ</h3><p>æ•°æ®åº“é‡Œçš„åˆ—åä¸ºauthor_id,å±æ€§åä¸ºauthorIdã€‚åœ¨BlogMapper.xmlé‡Œï¼š</p>
<p>1.ä½¿ç”¨åˆ«å</p>
<p><code>select author_id as authorId from Blog where id=#{id}</code></p>
<p>2.ä½¿ç”¨ resultMap</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap type="Blog" id="blogResultMap"&gt;</div><div class="line">		&lt;id column="id" property="id" jdbcType="INTEGER"/&gt;</div><div class="line">      &lt;result column="author_id" property="authorId" jdbcType="INTEGER"/&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line"></div><div class="line">&lt;select id="selectBlog" parameterType="Integer" resultMap="blogResultMap"&gt;</div><div class="line">       select * from blog where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<h3 id="9-æ¨¡ç³ŠæŸ¥è¯¢ä¹‹-å’Œ-çš„åŒºåˆ«"><a href="#9-æ¨¡ç³ŠæŸ¥è¯¢ä¹‹-å’Œ-çš„åŒºåˆ«" class="headerlink" title="9.æ¨¡ç³ŠæŸ¥è¯¢ä¹‹#å’Œ$çš„åŒºåˆ«"></a>9.æ¨¡ç³ŠæŸ¥è¯¢ä¹‹<code>#</code>å’Œ<code>$</code>çš„åŒºåˆ«</h3><p>æ¨¡ç³ŠæŸ¥è¯¢ï¼šæ ¹æ®åšå®¢åå­—æŸ¥è¯¢åšå®¢åˆ—è¡¨</p>
<p>1)ä½¿ç”¨<code>#</code>ä¼ å‚<br>2)ä½¿ç”¨<code>$</code>ä¼ å‚</p>
<p><code>#</code>æ˜¯å ä½ç¬¦ï¼Ÿï¼Œ<code>$</code>æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ã€‚</p>
<p>mybatiså®šä¹‰ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>$</code>ã€‚å¦‚æœå‚æ•°æ˜¯å•æŒ‡ç±»å‹(ç®€å•ç±»å‹)ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™èŠ±æ‹¬å·é‡Œåªèƒ½å†™valueå ä½ã€‚</li>
<li>ä½¿ç”¨<code>$</code>å¯ä»¥ç›´æ¥å°†<code>%</code>å†™é‡Œé¢ï¼Œå¯èƒ½æœ‰sqlæ³¨å…¥çš„é£é™©ï¼Œå»ºè®®æœ€å¥½ä½¿ç”¨<code>#</code>ã€‚å‚æ•°æ˜¯å­—ç¬¦ä¸²è¦ä½¿ç”¨ â€˜â€™</li>
<li>å½“å‚æ•°è¡¨ç¤ºè¡¨åæˆ–åˆ—åçš„æ—¶å€™ï¼Œåªèƒ½ä½¿ç”¨<code>$</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;!-- ä½¿ç”¨ $ ä¸åŒºåˆ†å¤§å°å†™çš„æŸ¥è¯¢ lower--&gt;</div><div class="line">    &lt;select id=<span class="string">"selectBlogByTitle2"</span> parameterType=<span class="string">"string"</span> resultType=<span class="string">"Blog"</span>&gt;</div><div class="line">            select * <span class="function">from blog where <span class="title">lower</span><span class="params">(title)</span> like <span class="title">lower</span><span class="params">(<span class="string">'%$&#123;value&#125;%'</span>)</span></span></div><div class="line">    &lt;/select&gt;</div><div class="line">&lt;/mapper&gt;</div></pre></td></tr></table></figure>
<h3 id="10-æŸ¥è¯¢æ’åº"><a href="#10-æŸ¥è¯¢æ’åº" class="headerlink" title="10.æŸ¥è¯¢æ’åº"></a>10.æŸ¥è¯¢æ’åº</h3><p>éœ€æ±‚ï¼šæŒ‰ç…§æŸä¸€åˆ—æ’åº</p>
<p>select * from blog order by CONVERT(${value} USING gbk)</p>
<p>gbk:è¾“å…¥ä¸­æ–‡æ—¶æ’åºæˆåŠŸï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚ä¸”ä½¿ç”¨gbkè§„é¿é­…æ—(gb2313)ä¸æ’åºé—®é¢˜ã€‚</p>
<h3 id="11-åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’"><a href="#11-åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’" class="headerlink" title="11.åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’"></a>11.åˆ†é¡µ-å¤šå‚æ•°ä¼ é€’</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢åˆ†é¡µæ•°æ®</p>
<ul>
<li>1ï¼‰ä½¿ç”¨ç´¢å¼•</li>
</ul>
<p>æŒ‰ç…§å‚æ•°çš„é¡ºåºï¼Œä»0å¼€å§‹</p>
<p>select * from blog limit #{0}, #{1}</p>
<ul>
<li>2ï¼‰ä½¿ç”¨æ³¨è§£</li>
</ul>
<p>æ³¨è§£çš„valueå€¼è¦å’Œmapperçš„å ä½å‚æ•°ä¸€è‡´ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">select * from blog limit #&#123;offset&#125;, #&#123;pageSize&#125;</div><div class="line">List&lt;Blog&gt; selectBlogByPage2(@Param(value = "offset") int offset, @Param(value = "pageSize") int pageSize);</div></pre></td></tr></table></figure>
<ul>
<li>3ï¼‰ä½¿ç”¨map(å¸¸ç”¨)</li>
</ul>
<p>æ³¨æ„ï¼šmapperä¸­çš„å‚æ•°å ä½ç¬¦è¦å’Œæµ‹è¯•ä¸­çš„mapçš„keyä¸€ä¸€å¯¹åº”</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">select * from blog limit #&#123;offset&#125;, #&#123;pageSize&#125;</div><div class="line">// æµ‹è¯•</div><div class="line">SqlSession session = MyBatisUtil.getSqlSession();</div><div class="line">BlogMapper blogMapper = session.getMapper(BlogMapper.class);</div><div class="line">Map&lt;String, Object&gt; objectMap = new HashMap&lt;&gt;();</div><div class="line">objectMap.put("offset", 0);</div><div class="line">objectMap.put("pageSize", 2);</div><div class="line">List&lt;Blog&gt; blogList = blogMapper.selectBlogByPage3(objectMap);</div></pre></td></tr></table></figure>
<h3 id="12-æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id"><a href="#12-æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id" class="headerlink" title="12.æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id"></a>12.æ’å…¥åŠŸèƒ½å’Œè·å–åˆšåˆšæ’å…¥çš„id</h3><ul>
<li>1)æ’å…¥è®°å½•</li>
</ul>
<p>éœ€æ±‚ï¼šæ–°å¢ä¸€ä¸ªåšå®¢è®°å½•</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;insert id="insertBlog" parameterType="Blog"&gt;</div><div class="line">        insert into `blog`(</div><div class="line">          `name`,</div><div class="line">          `age`,</div><div class="line">          `title`,</div><div class="line">          `author_id`,</div><div class="line">          `featured`</div><div class="line">        ) values (</div><div class="line">          #&#123;name&#125;,</div><div class="line">          #&#123;age&#125;,</div><div class="line">          #&#123;title&#125;,</div><div class="line">          #&#123;author_id&#125;,</div><div class="line">          #&#123;featured&#125;</div><div class="line">        )</div><div class="line">    &lt;/insert&gt;</div><div class="line">    </div><div class="line">// æäº¤</div><div class="line">session.commit();</div></pre></td></tr></table></figure>
<ul>
<li>2ï¼‰è·å–è‡ªå¢id<br>æ–¹å¼1ï¼šåœ¨mapperä¸­é…ç½®<code>insert</code>èŠ‚ç‚¹çš„å±æ€§ <code>useGeneratedKeys</code>å’Œ<code>keyProperty</code>èŠ‚ç‚¹<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;insert id=<span class="string">"insertBlog"</span> parameterType=<span class="string">"Blog"</span> useGeneratedKeys=<span class="string">"true"</span> keyProperty=<span class="string">"id"</span>/&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ–¹å¼2ï¼šåœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­é…ç½®setting<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;!--å®šä¹‰æ•°æ®åº“é“¾æ¥é…ç½®--&gt;</div><div class="line">    &lt;properties resource="db.properties"/&gt;</div><div class="line">    </div><div class="line">&lt;!--å…·ä½“çš„insertä¹Ÿå¾—é…ç½® keyPropertyèŠ‚ç‚¹--&gt;</div><div class="line">    &lt;settings&gt;</div><div class="line">        &lt;setting name="useGeneratedKeys" value="true"/&gt;</div><div class="line">    &lt;/settings&gt;</div></pre></td></tr></table></figure></p>
<p>æ–¹å¼3ï¼šé€‚ç”¨äºæ²¡æœ‰è‡ªå¢ä¸»é”®çš„æ•°æ®åº“</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;insert id="insertBlogOracle" parameterType="Blog"&gt;</div><div class="line">        &lt;selectKey resultType="java.lang.Integer" order="BEFORE" keyProperty="id"&gt;</div><div class="line">            select seq.nextval as id from dual</div><div class="line">        &lt;/selectKey&gt;</div><div class="line">        insert into `blog`(</div><div class="line">          `name`,</div><div class="line">          `age`,</div><div class="line">          `title`,</div><div class="line">          `author_id`,</div><div class="line">          `featured`</div><div class="line">        ) values (</div><div class="line">          #&#123;name&#125;,</div><div class="line">          #&#123;age&#125;,</div><div class="line">          #&#123;title&#125;,</div><div class="line">          #&#123;author_id&#125;,</div><div class="line">          #&#123;featured&#125;</div><div class="line">        )</div><div class="line">    &lt;/insert&gt;</div><div class="line"></div><div class="line">    &lt;insert id="insertBlogMysql" parameterType="Blog"&gt;</div><div class="line">        &lt;selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id"&gt;</div><div class="line">            SELECT LAST_INSERT_ID()</div><div class="line">        &lt;/selectKey&gt;</div><div class="line"></div><div class="line">        insert into `blog`(</div><div class="line">        `name`,</div><div class="line">        `age`,</div><div class="line">        `title`,</div><div class="line">        `author_id`,</div><div class="line">        `featured`</div><div class="line">        ) values (</div><div class="line">        #&#123;name&#125;,</div><div class="line">        #&#123;age&#125;,</div><div class="line">        #&#123;title&#125;,</div><div class="line">        #&#123;author_id&#125;,</div><div class="line">        #&#123;featured&#125;</div><div class="line">        )</div><div class="line">    &lt;/insert&gt;</div></pre></td></tr></table></figure>
<h3 id="13-ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜"><a href="#13-ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜" class="headerlink" title="13.ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜"></a>13.ä¿®æ”¹åŠŸèƒ½å’Œä¿®æ”¹éƒ¨åˆ†å­—æ®µæ³¨æ„çš„é—®é¢˜</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;update id="updateBlog" parameterType="Blog"&gt;</div><div class="line">        update `blog`</div><div class="line">        set</div><div class="line">        `name` = #&#123;name&#125;,</div><div class="line">        `age` = #&#123;age&#125;,</div><div class="line">        `title` = #&#123;title&#125;,</div><div class="line">        `author_id` = #&#123;author_id&#125;,</div><div class="line">        `featured` = #&#123;featured&#125;</div><div class="line">        where</div><div class="line">        `id` = #&#123;id&#125;</div><div class="line">    &lt;/update&gt;</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰ä¸ºå¯¹è±¡è®¾ç½®æ‰€æœ‰çš„è¦ä¿®æ”¹çš„å±æ€§ï¼Œé‚£ä¹ˆæœªè®¾ç½®çš„å±æ€§ä¼šç”¨æˆå‘˜å˜é‡çš„é»˜è®¤å€¼å¡«å……ã€‚<br>è§£å†³ï¼š<br>æ–¹å¼1ï¼šæ•°æ®åº“æŸ¥ä¸€éï¼Œå†è¿”å›çš„æ•°æ®ä¿®æ”¹ã€‚ç¼ºç‚¹ï¼šåˆæ‰§è¡Œäº†ä¸€éæ•°æ®åº“æ“ä½œ<br>æ–¹å¼2ï¼šæŸ¥è¯¢è¯­å¥é‡Œå¢åŠ if elseã€‚</p>
<h3 id="14-åˆ é™¤è®°å½•"><a href="#14-åˆ é™¤è®°å½•" class="headerlink" title="14.åˆ é™¤è®°å½•"></a>14.åˆ é™¤è®°å½•</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;delete id="deleteBlogById"&gt;</div><div class="line">  delete from blog where id=#&#123;id&#125;</div><div class="line">&lt;/delete&gt;</div></pre></td></tr></table></figure>
<p>åŠ¨æ€sql<br>æ‰¹é‡åˆ é™¤ï¼šä½¿ç”¨åŠ¨æ€sqlå®ç°<br>ifã€[chooseã€whenã€otherwise]ã€whereã€setã€trimã€foreachã€sqlç‰‡æ®µ</p>
<h3 id="15-if"><a href="#15-if" class="headerlink" title="15.if"></a>15.if</h3><p>éœ€æ±‚ï¼š</p>
<ul>
<li>1.æŸ¥è¯¢å·²æ¿€æ´»çš„å¹¶ä¸”åšå®¢çš„åå­—æ˜¯åŒ…å«æŸä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²çš„è®°å½•</li>
<li>2.å¦‚æœç”¨æˆ·æ²¡æœ‰è¾“å…¥ä»»ä½•æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±æ˜¾ç¤ºæ‰€æœ‰å·²æ¿€æ´»çš„è®°å½•</li>
</ul>
<p>// å¦‚æœç”¨æˆ·è¾“å…¥äº†æŸ¥è¯¢å­—ç¬¦ä¸²<br>select * from blog<br>where state = â€˜ACTIVEâ€™<br>and title like  â€˜%o%â€™</p>
<p>// ç”¨æˆ·æ²¡æœ‰è¾“å…¥æŸ¥è¯¢å­—ç¬¦ä¸²<br>select * from blog<br>where state = â€˜ACTIVEâ€™</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">select * from blog</div><div class="line">where state = 'ACTIVE' </div><div class="line">&lt;if test="value != null and value!=''"&gt;</div><div class="line">   and title like value[%%] å…·ä½“è§ä»£ç </div><div class="line">&lt;/if&gt;</div></pre></td></tr></table></figure>
<h3 id="16-chooseã€whenã€otherwise"><a href="#16-chooseã€whenã€otherwise" class="headerlink" title="16.chooseã€whenã€otherwise"></a>16.chooseã€whenã€otherwise</h3><p>éœ€æ±‚ï¼š</p>
<ul>
<li>1ã€æŸ¥è¯¢å·²æ¿€æ´»çš„</li>
<li>2ã€å¦‚æœç”¨æˆ·è¾“å…¥äº†æ ‡é¢˜çš„æŸ¥è¯¢å…³é”®å­—ï¼Œåˆ™æ ¹æ®å…³é”®å­—æŸ¥è¯¢</li>
<li>3ã€å¦åˆ™æ ¹æ®blogé£æ ¼æ ·å¼æŸ¥è¯¢</li>
<li>4ã€å¦‚æœä»€ä¹ˆéƒ½æ²¡æœ‰è¾“å…¥ï¼Œåˆ™æ˜¾ç¤ºæ¨èçš„åšå®¢</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;select id="selectActiveBlogByTitleOrStyle" parameterType="Blog" resultType="Blog"&gt;</div><div class="line">    select * from blog</div><div class="line">    where state = 'ACTIVE'</div><div class="line">    &lt;choose&gt;</div><div class="line">        &lt;when test="title != null and title!=''"&gt;and lower(title) like lower(#&#123;title&#125;)&lt;/when&gt;</div><div class="line">        &lt;when test="style != null and style!=''"&gt;and style = #&#123;style&#125;&lt;/when&gt;</div><div class="line">        &lt;otherwise&gt; and featured = true&lt;/otherwise&gt;</div><div class="line">    &lt;/choose&gt;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<h3 id="17-where"><a href="#17-where" class="headerlink" title="17.where"></a>17.where</h3><p>éœ€æ±‚ï¼šå¤šæ¡ä»¶æŸ¥è¯¢ï¼Œæ ¹æ®çŠ¶æ€ï¼Œæ ‡é¢˜ï¼Œæ˜¯å¦è¢«æ¨è<br>è‡ªåŠ¨ä¿®è¡¥æŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢è¯­å¥ä¸­çš„whereå…³é”®å­—ä½¿ç”¨<where>æ ‡ç­¾æ›¿ä»£ï¼Œä¸èƒ½çœç•¥ and or å…³é”®å­—</where></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;select id="selectBlogByCondition" parameterType="Blog" resultType="Blog"&gt;</div><div class="line">    select * from blog</div><div class="line">    &lt;where&gt;</div><div class="line">        &lt;if test="state != null and state!=''"&gt;</div><div class="line">            state = #&#123;state&#125;</div><div class="line">        &lt;/if&gt;</div><div class="line">        &lt;if test="title != null and title!=''"&gt;</div><div class="line">            and lower(title) like lower(#&#123;title&#125;)</div><div class="line">        &lt;/if&gt;</div><div class="line">        &lt;if test="featured != null"&gt;</div><div class="line">            and featured = #&#123;featured&#125;</div><div class="line">        &lt;/if&gt;</div><div class="line">    &lt;/where&gt;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<h3 id="18-set"><a href="#18-set" class="headerlink" title="18.set"></a>18.set</h3><p>éœ€æ±‚ï¼šæŒ‰éœ€ä¿®æ”¹ï¼Œä¿®æ”¹æ‰§è¡Œçš„åˆ—ï¼ŒæœªæŒ‡å®šçš„ä¸ä¿®æ”¹<br>set ä¼šè‡ªåŠ¨å»æ‰ifè¯­å¥åé¢çš„é€—å·</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;update id="updateBlogByCondition" parameterType="Blog"&gt;</div><div class="line">    update `blog`</div><div class="line">    &lt;set&gt;</div><div class="line">        &lt;if test="name != null"&gt;`name` = #&#123;name&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="age != null"&gt;`age` = #&#123;age&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="title != null"&gt;`title` = #&#123;title&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="author_id != null"&gt;`author_id` = #&#123;author_id&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="featured != null"&gt;`featured` = #&#123;featured&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="state != null"&gt;`state` = #&#123;state&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="style != null"&gt;`style` = #&#123;state&#125;,&lt;/if&gt;</div><div class="line">    &lt;/set&gt;</div><div class="line">    where `id` = #&#123;id&#125;</div><div class="line">&lt;/update&gt;</div></pre></td></tr></table></figure>
<h3 id="19-trim"><a href="#19-trim" class="headerlink" title="19.trim"></a>19.trim</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;select id="selectBlogByConditionTrim" parameterType="Blog" resultType="Blog"&gt;</div><div class="line">    select * from blog</div><div class="line">    -- prefixOverrides å»æ‰å‰é¢çš„ and æˆ– or</div><div class="line">    &lt;trim prefix="where" prefixOverrides="and | or"&gt;</div><div class="line">        &lt;if test="state != null and state!=''"&gt;</div><div class="line">            state = #&#123;state&#125;</div><div class="line">        &lt;/if&gt;</div><div class="line">        &lt;if test="title != null and title!=''"&gt;</div><div class="line">            and lower(title) like lower(#&#123;title&#125;)</div><div class="line">        &lt;/if&gt;</div><div class="line">        &lt;if test="featured != null"&gt;</div><div class="line">            and featured = #&#123;featured&#125;</div><div class="line">        &lt;/if&gt;</div><div class="line">    &lt;/trim&gt;</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line">&lt;update id="updateBlogByConditionTrim" parameterType="Blog"&gt;</div><div class="line">    update `blog`</div><div class="line">    -- suffixOverrides å»æ‰åé¢çš„ ,</div><div class="line">    &lt;trim prefix="set" suffixOverrides=","&gt;</div><div class="line">        &lt;if test="name != null"&gt;`name` = #&#123;name&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="age != null"&gt;`age` = #&#123;age&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="title != null"&gt;`title` = #&#123;title&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="author_id != null"&gt;`author_id` = #&#123;author_id&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="featured != null"&gt;`featured` = #&#123;featured&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="state != null"&gt;`state` = #&#123;state&#125;,&lt;/if&gt;</div><div class="line">        &lt;if test="style != null"&gt;`style` = #&#123;state&#125;,&lt;/if&gt;</div><div class="line">    &lt;/trim&gt;</div><div class="line">    where `id` = #&#123;id&#125;</div><div class="line">&lt;/update&gt;</div></pre></td></tr></table></figure>
<h3 id="20-foreach"><a href="#20-foreach" class="headerlink" title="20.foreach"></a>20.foreach</h3><p>éœ€æ±‚ï¼šæ‰¹é‡åˆ é™¤</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> &lt;!-- parameterType ä¸ collection ä¸€è‡´--&gt;</div><div class="line">&lt;delete id="deleteBlogList" parameterType="list"&gt;</div><div class="line">    delete from blog where id in</div><div class="line">    &lt;foreach collection="list" item="item" open="(" close=")" separator=","&gt;</div><div class="line">        #&#123;item&#125;</div><div class="line">    &lt;/foreach&gt;</div><div class="line">&lt;/delete&gt;</div><div class="line"></div><div class="line">@Test</div><div class="line">public void testDeleteBlogList() &#123;</div><div class="line">    SqlSession session = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper = session.getMapper(BlogMapper.class);</div><div class="line">    List&lt;Integer&gt; asList = Arrays.asList(1, 2);</div><div class="line">    int count = blogMapper.deleteBlogList(asList);</div><div class="line">    // æäº¤</div><div class="line">    session.commit();</div><div class="line">    session.close();</div><div class="line">    System.out.println("æ›´æ–°äº†" + count + "æ¡è®°å½•");</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="21-sqlç‰‡æ®µ"><a href="#21-sqlç‰‡æ®µ" class="headerlink" title="21.sqlç‰‡æ®µ"></a>21.sqlç‰‡æ®µ</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;!--sqlç‰‡æ®µ--&gt;</div><div class="line">&lt;sql id="columnBase"&gt;</div><div class="line">      `id`,</div><div class="line">      `name`,</div><div class="line">      `age`,</div><div class="line">      `title`,</div><div class="line">      `author_id`,</div><div class="line">      `featured`,</div><div class="line">      `state`,</div><div class="line">      `style`</div><div class="line">&lt;/sql&gt;</div><div class="line"></div><div class="line">&lt;!--é€šè¿‡idæŸ¥è¯¢åšå®¢--&gt;</div><div class="line">&lt;select id="selectBlog" parameterType="Integer" resultType="Blog"&gt;</div><div class="line">    select</div><div class="line">    &lt;include refid="columnBase"/&gt;</div><div class="line">    from blog where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<h3 id="22-23-é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ"><a href="#22-23-é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ" class="headerlink" title="22 23.é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ"></a>22 23.é€†å‘åŠŸå·¥ç¨‹-ä»£ç çš„ç”Ÿæˆ</h3><p>ä½¿ç”¨ Mybatis å®˜æ–¹å·¥å…·ç›´æ¥ç”Ÿæˆå¯¹åº”çš„mapperæ–‡ä»¶<br>å…¨éƒ¨ç”Ÿæˆ - æ— å®é™…æ„ä¹‰ï¼Œå…·ä½“é¡¹ç›®ä¸­ä¸é€‚ç”¨</p>
<h3 id="24-ç¼“å­˜-mybatisçš„ä¸€çº§ç¼“å­˜"><a href="#24-ç¼“å­˜-mybatisçš„ä¸€çº§ç¼“å­˜" class="headerlink" title="24.ç¼“å­˜ - mybatisçš„ä¸€çº§ç¼“å­˜"></a>24.ç¼“å­˜ - mybatisçš„ä¸€çº§ç¼“å­˜</h3><p>ä¸€çº§ç¼“å­˜ï¼š<br>æ˜¯sessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜é»˜è®¤å­˜åœ¨ã€‚<br>å½“åœ¨åŒä¸€ä¸ªsessionèŒƒå›´å†…æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œå¦‚æœæ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡æŸ¥è¯¢ä¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * mybatisçš„ä¸€çº§ç¼“å­˜</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogCacheOne1</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper = session.getMapper(BlogMapper.class);</div><div class="line"></div><div class="line">    Blog blog1 = blogMapper.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog1);</div><div class="line">    Blog blog2 = blogMapper.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢ï¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®"</span> + blog2);</div><div class="line"></div><div class="line">    session.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"sessionå…³é—­"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="25-ç¼“å­˜-ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"><a href="#25-ç¼“å­˜-ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ" class="headerlink" title="25.ç¼“å­˜ - ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"></a>25.ç¼“å­˜ - ä¸€çº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ</h3><p>å¦‚æœä¸¤æ¬¡æŸ¥è¯¢ä¸­é—´æœ‰å¢åˆ æ”¹æ“ä½œï¼Œsql sessionç¼“å­˜åŒºä¼šè¢«è‡ªåŠ¨æ¸…ç©ºï¼Œè¯´æ˜ä¸‹ä¸€æ¬¡æŸ¥è¯¢ä¼šé‡æ–°æ‰§è¡Œsqlè¯­å¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * mybatisçš„ä¸€çº§ç¼“å­˜,ä¸­é—´æœ‰å¢åˆ æ”¹ä¼šåˆ·æ–°</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogCacheOne2</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper = session.getMapper(BlogMapper.class);</div><div class="line"></div><div class="line">    Blog blog1 = blogMapper.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog1);</div><div class="line">    blog1.setFeatured(<span class="keyword">true</span>);</div><div class="line">    blogMapper.updateBlog(blog1);</div><div class="line"></div><div class="line">    Blog blog2 = blogMapper.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢ï¼šä»æ–°æ‰§è¡ŒæŸ¥è¯¢"</span> + blog2);</div><div class="line"></div><div class="line">    session.commit();</div><div class="line">    session.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"sessionå…³é—­"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="26-ç¼“å­˜-å¼€å¯äºŒçº§ç¼“å­˜"><a href="#26-ç¼“å­˜-å¼€å¯äºŒçº§ç¼“å­˜" class="headerlink" title="26.ç¼“å­˜ - å¼€å¯äºŒçº§ç¼“å­˜"></a>26.ç¼“å­˜ - å¼€å¯äºŒçº§ç¼“å­˜</h3><p><strong>é»˜è®¤ä¸å¼€å¯</strong>ã€‚å¦‚æœåœ¨ä¸åŒçš„sessionèŒƒå›´å†…æ‰§è¡Œç›¸åŒçš„æ•°æ®æŸ¥è¯¢ï¼Œé‚£ä¹ˆæ¯æ¬¡æŸ¥è¯¢å°†ä¼šæ‰§è¡Œç‹¬ç«‹çš„æ•°æ®åº“æ£€ç´¢è¿‡ç¨‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * mybatisçš„äºŒçº§ç¼“å­˜</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogCacheLevelTwo1</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    Blog blog1 = blogMapper1.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog1);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    SqlSession session2 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper2 = session2.getMapper(BlogMapper.class);</div><div class="line">    Blog blog2 = blogMapper2.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢ï¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®"</span> + blog2);</div><div class="line">    session2.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"sessionå…³é—­"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å¼€å¯äºŒçº§ç¼“å­˜<br>1.åœ¨mapperæ–‡ä»¶ä¸­è®¾ç½®  <cache><br>2.åœ¨å®ä½“ç±»ä¸­å®ç°åºåˆ—åŒ–æ¥å£</cache></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="comment">/**</span></div><div class="line"> * mybatisçš„äºŒçº§ç¼“å­˜</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogCacheLevelTwo1</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    Blog blog1 = blogMapper1.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog1);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    <span class="comment">// Cache Hit Ratio [mapper.BlogMapper]: 0.5</span></div><div class="line">    SqlSession session2 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper2 = session2.getMapper(BlogMapper.class);</div><div class="line">    Blog blog2 = blogMapper2.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢ï¼šä»ç¼“å­˜ä¸­è·å–æ•°æ®"</span> + blog2);</div><div class="line">    session2.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"sessionå…³é—­"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="27-ç¼“å­˜-äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"><a href="#27-ç¼“å­˜-äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ" class="headerlink" title="27.ç¼“å­˜ - äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ"></a>27.ç¼“å­˜ - äºŒçº§ç¼“å­˜è¢«åˆ·æ–°çš„æƒ…å†µ</h3><p>å’Œä¸€çº§ç¼“å­˜ç›¸åŒï¼Œä¸­é—´æœ‰å¢åˆ æ”¹åˆ™äºŒçº§ç¼“å­˜ä¼šè¢«æ¸…ç©º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * mybatisçš„äºŒçº§ç¼“å­˜ ç¼“å­˜è¢«åˆ·æ–°</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogCacheLevelTwo2</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    Blog blog1 = blogMapper1.selectBlog(<span class="number">3</span>);</div><div class="line">    blog1.setFeatured(<span class="keyword">true</span>);</div><div class="line">    blogMapper1.updateBlog(blog1);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog1);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    SqlSession session2 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper2 = session2.getMapper(BlogMapper.class);</div><div class="line">    Blog blog2 = blogMapper2.selectBlog(<span class="number">3</span>);</div><div class="line">    System.out.println(<span class="string">"ç¼“å­˜è¢«åˆ·æ–°ï¼Œé‡æ–°æŸ¥è¯¢"</span> + blog2);</div><div class="line">    session2.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"sessionå…³é—­"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="28-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€"><a href="#28-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€" class="headerlink" title="28.åµŒå¥—æŸ¥è¯¢ - ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€"></a>28.åµŒå¥—æŸ¥è¯¢ - ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€</h3><p>é«˜çº§ç»“æœæ˜ å°„<br>ä¸€ã€å…³è”æ˜ å°„(é€‚ç”¨äºä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€çš„æƒ…å†µ)</p>
<p>1).åˆ›å»ºpojo<br>(1)åœ¨Blogä¸­åˆ›å»ºAuthorå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Author author;</div></pre></td></tr></table></figure>
<p>(2)åˆ›å»ºAuthorçš„pojo</p>
<p>2).é…ç½®mapper</p>
<p>BlogMapper.java</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap type="Blog" id="blogResultMap"&gt;</div><div class="line">    &lt;id column="id" property="id" jdbcType="INTEGER"&gt;&lt;/id&gt;</div><div class="line">    &lt;association property="author" column="author_id" javaType="Author"</div><div class="line">                 select="me.jing.mapper.AuthorMapper.selectAuthorById"&gt;</div><div class="line">    &lt;/association&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line">&lt;select id="selectBlogById" parameterType="int" resultMap="blogResultMap"&gt;</div><div class="line">    select * from blog where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<p>AuthorMapper.java</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap type="Author" id="authorResultMap"&gt;</div><div class="line">    &lt;id column="id" property="id" jdbcType="INTEGER"/&gt;</div><div class="line">    &lt;result column="favourite_section" property="favouriteSection" jdbcType="VARCHAR"/&gt;</div><div class="line"></div><div class="line">&lt;/resultMap&gt;</div><div class="line"></div><div class="line">&lt;select id="selectAuthorById" parameterType="int" resultMap="authorResultMap"&gt;</div><div class="line">  select * from author where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<p>3) æ¥å£</p>
<p>(1) Blog</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">Blog <span class="title">selectBlogById</span><span class="params">(Integer id)</span></span>;</div></pre></td></tr></table></figure>
<p>(2) Author</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">Author <span class="title">selectAuthorById</span><span class="params">(Integer id)</span></span>;</div></pre></td></tr></table></figure>
<p>4) æµ‹è¯•</p>
<p>æŸ¥è¯¢Blogåˆ—è¡¨æ—¶ï¼Œæ‰§è¡Œçš„sqlè¯­å¥æ˜¯ 1+nï¼Œä½†æ˜¯å¦‚æœblogå…³è”çš„authoræœ‰é‡å¤çš„æ•°æ®ï¼Œé‚£ä¹ˆä»ä¸€çº§ç¼“å­˜ä¸­æŸ¥è¯¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * é€šè¿‡idæŸ¥å…·ä½“çš„åšå®¢ï¼ŒæŸ¥è¯¢æ—¶ å†æ‹¿åˆ°ä½œè€…id å»ä½œè€…è¡¨æŸ¥å…·ä½“çš„ä½œè€…ä¿¡æ¯</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogById</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    Blog blog = blogMapper1.selectBlogById(<span class="number">3</span>);</div><div class="line"></div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="29-åµŒå¥—æŸ¥è¯¢-æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨"><a href="#29-åµŒå¥—æŸ¥è¯¢-æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨" class="headerlink" title="29.åµŒå¥—æŸ¥è¯¢ - æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨"></a>29.åµŒå¥—æŸ¥è¯¢ - æ˜¾ç¤ºä¿¡æ¯åˆ—è¡¨</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;select id="selectBlogList" resultMap="blogResultMap"&gt;</div><div class="line">    select * from blog</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line">List&lt;Blog&gt; selectBlogList();</div><div class="line"></div><div class="line">@Test</div><div class="line">public void testSelectBlogList() &#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    List&lt;Blog&gt; blogs = blogMapper1.selectBlogList();</div><div class="line"></div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println("ç»“æœå·²æŸ¥è¯¢" + blogs);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="30-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½®-31-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®"><a href="#30-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½®-31-åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®" class="headerlink" title="30.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½® 31.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®"></a>30.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„é…ç½® 31.åµŒå¥—æŸ¥è¯¢-ä¸€å¯¹å¤šçš„æŸ¥è¯¢é…ç½®</h3><p>æ‰§è¡Œæµç¨‹ï¼š1.å…ˆæ‰§è¡Œå•è¡¨æŸ¥è¯¢ï¼Œ2.å†åˆ©ç”¨å•è¡¨æŸ¥è¯¢çš„ç»“æœç»§ç»­æ‰§è¡Œå…¶ä»–å•è¡¨æŸ¥è¯¢ï¼Œ3.æœ€åç»„è£…ç»“æœæ˜ å°„ã€‚</p>
<p>é€šè¿‡postçš„id æŸ¥è¯¢postè¡¨çš„å†…å®¹ï¼ŒåŒæ—¶é€šè¿‡æ­¤idæŸ¥è¯¢è¯„è®ºè¡¨ comment é‡Œçš„æ•°æ®åˆ—è¡¨,å³è¿™ç¯‡æ–‡ç« çš„è¯„è®ºåˆ—è¡¨</p>
<p>sql:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function">create table <span class="title">post</span><span class="params">(id <span class="keyword">int</span>,blog_id <span class="keyword">int</span>,author_id <span class="keyword">int</span>,</span></span></div><div class="line">section varchar(<span class="number">20</span>),subject <span class="title">varchar</span><span class="params">(<span class="number">20</span>)</span>,draft <span class="title">varchar</span><span class="params">(<span class="number">20</span>)</span>);</div><div class="line"></div><div class="line"><span class="function">insert into <span class="title">post</span><span class="params">(id,blog_id,author_id,section,subject,draft)</span> </span></div><div class="line"><span class="title">values</span><span class="params">(<span class="string">'1'</span>,<span class="string">'3'</span>,<span class="string">'15'</span>,<span class="string">'section'</span>,<span class="string">'subject'</span>,<span class="string">'draft'</span>)</span>;</div><div class="line"></div><div class="line"><span class="function">create table <span class="title">comment</span><span class="params">(id <span class="keyword">int</span>,</span></span></div><div class="line">name varchar(<span class="number">20</span>),comment <span class="title">varchar</span><span class="params">(<span class="number">20</span>)</span>);</div><div class="line"></div><div class="line"><span class="function">insert into <span class="title">comment</span><span class="params">(id,name,comment,post_id)</span> </span></div><div class="line"><span class="title">values</span><span class="params">(<span class="string">'1'</span>,<span class="string">'è¯„è®ºname'</span>,<span class="string">'æˆ‘è§‰å¾—å¾ˆæ£’ è¯„è®º'</span>,<span class="string">'1'</span>)</span>;</div></pre></td></tr></table></figure>
<p>PostMapper.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap type="Post" id="postResultMap"&gt;</div><div class="line">    &lt;id column="id" property="id" jdbcType="INTEGER"&gt;&lt;/id&gt;</div><div class="line">    &lt;collection property="commentList" column="id" javaType="ArrayList" ofType="Comment"</div><div class="line">                select="me.jing.mapper.CommentMapper.selectCommentListByPostId"&gt;&lt;/collection&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;select id="selectPostById" parameterType="int" resultMap="postResultMap"&gt;</div><div class="line">    select * from post where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<p>CommentMapper.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap type="Comment" id="commentResultMap"&gt;</div><div class="line">    &lt;id column="id" property="id" jdbcType="INTEGER"&gt;&lt;/id&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line"></div><div class="line">&lt;!--é€šè¿‡post_idæŸ¥è¯¢è¯„è®ºåˆ—è¡¨--&gt;</div><div class="line">&lt;select id="selectCommentListByPostId"  parameterType="int" resultMap="commentResultMap"&gt;</div><div class="line">    select * from comment where post_id = #&#123;postId&#125;</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line">&lt;select id="selectCommentById" parameterType="int" resultMap="commentResultMap"&gt;</div><div class="line">    select * from comment where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * é€šè¿‡postçš„id æŸ¥è¯¢postè¡¨çš„å†…å®¹ï¼Œ</div><div class="line"> * åŒæ—¶é€šè¿‡æ­¤idæŸ¥è¯¢è¯„è®ºè¡¨ comment é‡Œçš„æ•°æ®åˆ—è¡¨,å³è¿™ç¯‡æ–‡ç« çš„è¯„è®ºåˆ—è¡¨</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectPostById</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    PostMapper mapper = session1.getMapper(PostMapper.class);</div><div class="line">    Post post = mapper.selectPostById(<span class="number">1</span>);</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + post);</div><div class="line">    session1.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="32-é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ"><a href="#32-é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ" class="headerlink" title="32.é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ"></a>32.é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ</h3><p>1).å…ˆæ‰§è¡Œå…³è”æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®éƒ½æŸ¥è¯¢å‡ºæ¥<br>2).å†å°†æ‰€æœ‰æŸ¥è¯¢å‡ºæ¥çš„åˆ—ç»„ç»‡æˆåµŒå¥—çš„ç»“æœå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM</div><div class="line">blog b</div><div class="line">LEFT JOIN author a</div><div class="line">ON b.author_id = a.id;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">SELECT</div><div class="line"> b.id as blog_id,</div><div class="line"> b.title as blog_title,</div><div class="line"> b.author_id as blog_author_id,</div><div class="line"> b.state as blog_state,</div><div class="line"> b.featured as blog_featured,</div><div class="line"> b.style as blog_style,</div><div class="line"> </div><div class="line"> a.id as author_id,</div><div class="line"> a.username as author_username,</div><div class="line"> a.password as author_password,</div><div class="line"> a.email as author_email</div><div class="line"> </div><div class="line">FROM blog b</div><div class="line">LEFT JOIN author a</div><div class="line">ON b.author_id = a.id;</div></pre></td></tr></table></figure>
<p>BlogMapper.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap id="blogResultMapNested" type="Blog"&gt;</div><div class="line">    &lt;id column="blog_id" property="id"/&gt;</div><div class="line">    &lt;result column="blog_title" property="title"/&gt;</div><div class="line">    &lt;result column="blog_state" property="state"/&gt;</div><div class="line">    &lt;result column="blog_featured" property="featured"/&gt;</div><div class="line">    &lt;result column="blog_style" property="style"/&gt;</div><div class="line">    &lt;!--&lt;result column="blog_author_id" property="author_id"/&gt;--&gt;</div><div class="line">    &lt;association property="author" column="blog_author_id" javaType="Author"&gt;</div><div class="line">        &lt;id column="author_id" property="id"/&gt;</div><div class="line">        &lt;result column="author_username" property="username"/&gt;</div><div class="line">        &lt;result column="author_password" property="password"/&gt;</div><div class="line">        &lt;result column="author_email" property="email"/&gt;</div><div class="line">    &lt;/association&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line">&lt;!--32.é«˜çº§ç»“æœæ˜ å°„-åµŒå¥—ç»“æœ--&gt;</div><div class="line">&lt;select id="selectBlogListNested" resultMap="blogResultMapNested"&gt;</div><div class="line">    SELECT</div><div class="line">     b.id as blog_id,</div><div class="line">     b.title as blog_title,</div><div class="line">     b.author_id as blog_author_id,</div><div class="line">     b.state as blog_state,</div><div class="line">     b.featured as blog_featured,</div><div class="line">     b.style as blog_style,</div><div class="line"></div><div class="line">     a.id as author_id,</div><div class="line">     a.username as author_username,</div><div class="line">     a.password as author_password</div><div class="line"></div><div class="line">    FROM blog b</div><div class="line">    LEFT JOIN author a</div><div class="line">    ON b.author_id = a.id;</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line">/**</div><div class="line"> * åµŒå¥—æŸ¥è¯¢</div><div class="line"> */</div><div class="line">List&lt;Blog&gt; selectBlogListNested();</div><div class="line"></div><div class="line">/**</div><div class="line"> * åµŒå¥—æŸ¥è¯¢</div><div class="line"> */</div><div class="line">@Test</div><div class="line">public void testSelectBlogListNested() &#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    List&lt;Blog&gt; blogs = blogMapper1.selectBlogListNested();</div><div class="line">    session1.close();</div><div class="line">    System.out.println("ç»“æœå·²æŸ¥è¯¢2:" + blogs);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="33-ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†-34-æ‰©å±•ç»“æœçš„å®ç°"><a href="#33-ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†-34-æ‰©å±•ç»“æœçš„å®ç°" class="headerlink" title="33.ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†|34.æ‰©å±•ç»“æœçš„å®ç°"></a>33.ä¸ºä»€ä¹ˆè¦åšæ‰©å±•ç»“æœé›†|34.æ‰©å±•ç»“æœçš„å®ç°</h3><p>1).mapper</p>
<p>BlogCustomMapper.xml</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;sql id="baseColumn"&gt;</div><div class="line">    b.id,</div><div class="line">    b.`title`,</div><div class="line">    b.`author_id`,</div><div class="line">    b.`state`,</div><div class="line">    b.`featured`,</div><div class="line">    b.`style`,</div><div class="line">    a.username as authorUsername</div><div class="line">&lt;/sql&gt;</div><div class="line"></div><div class="line">&lt;select id="selectBlogById" parameterType="int" resultType="BlogCustom"&gt;</div><div class="line">    select</div><div class="line">    &lt;include refid="baseColumn"/&gt;</div><div class="line">    from blog b</div><div class="line">    left join author a</div><div class="line">    on b.author_id = a.id</div><div class="line">    where b.id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div></pre></td></tr></table></figure>
<p>BlogCustomMapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BlogCustomMapper</span> </span>&#123;</div><div class="line">    <span class="function">BlogCustom <span class="title">selectBlogById</span><span class="params">(Integer id)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2)vo.BlogCustom.java</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * æ‰©å±•Blog</div><div class="line"> */</div><div class="line">public class BlogCustom extends Blog &#123;</div><div class="line"></div><div class="line">    private static final long serialVersionUID = 1L;</div><div class="line">    private String authorUsername;</div><div class="line"></div><div class="line">    public String getAuthorUsername() &#123;</div><div class="line">        return authorUsername;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setAuthorUsername(String authorUsername) &#123;</div><div class="line">        this.authorUsername = authorUsername;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return "BlogCustom&#123;" +</div><div class="line">                "authorUsername='" + authorUsername + '\'' +</div><div class="line">                '&#125;';</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;!--å®šä¹‰åˆ«å--&gt;</div><div class="line">&lt;typeAliases&gt;</div><div class="line">    &lt;!--&lt;typeAlias type="pojo.Blog" alias="Blog"/&gt;--&gt;</div><div class="line">    &lt;package name="me.jing.pojo"/&gt;</div><div class="line">    &lt;package name="me.jing.pojo.vo"/&gt;</div><div class="line">&lt;/typeAliases&gt;</div></pre></td></tr></table></figure>
<p>3)æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * é€šè¿‡idæŸ¥å…·ä½“çš„åšå®¢ï¼ŒæŸ¥è¯¢æ—¶ å†æ‹¿åˆ°ä½œè€…id å»ä½œè€…è¡¨æŸ¥å…·ä½“çš„ä½œè€… username</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogById</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogCustomMapper mapper = session1.getMapper(BlogCustomMapper.class);</div><div class="line">    BlogCustom blog = mapper.selectBlogById(<span class="number">3</span>);</div><div class="line"></div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span> + blog);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="35-é«˜çº§ç»“æœæ˜ å°„-æ„é€ æ–¹å¼æ˜ å°„"><a href="#35-é«˜çº§ç»“æœæ˜ å°„-æ„é€ æ–¹å¼æ˜ å°„" class="headerlink" title="35.é«˜çº§ç»“æœæ˜ å°„ - æ„é€ æ–¹å¼æ˜ å°„"></a>35.é«˜çº§ç»“æœæ˜ å°„ - æ„é€ æ–¹å¼æ˜ å°„</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">Bolg.xml</div><div class="line"></div><div class="line">public Blog(Integer id, String title) &#123;</div><div class="line">    this.id = id;</div><div class="line">    this.title = title;</div><div class="line">    System.out.println("æ„é€ å‡½æ•°è°ƒç”¨-----");</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;!--æ„é€ æ–¹æ³•æ˜ å°„--&gt;</div><div class="line">&lt;resultMap id="blogResultMapConstructor" type="Blog"&gt;</div><div class="line">    &lt;constructor&gt;</div><div class="line">        &lt;idArg column="id" javaType="int"/&gt;</div><div class="line">        &lt;arg column="title" javaType="string"/&gt;</div><div class="line">    &lt;/constructor&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line">&lt;select id="selectBlogByIdConstructor" parameterType="int" resultMap="blogResultMapConstructor"&gt;</div><div class="line">  select * from blog where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line"> /**</div><div class="line"> * æ„é€ æ–¹å¼æ˜ å°„</div><div class="line"> */</div><div class="line">Blog selectBlogByIdConstructor(Integer id);</div><div class="line"></div><div class="line"> /**</div><div class="line"> * æ„é€ æ–¹å¼æ˜ å°„</div><div class="line"> */</div><div class="line">@Test</div><div class="line">public void testSelectBlogByIdConstructor() &#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    Blog blog = blogMapper1.selectBlogByIdConstructor(3);</div><div class="line">    session1.close();</div><div class="line">    System.out.println("ç»“æœå·²æŸ¥è¯¢:" + blog);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="36-é‰´åˆ«å™¨"><a href="#36-é‰´åˆ«å™¨" class="headerlink" title="36.é‰´åˆ«å™¨"></a>36.é‰´åˆ«å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `vehicle`(</div><div class="line">	`id` INT(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</div><div class="line">	`vin` VARCHAR(<span class="number">50</span>) COLLATE utf8_bin DEFAULT NULL,</div><div class="line">	`year` YEAR(<span class="number">4</span>) DEFAULT NULL,</div><div class="line">	`make` VARCHAR(<span class="number">50</span>) COLLATE utf8_bin DEFAULT NULL,</div><div class="line">	`model` VARCHAR(<span class="number">50</span>) COLLATE utf8_bin DEFAULT NULL,</div><div class="line">	`color` VARCHAR(<span class="number">50</span>) COLLATE utf8_bin DEFAULT NULL,</div><div class="line">	`vehicle_type` INT(<span class="number">11</span>) DEFAULT NULL,</div><div class="line">	`door_count` INT(<span class="number">11</span>) DEFAULT NULL,</div><div class="line">	`all_wheel_drive` TINYINT(<span class="number">1</span>) DEFAULT NULL,</div><div class="line">	<span class="function">PRIMARY <span class="title">KEY</span><span class="params">(`id`)</span></span></div><div class="line"> ) ENGINE=INNODB AUTO_INCREMENT=<span class="number">5</span> DEFAULT CHARSET=utf8 COLLATE=utf8_bin;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">VehicleMapper.xml</div><div class="line"></div><div class="line">&lt;resultMap type="Vehicle" id="vehicleResultMap"&gt;</div><div class="line">    &lt;id column="id" property="id" jdbcType="INTEGER"/&gt;</div><div class="line">    &lt;discriminator javaType="int" column="vehicle_type"&gt;</div><div class="line">        &lt;case value="1" resultType="Car"&gt;</div><div class="line">            &lt;result column="door_count" property="doorCount"/&gt;</div><div class="line">        &lt;/case&gt;</div><div class="line">        &lt;case value="2" resultType="Suv"&gt;</div><div class="line">            &lt;result column="all_wheel_drive" property="allWheelDrive"/&gt;</div><div class="line">        &lt;/case&gt;</div><div class="line">    &lt;/discriminator&gt;</div><div class="line">&lt;/resultMap&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;select id="selectVehicleById" parameterType="int" resultMap="vehicleResultMap"&gt;</div><div class="line">    select * from vehicle where id = #&#123;id&#125;</div><div class="line">&lt;/select&gt;</div><div class="line"></div><div class="line">Vehicle selectVehicleById(Integer id);</div></pre></td></tr></table></figure>
<p>pojo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Integer id;</div><div class="line">    <span class="keyword">private</span> Integer vehicle_type;</div><div class="line">    <span class="keyword">private</span> String vin;</div><div class="line">    <span class="keyword">private</span> String make;</div><div class="line">    <span class="keyword">private</span> String model;</div><div class="line">    <span class="keyword">private</span> String color;</div><div class="line">    <span class="keyword">private</span> Boolean all_wheel_drive;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Suv</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// å…¨è½®é©±åŠ¨ awd</span></div><div class="line">    <span class="keyword">private</span> Boolean allWheelDrive;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Suv</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getAllWheelDrive</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> allWheelDrive;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAllWheelDrive</span><span class="params">(Boolean allWheelDrive)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.allWheelDrive = allWheelDrive;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Suv&#123;"</span> +</div><div class="line">                <span class="string">"allWheelDrive="</span> + allWheelDrive +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// é—¨çš„æ•°é‡</span></div><div class="line">    <span class="keyword">private</span> Integer doorCount;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getDoorCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> doorCount;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDoorCount</span><span class="params">(Integer doorCount)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.doorCount = doorCount;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Car&#123;"</span> +</div><div class="line">                <span class="string">"doorCount="</span> + doorCount +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * é‰´åˆ«å™¨</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectVehicleById</span><span class="params">()</span> </span>&#123;</div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    VehicleMapper mapper = session1.getMapper(VehicleMapper.class);</div><div class="line">    Vehicle vehicle = mapper.selectVehicleById(<span class="number">1</span>);</div><div class="line">    Vehicle vehicle2 = mapper.selectVehicleById(<span class="number">2</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (vehicle <span class="keyword">instanceof</span> Car) &#123;</div><div class="line">        Car car = (Car) vehicle;</div><div class="line">        Suv suv = (Suv) vehicle2;</div><div class="line">        System.out.println(<span class="string">"car:"</span> + car);</div><div class="line">        System.out.println(<span class="string">"suv:"</span> + suv);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        Car car = (Car) vehicle2;</div><div class="line">        Suv suv = (Suv) vehicle;</div><div class="line">        System.out.println(<span class="string">"car:"</span> + car);</div><div class="line">        System.out.println(<span class="string">"suv:"</span> + suv);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"vehicle:"</span> + vehicle);</div><div class="line">    System.out.println(<span class="string">"vehicle2:"</span> + vehicle2);</div><div class="line">    session1.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="37-å»¶è¿ŸåŠ è½½-ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ"><a href="#37-å»¶è¿ŸåŠ è½½-ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ" class="headerlink" title="37.å»¶è¿ŸåŠ è½½ - ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ"></a>37.å»¶è¿ŸåŠ è½½ - ä¸é…ç½®å»¶è¿ŸåŠ è½½çš„æƒ…å†µ</h3><p>æµ‹è¯•ä¸€ï¼š<br>æ²¡æœ‰é…ç½®ä»»ä½•é€‰é¡¹ï¼Œæ‰§è¡Œä¸¤éæŸ¥è¯¢ï¼Œæ€§èƒ½æ¯”è¾ƒä½</p>
<p>æ— è®ºæ˜¯å¦æŸ¥è¯¢blogçš„ä»»æ„å±æ€§ï¼Œéƒ½ä¼šæ‰§è¡Œauthorçš„ä»»ä½•æŸ¥è¯¢ï¼Œå°±æ˜¯è¯´ å§‹ç»ˆä¼šæ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">æŸ¥è¯¢blog----</div><div class="line">Opening JDBC Connection</div><div class="line">Created connection <span class="number">504858437</span>.</div><div class="line">Setting autocommit to <span class="keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@<span class="number">1e178745</span>]</div><div class="line">==&gt;  Preparing: select * from blog where id = ? </div><div class="line">==&gt; Parameters: <span class="number">3</span>(Integer)</div><div class="line">====&gt;  Preparing: select * from author where id = ? </div><div class="line">====&gt; Parameters: <span class="number">15</span>(Integer)</div><div class="line">&lt;====      Total: <span class="number">1</span></div><div class="line">&lt;==      Total: <span class="number">1</span></div><div class="line">Resetting autocommit to <span class="keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@<span class="number">1e178745</span>]</div><div class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@<span class="number">1e178745</span>]</div><div class="line">Returned connection <span class="number">504858437</span> to pool.</div><div class="line">æŸ¥è¯¢blogçš„titleå±æ€§----</div><div class="line">Androidå¼€å‘è‰ºæœ¯æ¢ç´¢</div><div class="line">æŸ¥è¯¢blogçš„authorå±æ€§----</div><div class="line">æ™¯å½¬</div><div class="line">ç»“æœå·²æŸ¥è¯¢</div></pre></td></tr></table></figure>
<h3 id="38-å»¶è¿ŸåŠ è½½-é…ç½®lazyloadingenabled"><a href="#38-å»¶è¿ŸåŠ è½½-é…ç½®lazyloadingenabled" class="headerlink" title="38.å»¶è¿ŸåŠ è½½ - é…ç½®lazyloadingenabled"></a>38.å»¶è¿ŸåŠ è½½ - é…ç½®lazyloadingenabled</h3><p>æµ‹è¯•äºŒï¼š<br>å¦‚æœä¸æŸ¥è¯¢blogçš„ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆä¸ä¼šæ‰§è¡Œauthorçš„æŸ¥è¯¢</p>
<p>é…ç½®äº†å…¨å±€å±æ€§ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;settings&gt;</div><div class="line">    &lt;!--&lt;setting name="useGeneratedKeys" value="true"/&gt;--&gt;</div><div class="line">    &lt;!--å»¶è¿ŸåŠ è½½ é…ç½®lazyloadingenabled--&gt;</div><div class="line">    &lt;setting name="lazyLoadingEnabled" value="true"/&gt;</div><div class="line">&lt;/settings&gt;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * æµ‹è¯•å»¶è¿ŸåŠ è½½</div><div class="line"> * æ²¡æœ‰é…ç½® lazyLoadingEnabled æ—¶ï¼Œä¼šå§‹ç»ˆæ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogByIdLazyLoading</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blog----"</span>);</div><div class="line">    Blog blog = blogMapper1.selectBlogById(<span class="number">3</span>);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line"><span class="comment">//        System.out.println("æŸ¥è¯¢blogçš„titleå±æ€§----");</span></div><div class="line"><span class="comment">//        System.out.println(blog.getTitle());</span></div><div class="line"><span class="comment">//        System.out.println("æŸ¥è¯¢blogçš„authorå±æ€§----");</span></div><div class="line"><span class="comment">//        System.out.println(blog.getAuthor().getUsername());</span></div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ—¥å¿—æ‰“å°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">æŸ¥è¯¢blog----</div><div class="line">Opening JDBC Connection</div><div class="line">Created connection <span class="number">210156003</span>.</div><div class="line">Setting autocommit to <span class="keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">==&gt;  Preparing: select * from blog where id = ? </div><div class="line">==&gt; Parameters: <span class="number">3</span>(Integer)</div><div class="line">&lt;==      Total: <span class="number">1</span></div><div class="line">Resetting autocommit to <span class="keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Returned connection <span class="number">210156003</span> to pool.</div><div class="line">ç»“æœå·²æŸ¥è¯¢</div></pre></td></tr></table></figure>
<h3 id="39-å»¶è¿ŸåŠ è½½-æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ"><a href="#39-å»¶è¿ŸåŠ è½½-æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ" class="headerlink" title="39.å»¶è¿ŸåŠ è½½ - æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ"></a>39.å»¶è¿ŸåŠ è½½ - æµ‹è¯•ç”¨ä¾‹1å’Œ2çš„æ¯”è¾ƒ</h3><h3 id="40-å»¶è¿ŸåŠ è½½-ç§¯æçš„å»¶è¿ŸåŠ è½½"><a href="#40-å»¶è¿ŸåŠ è½½-ç§¯æçš„å»¶è¿ŸåŠ è½½" class="headerlink" title="40.å»¶è¿ŸåŠ è½½ - ç§¯æçš„å»¶è¿ŸåŠ è½½"></a>40.å»¶è¿ŸåŠ è½½ - ç§¯æçš„å»¶è¿ŸåŠ è½½</h3><p>å»¶è¿ŸåŠ è½½ï¼šç”¨å±æ€§å°±åŠ è½½ï¼Œä¸ç”¨å°±ä¸åŠ è½½ã€‚<br>ç§¯æçš„å»¶è¿ŸåŠ è½½ï¼šåªè¦ç”¨å±æ€§ï¼Œå°±æŠŠæ‰€æœ‰è¦æŸ¥è¯¢çš„å±æ€§sqlå…¨éƒ¨æ‰§è¡Œä¸€éã€‚</p>
<p>æµ‹è¯•ä¸‰ï¼š<br>åªè¦æŸ¥è¯¢bolgçš„ä»»æ„å±æ€§ï¼Œéƒ½ä¼šæ‰§è¡Œauthoræ•°æ®çš„æŸ¥è¯¢</p>
<p>é…ç½®äº†å…¨å±€å±æ€§(åŒæµ‹è¯•2çš„é…ç½®)ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;settings&gt;</div><div class="line">    &lt;!--&lt;setting name="useGeneratedKeys" value="true"/&gt;--&gt;</div><div class="line">    &lt;!--å»¶è¿ŸåŠ è½½ é…ç½®lazyloadingenabled--&gt;</div><div class="line">    &lt;setting name="lazyLoadingEnabled" value="true"/&gt;</div><div class="line">&lt;/settings&gt;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * æµ‹è¯•å»¶è¿ŸåŠ è½½</div><div class="line"> * æ²¡æœ‰é…ç½® lazyLoadingEnabled æ—¶ï¼Œä¼šå§‹ç»ˆæ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogByIdLazyLoading</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blog----"</span>);</div><div class="line">    Blog blog = blogMapper1.selectBlogById(<span class="number">3</span>);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blogçš„titleå±æ€§----"</span>);</div><div class="line">    System.out.println(blog.getTitle());</div><div class="line"><span class="comment">//        System.out.println("æŸ¥è¯¢blogçš„authorå±æ€§----");</span></div><div class="line"><span class="comment">//        System.out.println(blog.getAuthor().getUsername());</span></div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="41-å»¶è¿ŸåŠ è½½-éç§¯æå»¶è¿ŸåŠ è½½"><a href="#41-å»¶è¿ŸåŠ è½½-éç§¯æå»¶è¿ŸåŠ è½½" class="headerlink" title="41.å»¶è¿ŸåŠ è½½ - éç§¯æå»¶è¿ŸåŠ è½½"></a>41.å»¶è¿ŸåŠ è½½ - éç§¯æå»¶è¿ŸåŠ è½½</h3><p>æµ‹è¯•å››ï¼š<br>å»¶è¿ŸåŠ è½½ï¼Œå¹¶ä¸”æ˜¯éç§¯æçš„ã€‚å¦‚æœéœ€è¦è®¿é—®blogçš„éauthorå±æ€§ï¼Œåˆ™ä¸æ‰§è¡Œå…³è”çš„authoræŸ¥è¯¢ã€‚</p>
<p>é…ç½®äº†å…¨å±€å±æ€§ï¼š</p>
<blockquote>
<p>é…ç½®åï¼Œæ²¡æœ‰è°ƒç”¨ blog.getAuthor() å±æ€§ï¼Œå°±åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè°ƒç”¨ blog.getAuthor() å±æ€§æ‰å›å†æ‰§è¡ŒæŸ¥è¯¢authorè¡¨ä¸€æ¬¡ã€‚</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;!--å…·ä½“çš„insertä¹Ÿå¾—é…ç½® keyProperty--&gt;</div><div class="line">&lt;settings&gt;</div><div class="line">    &lt;setting name="useGeneratedKeys" value="true"/&gt;</div><div class="line">    &lt;!--å»¶è¿ŸåŠ è½½ é…ç½®lazyloadingenabled--&gt;</div><div class="line">    &lt;setting name="lazyLoadingEnabled" value="true"/&gt;</div><div class="line">    &lt;!--éç§¯æçš„å»¶è¿ŸåŠ è½½--&gt;</div><div class="line">    &lt;setting name="aggressiveLazyLoading" value="false"/&gt;</div><div class="line">&lt;/settings&gt;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/**</span></div><div class="line"> * æµ‹è¯•å»¶è¿ŸåŠ è½½</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogByIdLazyLoading</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blog----"</span>);</div><div class="line">    Blog blog = blogMapper1.selectBlogById(<span class="number">3</span>);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blogçš„titleå±æ€§----"</span>);</div><div class="line">    System.out.println(blog.getTitle());</div><div class="line"><span class="comment">//        System.out.println("æŸ¥è¯¢blogçš„authorå±æ€§----");</span></div><div class="line"><span class="comment">//        System.out.println(blog.getAuthor().getUsername());</span></div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰“å°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">æŸ¥è¯¢blog----</div><div class="line">Opening JDBC Connection</div><div class="line">Created connection <span class="number">210156003</span>.</div><div class="line">Setting autocommit to <span class="keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">==&gt;  Preparing: select * from blog where id = ? </div><div class="line">==&gt; Parameters: <span class="number">3</span>(Integer)</div><div class="line">&lt;==      Total: <span class="number">1</span></div><div class="line">Resetting autocommit to <span class="keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Returned connection <span class="number">210156003</span> to pool.</div><div class="line">æŸ¥è¯¢blogçš„titleå±æ€§----</div><div class="line">Androidå¼€å‘è‰ºæœ¯æ¢ç´¢</div><div class="line">ç»“æœå·²æŸ¥è¯¢</div></pre></td></tr></table></figure>
<p>æµ‹è¯•äº”ï¼š</p>
<p>é…ç½®äº†å…¨å±€å±æ€§ åŒé…ç½®å››</p>
<p>å»¶è¿ŸåŠ è½½ï¼Œå¹¶ä¸”æ˜¯ä¸ç§¯æçš„ã€‚å¦‚æœè®¿é—®äº†blogçš„authorå±æ€§ï¼Œåˆ™æ‰§è¡Œå…³è”çš„authoræŸ¥è¯¢</p>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * æµ‹è¯•å»¶è¿ŸåŠ è½½</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectBlogByIdLazyLoading</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    SqlSession session1 = MyBatisUtil.getSqlSession();</div><div class="line">    BlogMapper blogMapper1 = session1.getMapper(BlogMapper.class);</div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blog----"</span>);</div><div class="line">    Blog blog = blogMapper1.selectBlogById(<span class="number">3</span>);</div><div class="line">    session1.close();</div><div class="line"></div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blogçš„titleå±æ€§----"</span>);</div><div class="line">    System.out.println(blog.getTitle());</div><div class="line">    System.out.println(<span class="string">"æŸ¥è¯¢blogçš„authorå±æ€§----"</span>);</div><div class="line">    System.out.println(blog.getAuthor().getUsername());</div><div class="line">    System.out.println(<span class="string">"ç»“æœå·²æŸ¥è¯¢"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰“å°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">æŸ¥è¯¢blog----</div><div class="line">Opening JDBC Connection</div><div class="line">Created connection <span class="number">210156003</span>.</div><div class="line">Setting autocommit to <span class="keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">==&gt;  Preparing: select * from blog where id = ? </div><div class="line">==&gt; Parameters: <span class="number">3</span>(Integer)</div><div class="line">&lt;==      Total: <span class="number">1</span></div><div class="line">Resetting autocommit to <span class="keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Returned connection <span class="number">210156003</span> to pool.</div><div class="line">æŸ¥è¯¢blogçš„titleå±æ€§----</div><div class="line">Androidå¼€å‘è‰ºæœ¯æ¢ç´¢</div><div class="line">æŸ¥è¯¢blogçš„authorå±æ€§----</div><div class="line">Opening JDBC Connection</div><div class="line">Checked out connection <span class="number">210156003</span> from pool.</div><div class="line">Setting autocommit to <span class="keyword">false</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">==&gt;  Preparing: select * from author where id = ? </div><div class="line">==&gt; Parameters: <span class="number">15</span>(Integer)</div><div class="line">&lt;==      Total: <span class="number">1</span></div><div class="line">Resetting autocommit to <span class="keyword">true</span> on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl<span class="meta">@c</span>86b9e3]</div><div class="line">Returned connection <span class="number">210156003</span> to pool.</div><div class="line">æ™¯å½¬</div><div class="line">ç»“æœå·²æŸ¥è¯¢</div></pre></td></tr></table></figure>
    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">æ”¯æŒä¸€ä¸‹</span>
      <div class="donation-body">
        <div class="tip text-center">æ‰«ä¸€æ‰«ï¼Œæ”¯æŒæˆ‘</div>
        <ul>
        
          <li class="item">
            
              <span>å¾®ä¿¡æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/Wechat-admire.jpg" alt="">
          </li>
        
          <li class="item">
            
              <span>æ”¯ä»˜å®æ‰«ä¸€æ‰«</span>
            
            <img src="https://raw.githubusercontent.com/youlookwhat/CloudReader/master/file/alipay-admire.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2019/03/31/mysql-tip/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2019/04/09/github-pages-readme/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/categories/Android"
              rel="noopener noreferrer"
              target="_self"
              >
              åˆ†ç±»
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/Android"
              rel="noopener noreferrer"
              target="_self"
              >
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/project"
              rel="noopener noreferrer"
              target="_self"
              >
              é¡¹ç›®
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              å‹é“¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              å…³äº
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/music.html"
              rel="noopener noreferrer"
              target="_self"
              >
              ğŸµ
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalkè¯„è®ºæ’ä»¶é€šç”¨ä»£ç  -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '2b303b849c8ea65e4051',
  clientSecret: '57fc88550a6d86d10a191bb7b6411072576c00b3',
  repo: 'blog-comment',
  owner: 'youlookwhat',
  // åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸‹æˆªå–å‰50ä¸ªå­—ç¬¦ä¸², è¿™æ˜¯å› ä¸º github å¯¹ label çš„é•¿åº¦æœ‰äº†è¦æ±‚, å¦‚æœè¶…è¿‡
  // 50ä¸ªå­—ç¬¦ä¸²åˆ™ä¼šæŠ¥é”™.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['youlookwhat'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalkä»£ç ç»“æŸ -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
